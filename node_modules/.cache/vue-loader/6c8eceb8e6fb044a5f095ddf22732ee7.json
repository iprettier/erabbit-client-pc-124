{"remainingRequest":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\src\\views\\member\\order\\index.vue?vue&type=style&index=0&id=7dc8ef14&scoped=true&lang=less","dependencies":[{"path":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\src\\views\\member\\order\\index.vue","mtime":1621243079000},{"path":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\css-loader\\dist\\cjs.js","mtime":1656924650500},{"path":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":1656924654019},{"path":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\postcss-loader\\src\\index.js","mtime":1656924651883},{"path":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\less-loader\\dist\\cjs.js","mtime":1656924651368},{"path":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\style-resources-loader\\lib\\index.js","mtime":1656924651644},{"path":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656924649801},{"path":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1656924653036}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5tZW1iZXItb3JkZXIgewogIGhlaWdodDogMTAwJTsKICBiYWNrZ3JvdW5kOiAjZmZmOwp9Ci5vcmRlci1saXN0IHsKICBiYWNrZ3JvdW5kOiAjZmZmOwogIHBhZGRpbmc6IDIwcHg7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIG1pbi1oZWlnaHQ6IDQwMHB4Owp9Ci5sb2FkaW5nIHsKICBoZWlnaHQ6IDEwMCU7CiAgd2lkdGg6IDEwMCU7CiAgcG9zaXRpb246IGFic29sdXRlOwogIGxlZnQ6IDA7CiAgdG9wOiAwOwogIGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsLjkpIHVybCguLi8uLi8uLi9hc3NldHMvaW1hZ2VzL2xvYWRpbmcuZ2lmKSBuby1yZXBlYXQgY2VudGVyOwp9Ci5ub25lIHsKICBoZWlnaHQ6IDQwMHB4OwogIHRleHQtYWxpZ246IGNlbnRlcjsKICBsaW5lLWhlaWdodDogNDAwcHg7CiAgY29sb3I6ICM5OTk7Cn0K"},{"version":3,"sources":["E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\src\\views\\member\\order\\index.vue"],"names":[],"mappings":";AAmJA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AAClB;AACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACV,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EAChB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACb,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAClB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;AACnB;AACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACP,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACZ,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACX,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAClB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;EACP,CAAC,CAAC,CAAC,EAAE,CAAC;EACN,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAC3F;AACA,CAAC,CAAC,CAAC,CAAC,EAAE;EACJ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;EACb,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAClB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;EAClB,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AACb","file":"E:/百度网盘下载/黑马vue/Vue3.0小兔鲜儿项目资料/代码/erabbit-client-pc-124/src/views/member/order/index.vue","sourceRoot":"","sourcesContent":["<template>\n  <div class=\"member-order\">\n    <!-- tab组件 -->\n    <XtxTabs v-model=\"activeName\" @tab-click=\"tabClick\">\n      <XtxTabsPanel\n        v-for=\"item in orderStatus\"\n        :key=\"item.name\"\n        :label=\"item.label\"\n        :name=\"item.name\"\n      >\n      </XtxTabsPanel>\n    </XtxTabs>\n    <!-- 订单列表 -->\n    <div class=\"order-list\">\n      <div v-if=\"loading\" class=\"loading\"></div>\n      <div class=\"none\" v-if=\"!loading && orderList.length === 0\">暂无数据</div>\n      <OrderItem\n        @on-cancel=\"handlerCancel\"\n        @on-delete=\"handlerDelete\"\n        @on-confirm=\"handlerConfirm\"\n        @on-logistics=\"handlerLogistics\"\n        v-for=\"item in orderList\"\n        :key=\"item.id\"\n        :order=\"item\"\n      />\n    </div>\n    <!-- 分页组件 -->\n    <XtxPagination\n      v-if=\"total>0\"\n      :current-page=\"reqParams.page\"\n      :page-size=\"reqParams.pageSize\"\n      :total=\"total\"\n      @current-change=\"reqParams.page=$event\"\n    />\n    <!-- 取消原因组件 -->\n    <OrderCancel ref=\"orderCancelCom\" />\n    <!-- 查看物流组件 -->\n    <OrderLogistics ref=\"orderLogisticsCom\" />\n  </div>\n</template>\n<script>\nimport { reactive, ref, watch } from 'vue'\nimport { orderStatus } from '@/api/constants'\nimport OrderItem from './components/order-item'\nimport OrderCancel from './components/order-cancel'\nimport OrderLogistics from './components/order-logistics'\nimport { confirmOrder, deleteOrder, findOrderList } from '@/api/order'\nimport Confirm from '@/components/library/Confirm'\nimport Message from '@/components/library/Message'\nexport default {\n  name: 'MemberOrder',\n  components: {\n    OrderItem,\n    OrderCancel,\n    OrderLogistics\n  },\n  setup () {\n    const activeName = ref('all')\n\n    // 筛选条件\n    const reqParams = reactive({\n      page: 1,\n      pageSize: 5,\n      orderState: 0\n    })\n    const orderList = ref([])\n    const loading = ref(false)\n    const total = ref(0)\n\n    const getOrderList = () => {\n      loading.value = true\n      findOrderList(reqParams).then(data => {\n        orderList.value = data.result.items\n        total.value = data.result.counts\n        loading.value = false\n      })\n    }\n    // 筛选条件变化重新加载\n    watch(reqParams, () => {\n      getOrderList()\n    }, { immediate: true })\n\n    // 点击选项卡\n    const tabClick = ({ index }) => {\n      reqParams.page = 1\n      reqParams.orderState = index\n    }\n\n    // 删除订单\n    const handlerDelete = (order) => {\n      Confirm({ text: '亲，您确认删除该订单吗？' }).then(() => {\n        deleteOrder(order.id).then(() => {\n          Message({ type: 'success', text: '删除成功' })\n          getOrderList()\n        })\n      }).catch(() => {})\n    }\n\n    return {\n      activeName,\n      orderStatus,\n      orderList,\n      tabClick,\n      loading,\n      total,\n      reqParams,\n      handlerDelete,\n      ...useCancel(),\n      ...useConfirm(),\n      ...useLogistics()\n    }\n  }\n}\n// 取消订单逻辑\nexport const useCancel = () => {\n  // 组件实例\n  const orderCancelCom = ref(null)\n  // 点击取消\n  const handlerCancel = (order) => {\n    orderCancelCom.value.open(order)\n  }\n  return { handlerCancel, orderCancelCom }\n}\n// 确认收货逻辑\nexport const useConfirm = () => {\n  const handlerConfirm = (order) => {\n    Confirm({ text: '亲，您确认收货吗？确认后货款将打给卖家。' }).then(() => {\n      confirmOrder(order.id).then(() => {\n        Message({ type: 'success', text: '确认收货成功' })\n        // 待收货--->待评价\n        order.orderState = 4\n      })\n    }).catch(() => {})\n  }\n  return { handlerConfirm }\n}\n// 查看物流逻辑\nexport const useLogistics = () => {\n  const orderLogisticsCom = ref(null)\n  const handlerLogistics = (order) => {\n    orderLogisticsCom.value.open(order)\n  }\n  return { handlerLogistics, orderLogisticsCom }\n}\n\n</script>\n<style scoped lang=\"less\">\n.member-order {\n  height: 100%;\n  background: #fff;\n}\n.order-list {\n  background: #fff;\n  padding: 20px;\n  position: relative;\n  min-height: 400px;\n}\n.loading {\n  height: 100%;\n  width: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  background: rgba(255,255,255,.9) url(../../../assets/images/loading.gif) no-repeat center;\n}\n.none {\n  height: 400px;\n  text-align: center;\n  line-height: 400px;\n  color: #999;\n}\n</style>\n"]}]}