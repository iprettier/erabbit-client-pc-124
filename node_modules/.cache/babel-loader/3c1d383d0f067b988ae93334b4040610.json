{"remainingRequest":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\thread-loader\\dist\\cjs.js!F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\babel-loader\\lib\\index.js!F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\eslint-loader\\index.js??ref--13-0!F:\\代码\\Vue 代码\\erabbit-client-pc-124\\src\\utils\\request.js","dependencies":[{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\src\\utils\\request.js","mtime":1621243079000},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656924649801},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1656924649783},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\babel-loader\\lib\\index.js","mtime":1656924651984},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\eslint-loader\\index.js","mtime":1656924650183}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJGOi9cdTRFRTNcdTc4MDEvVnVlIFx1NEVFM1x1NzgwMS9lcmFiYml0LWNsaWVudC1wYy0xMjQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7Ci8vIDEuIOWIm+W7uuS4gOS4quaWsOeahGF4aW9z5a6e5L6LCi8vIDIuIOivt+axguaLpuaIquWZqO+8jOWmguaenOaciXRva2Vu6L+b6KGM5aS06YOo5pC65bimCi8vIDMuIOWTjeW6lOaLpuaIquWZqO+8mjEuIOWJpeemu+aXoOaViOaVsOaNriAgMi4g5aSE55CGdG9rZW7lpLHmlYgKLy8gNC4g5a+85Ye65LiA5Liq5Ye95pWw77yM6LCD55So5b2T5YmN55qEYXhzaW/lrp7kvovlj5Hor7fmsYLvvIzov5Tlm57lgLxwcm9taXNlCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBzdG9yZSBmcm9tICdAL3N0b3JlJzsKaW1wb3J0IHJvdXRlciBmcm9tICdAL3JvdXRlcic7IC8vIOWvvOWHuuWfuuWHhuWcsOWdgO+8jOWOn+WboO+8muWFtuS7luWcsOaWueS4jeaYr+mAmui/h2F4aW9z5Y+R6K+35rGC55qE5Zyw5pa555So5LiK5Z+65YeG5Zyw5Z2ACgpleHBvcnQgdmFyIGJhc2VVUkwgPSAnaHR0cDovL3BjYXBpLXhpYW90dXhpYW4tZnJvbnQtZGV2dGVzdC5pdGhlaW1hLm5ldC8nOwp2YXIgaW5zdGFuY2UgPSBheGlvcy5jcmVhdGUoewogIC8vIGF4aW9zIOeahOS4gOS6m+mFjee9ru+8jGJhc2VVUkwgIHRpbWVvdXQKICBiYXNlVVJMOiBiYXNlVVJMLAogIHRpbWVvdXQ6IDUwMDAKfSk7Cmluc3RhbmNlLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgLy8g5oum5oiq5Lia5Yqh6YC76L6RCiAgLy8g6L+b6KGM6K+35rGC6YWN572u55qE5L+u5pS5CiAgLy8g5aaC5p6c5pys5Zyw5Y+IdG9rZW7lsLHlnKjlpLTpg6jmkLrluKYKICAvLyAxLiDojrflj5bnlKjmiLfkv6Hmga/lr7nosaEKICB2YXIgcHJvZmlsZSA9IHN0b3JlLnN0YXRlLnVzZXIucHJvZmlsZTsgLy8gMi4g5Yik5pat5piv5ZCm5pyJdG9rZW4KCiAgaWYgKHByb2ZpbGUudG9rZW4pIHsKICAgIC8vIDMuIOiuvue9rnRva2VuCiAgICBjb25maWcuaGVhZGVycy5BdXRob3JpemF0aW9uID0gIkJlYXJlciAiLmNvbmNhdChwcm9maWxlLnRva2VuKTsKICB9CgogIHJldHVybiBjb25maWc7Cn0sIGZ1bmN0aW9uIChlcnIpIHsKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyKTsKfSk7IC8vIHJlcyA9PiByZXMuZGF0YSAg5Y+W5Ye6ZGF0YeaVsOaNru+8jOWwhuadpeiwg+eUqOaOpeWPo+eahOaXtuWAmeebtOaOpeaLv+WIsOeahOWwseaYr+WQjuWPsOeahOaVsOaNrgoKaW5zdGFuY2UuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShmdW5jdGlvbiAocmVzKSB7CiAgcmV0dXJuIHJlcy5kYXRhOwp9LCBmdW5jdGlvbiAoZXJyKSB7CiAgLy8gNDAxIOeKtuaAgeegge+8jOi/m+WFpeivpeWHveaVsAogIGlmIChlcnIucmVzcG9uc2UgJiYgZXJyLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7CiAgICAvLyAxLiDmuIXnqbrml6DmlYjnlKjmiLfkv6Hmga8KICAgIC8vIDIuIOi3s+i9rOWIsOeZu+W9lemhtQogICAgLy8gMy4g6Lez6L2s6ZyA6KaB5Lyg5Y+C77yI5b2T5YmN6Lev55Sx5Zyw5Z2A77yJ57uZ55m75b2V6aG156CBCiAgICBzdG9yZS5jb21taXQoJ3VzZXIvc2V0VXNlcicsIHt9KTsgLy8g5b2T5YmN6Lev55Sx5Zyw5Z2ACiAgICAvLyDnu4Tku7bph4zlpLTvvJpgL3VzZXI/YT0xMGAgJHJvdXRlLnBhdGggPT09IC91c2VyICAkcm91dGUuZnVsbFBhdGggPT09IC91c2VyP2E9MTAKICAgIC8vIGpz5qih5Z2X5Lit77yacm91dGVyLmN1cnJlbnRSb3V0ZS52YWx1ZS5mdWxsUGF0aCDlsLHmmK/lvZPliY3ot6/nlLHlnLDlnYDvvIxyb3V0ZXIuY3VycmVudFJvdXRlIOaYr3JlZuWTjeW6lOW8j+aVsOaNrgoKICAgIHZhciBmdWxsUGF0aCA9IGVuY29kZVVSSUNvbXBvbmVudChyb3V0ZXIuY3VycmVudFJvdXRlLnZhbHVlLmZ1bGxQYXRoKTsgLy8gZW5jb2RlVVJJQ29tcG9uZW50IOi9rOaNonVyaee8luegge+8jOmYsuatouino+aekOWcsOWdgOWHuumXrumimAoKICAgIHJvdXRlci5wdXNoKCcvbG9naW4/cmVkaXJlY3RVcmw9JyArIGZ1bGxQYXRoKTsKICB9CgogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnIpOwp9KTsgLy8g6K+35rGC5bel5YW35Ye95pWwCgpleHBvcnQgZGVmYXVsdCAoZnVuY3Rpb24gKHVybCwgbWV0aG9kLCBzdWJtaXREYXRhKSB7CiAgLy8g6LSf6LSj5Y+R6K+35rGC77ya6K+35rGC5Zyw5Z2A77yM6K+35rGC5pa55byP77yM5o+Q5Lqk55qE5pWw5o2uCiAgcmV0dXJuIGluc3RhbmNlKF9kZWZpbmVQcm9wZXJ0eSh7CiAgICB1cmw6IHVybCwKICAgIG1ldGhvZDogbWV0aG9kCiAgfSwgbWV0aG9kLnRvTG93ZXJDYXNlKCkgPT09ICdnZXQnID8gJ3BhcmFtcycgOiAnZGF0YScsIHN1Ym1pdERhdGEpKTsKfSk7"},{"version":3,"sources":["F:/代码/Vue 代码/erabbit-client-pc-124/src/utils/request.js"],"names":["axios","store","router","baseURL","instance","create","timeout","interceptors","request","use","config","profile","state","user","token","headers","Authorization","err","Promise","reject","response","res","data","status","commit","fullPath","encodeURIComponent","currentRoute","value","push","url","method","submitData","toLowerCase"],"mappings":";;AAAA;AACA;AACA;AACA;AAEA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,MAAP,MAAmB,UAAnB,C,CAEA;;AACA,OAAO,IAAMC,OAAO,GAAG,oDAAhB;AACP,IAAMC,QAAQ,GAAGJ,KAAK,CAACK,MAAN,CAAa;AAC5B;AACAF,EAAAA,OAAO,EAAPA,OAF4B;AAG5BG,EAAAA,OAAO,EAAE;AAHmB,CAAb,CAAjB;AAMAF,QAAQ,CAACG,YAAT,CAAsBC,OAAtB,CAA8BC,GAA9B,CAAkC,UAAAC,MAAM,EAAI;AAC1C;AACA;AACA;AACA;AACA,MAAQC,OAAR,GAAoBV,KAAK,CAACW,KAAN,CAAYC,IAAhC,CAAQF,OAAR,CAL0C,CAM1C;;AACA,MAAIA,OAAO,CAACG,KAAZ,EAAmB;AACjB;AACAJ,IAAAA,MAAM,CAACK,OAAP,CAAeC,aAAf,oBAAyCL,OAAO,CAACG,KAAjD;AACD;;AACD,SAAOJ,MAAP;AACD,CAZD,EAYG,UAAAO,GAAG,EAAI;AACR,SAAOC,OAAO,CAACC,MAAR,CAAeF,GAAf,CAAP;AACD,CAdD,E,CAgBA;;AACAb,QAAQ,CAACG,YAAT,CAAsBa,QAAtB,CAA+BX,GAA/B,CAAmC,UAAAY,GAAG;AAAA,SAAIA,GAAG,CAACC,IAAR;AAAA,CAAtC,EAAoD,UAAAL,GAAG,EAAI;AACzD;AACA,MAAIA,GAAG,CAACG,QAAJ,IAAgBH,GAAG,CAACG,QAAJ,CAAaG,MAAb,KAAwB,GAA5C,EAAiD;AAC/C;AACA;AACA;AACAtB,IAAAA,KAAK,CAACuB,MAAN,CAAa,cAAb,EAA6B,EAA7B,EAJ+C,CAK/C;AACA;AACA;;AACA,QAAMC,QAAQ,GAAGC,kBAAkB,CAACxB,MAAM,CAACyB,YAAP,CAAoBC,KAApB,CAA0BH,QAA3B,CAAnC,CAR+C,CAS/C;;AACAvB,IAAAA,MAAM,CAAC2B,IAAP,CAAY,wBAAwBJ,QAApC;AACD;;AACD,SAAOP,OAAO,CAACC,MAAR,CAAeF,GAAf,CAAP;AACD,CAfD,E,CAiBA;;AACA,gBAAe,UAACa,GAAD,EAAMC,MAAN,EAAcC,UAAd,EAA6B;AAC1C;AACA,SAAO5B,QAAQ;AACb0B,IAAAA,GAAG,EAAHA,GADa;AAEbC,IAAAA,MAAM,EAANA;AAFa,KAQZA,MAAM,CAACE,WAAP,OAAyB,KAAzB,GAAiC,QAAjC,GAA4C,MARhC,EAQyCD,UARzC,EAAf;AAUD,CAZD","sourcesContent":["// 1. 创建一个新的axios实例\n// 2. 请求拦截器，如果有token进行头部携带\n// 3. 响应拦截器：1. 剥离无效数据  2. 处理token失效\n// 4. 导出一个函数，调用当前的axsio实例发请求，返回值promise\n\nimport axios from 'axios'\nimport store from '@/store'\nimport router from '@/router'\n\n// 导出基准地址，原因：其他地方不是通过axios发请求的地方用上基准地址\nexport const baseURL = 'http://pcapi-xiaotuxian-front-devtest.itheima.net/'\nconst instance = axios.create({\n  // axios 的一些配置，baseURL  timeout\n  baseURL,\n  timeout: 5000\n})\n\ninstance.interceptors.request.use(config => {\n  // 拦截业务逻辑\n  // 进行请求配置的修改\n  // 如果本地又token就在头部携带\n  // 1. 获取用户信息对象\n  const { profile } = store.state.user\n  // 2. 判断是否有token\n  if (profile.token) {\n    // 3. 设置token\n    config.headers.Authorization = `Bearer ${profile.token}`\n  }\n  return config\n}, err => {\n  return Promise.reject(err)\n})\n\n// res => res.data  取出data数据，将来调用接口的时候直接拿到的就是后台的数据\ninstance.interceptors.response.use(res => res.data, err => {\n  // 401 状态码，进入该函数\n  if (err.response && err.response.status === 401) {\n    // 1. 清空无效用户信息\n    // 2. 跳转到登录页\n    // 3. 跳转需要传参（当前路由地址）给登录页码\n    store.commit('user/setUser', {})\n    // 当前路由地址\n    // 组件里头：`/user?a=10` $route.path === /user  $route.fullPath === /user?a=10\n    // js模块中：router.currentRoute.value.fullPath 就是当前路由地址，router.currentRoute 是ref响应式数据\n    const fullPath = encodeURIComponent(router.currentRoute.value.fullPath)\n    // encodeURIComponent 转换uri编码，防止解析地址出问题\n    router.push('/login?redirectUrl=' + fullPath)\n  }\n  return Promise.reject(err)\n})\n\n// 请求工具函数\nexport default (url, method, submitData) => {\n  // 负责发请求：请求地址，请求方式，提交的数据\n  return instance({\n    url,\n    method,\n    // 1. 如果是get请求  需要使用params来传递submitData   ?a=10&c=10\n    // 2. 如果不是get请求  需要使用data来传递submitData   请求体传参\n    // [] 设置一个动态的key, 写js表达式，js表达式的执行结果当作KEY\n    // method参数：get,Get,GET  转换成小写再来判断\n    // 在对象，['params']:submitData ===== params:submitData 这样理解\n    [method.toLowerCase() === 'get' ? 'params' : 'data']: submitData\n  })\n}\n"]}]}