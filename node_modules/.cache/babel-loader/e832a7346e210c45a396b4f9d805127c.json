{"remainingRequest":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\thread-loader\\dist\\cjs.js!F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\babel-loader\\lib\\index.js!F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!F:\\代码\\Vue 代码\\erabbit-client-pc-124\\src\\views\\member\\pay\\checkout.vue?vue&type=script&lang=js","dependencies":[{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\src\\views\\member\\pay\\checkout.vue","mtime":1621243079000},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656924649801},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1656924649783},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\babel-loader\\lib\\index.js","mtime":1656924651984},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656924649801},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1656924653036}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0IENoZWNrb3V0QWRkcmVzcyBmcm9tICcuL2NvbXBvbmVudHMvY2hlY2tvdXQtYWRkcmVzcyc7CmltcG9ydCB7IGNyZWF0ZU9yZGVyLCBzdWJtaXRPcmRlciwgcmVwdXJjaGFzZU9yZGVyIH0gZnJvbSAnQC9hcGkvb3JkZXInOwppbXBvcnQgeyByZWFjdGl2ZSwgcmVmIH0gZnJvbSAndnVlJzsKaW1wb3J0IE1lc3NhZ2UgZnJvbSAnQC9jb21wb25lbnRzL2xpYnJhcnkvTWVzc2FnZSc7CmltcG9ydCB7IHVzZVJvdXRlciwgdXNlUm91dGUgfSBmcm9tICd2dWUtcm91dGVyJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdYdHhQYXlDaGVja291dFBhZ2UnLAogIGNvbXBvbmVudHM6IHsKICAgIENoZWNrb3V0QWRkcmVzczogQ2hlY2tvdXRBZGRyZXNzCiAgfSwKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAoKSB7CiAgICAvLyDnu5Pnrpflip/og70t55Sf5oiQ6K6i5Y2VLeiuouWNleS/oeaBrwogICAgdmFyIG9yZGVyID0gcmVmKG51bGwpOwogICAgdmFyIHJvdXRlID0gdXNlUm91dGUoKTsKCiAgICBpZiAocm91dGUucXVlcnkub3JkZXJJZCkgewogICAgICAvLyDmjInnhaforqLljZXkuK3llYblk4Hnu5PnrpcKICAgICAgcmVwdXJjaGFzZU9yZGVyKHJvdXRlLnF1ZXJ5Lm9yZGVySWQpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICBvcmRlci52YWx1ZSA9IGRhdGEucmVzdWx0OwogICAgICAgIHJlcVBhcmFtcy5nb29kcyA9IGRhdGEucmVzdWx0Lmdvb2RzLm1hcChmdW5jdGlvbiAoX3JlZikgewogICAgICAgICAgdmFyIHNrdUlkID0gX3JlZi5za3VJZCwKICAgICAgICAgICAgICBjb3VudCA9IF9yZWYuY291bnQ7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBza3VJZDogc2t1SWQsCiAgICAgICAgICAgIGNvdW50OiBjb3VudAogICAgICAgICAgfTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICAvLyDmjInnhafotK3nianovabllYblk4Hnu5PnrpcKICAgICAgY3JlYXRlT3JkZXIoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgb3JkZXIudmFsdWUgPSBkYXRhLnJlc3VsdDsKICAgICAgICByZXFQYXJhbXMuZ29vZHMgPSBkYXRhLnJlc3VsdC5nb29kcy5tYXAoZnVuY3Rpb24gKF9yZWYyKSB7CiAgICAgICAgICB2YXIgc2t1SWQgPSBfcmVmMi5za3VJZCwKICAgICAgICAgICAgICBjb3VudCA9IF9yZWYyLmNvdW50OwogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgc2t1SWQ6IHNrdUlkLAogICAgICAgICAgICBjb3VudDogY291bnQKICAgICAgICAgIH07CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSAvLyDmjqXmlLbmlLbotKflnLDlnYBJRAoKCiAgICB2YXIgY2hhbmdlQWRkcmVzcyA9IGZ1bmN0aW9uIGNoYW5nZUFkZHJlc3MoaWQpIHsKICAgICAgcmVxUGFyYW1zLmFkZHJlc3NJZCA9IGlkOwogICAgfTsgLy8g57uT566X5Yqf6IO9LeaPkOS6pOiuouWNlS3mj5DkuqTkv6Hmga8KCgogICAgdmFyIHJlcVBhcmFtcyA9IHJlYWN0aXZlKHsKICAgICAgZGVsaXZlcnlUaW1lVHlwZTogMSwKICAgICAgcGF5VHlwZTogMSwKICAgICAgcGF5Q2hhbm5lbDogMSwKICAgICAgYnV5ZXJNZXNzYWdlOiAnJywKICAgICAgLy8g5ZWG5ZOB5L+h5oGv77yM6I635Y+W6K6i5Y2V5L+h5oGv5ZCO6K6+572uCiAgICAgIGdvb2RzOiBbXSwKICAgICAgLy8g5pS26LSn5Zyw5Z2A77yM5YiH5o2i5pS26LSn5Zyw5Z2A5oiW6ICF57uE5Lu26buY6K6k55qE5pe25YCZ6K6+572uCiAgICAgIGFkZHJlc3NJZDogbnVsbAogICAgfSk7IC8vIOaPkOS6pOiuouWNlQoKICAgIHZhciByb3V0ZXIgPSB1c2VSb3V0ZXIoKTsKCiAgICB2YXIgc3VibWl0T3JkZXJGbiA9IGZ1bmN0aW9uIHN1Ym1pdE9yZGVyRm4oKSB7CiAgICAgIC8vIOajgOafpeaUtui0p+WcsOWdgOaYr+WQpumAieWlvQogICAgICBpZiAoIXJlcVBhcmFtcy5hZGRyZXNzSWQpIHsKICAgICAgICByZXR1cm4gTWVzc2FnZSh7CiAgICAgICAgICB0ZXh0OiAn5Lqy77yM6K+36YCJ5oup5pS26LSn5Zyw5Z2AJwogICAgICAgIH0pOwogICAgICB9CgogICAgICBzdWJtaXRPcmRlcihyZXFQYXJhbXMpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAvLyDmj5DkuqTorqLljZXmiJDlip8KICAgICAgICBNZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgIHRleHQ6ICfmj5DkuqTorqLljZXmiJDlip8nCiAgICAgICAgfSk7IC8vIOi3s+i9rOaUr+S7mOmhtemdogoKICAgICAgICByb3V0ZXIucHVzaCgiL21lbWJlci9wYXk/b3JkZXJJZD0iLmNvbmNhdChkYXRhLnJlc3VsdC5pZCkpOwogICAgICB9KTsKICAgIH07CgogICAgcmV0dXJuIHsKICAgICAgb3JkZXI6IG9yZGVyLAogICAgICBjaGFuZ2VBZGRyZXNzOiBjaGFuZ2VBZGRyZXNzLAogICAgICByZXFQYXJhbXM6IHJlcVBhcmFtcywKICAgICAgc3VibWl0T3JkZXJGbjogc3VibWl0T3JkZXJGbgogICAgfTsKICB9Cn07"},{"version":3,"sources":["F:\\代码\\Vue 代码\\erabbit-client-pc-124\\src\\views\\member\\pay\\checkout.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"xtx-pay-checkout-page\">\n    <div class=\"container\">\n      <XtxBread>\n        <XtxBreadItem to=\"/\">首页</XtxBreadItem>\n        <XtxBreadItem to=\"/cart\">购物车</XtxBreadItem>\n        <XtxBreadItem >填写订单</XtxBreadItem>\n      </XtxBread>\n      <div class=\"wrapper\" v-if=\"order\">\n        <!-- 收货地址 -->\n        <h3 class=\"box-title\">收货地址</h3>\n        <div class=\"box-body\">\n          <!-- 收货地址组件 -->\n          <CheckoutAddress @change=\"changeAddress\" :list=\"order.userAddresses\" />\n        </div>\n        <!-- 商品信息 -->\n        <h3 class=\"box-title\">商品信息</h3>\n        <div class=\"box-body\">\n          <table class=\"goods\">\n            <thead>\n              <tr>\n                <th width=\"520\">商品信息</th>\n                <th width=\"170\">单价</th>\n                <th width=\"170\">数量</th>\n                <th width=\"170\">小计</th>\n                <th width=\"170\">实付</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr v-for=\"item in order.goods\" :key=\"item.skuId\">\n                <td>\n                  <a href=\"javascript:;\" class=\"info\">\n                    <img :src=\"item.picture\" alt=\"\">\n                    <div class=\"right\">\n                      <p>{{item.name}}</p>\n                      <p>{{item.attrsText}}</p>\n                    </div>\n                  </a>\n                </td>\n                <td>&yen;{{item.price}}</td>\n                <td>{{item.count}}</td>\n                <td>&yen;{{item.totalPrice}}</td>\n                <td>&yen;{{item.totalPayPrice}}</td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n        <!-- 配送时间 -->\n        <h3 class=\"box-title\">配送时间</h3>\n        <div class=\"box-body\">\n          <a class=\"my-btn active\" href=\"javascript:;\">不限送货时间：周一至周日</a>\n          <a class=\"my-btn\" href=\"javascript:;\">工作日送货：周一至周五</a>\n          <a class=\"my-btn\" href=\"javascript:;\">双休日、假日送货：周六至周日</a>\n        </div>\n        <!-- 支付方式 -->\n         <h3 class=\"box-title\">支付方式</h3>\n        <div class=\"box-body\">\n          <a class=\"my-btn active\" href=\"javascript:;\">在线支付</a>\n          <a class=\"my-btn\" href=\"javascript:;\">货到付款</a>\n          <span style=\"color:#999\">货到付款需付5元手续费</span>\n        </div>\n        <!-- 金额明细 -->\n        <h3 class=\"box-title\">金额明细</h3>\n        <div class=\"box-body\">\n          <div class=\"total\">\n            <dl><dt>商品件数：</dt><dd>{{order.summary.goodsCount}}件</dd></dl>\n            <dl><dt>商品总价：</dt><dd>¥{{order.summary.totalPrice}}</dd></dl>\n            <dl><dt>运<i></i>费：</dt><dd>¥{{order.summary.postFee}}</dd></dl>\n            <dl><dt>应付总额：</dt><dd class=\"price\">¥{{order.summary.totalPayPrice}}</dd></dl>\n          </div>\n        </div>\n        <!-- 提交订单 -->\n        <div class=\"submit\">\n          <XtxButton @click=\"submitOrderFn\" type=\"primary\">提交订单</XtxButton>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport CheckoutAddress from './components/checkout-address'\nimport { createOrder, submitOrder, repurchaseOrder } from '@/api/order'\nimport { reactive, ref } from 'vue'\nimport Message from '@/components/library/Message'\nimport { useRouter, useRoute } from 'vue-router'\nexport default {\n  name: 'XtxPayCheckoutPage',\n  components: { CheckoutAddress },\n  setup () {\n    // 结算功能-生成订单-订单信息\n    const order = ref(null)\n    const route = useRoute()\n    if (route.query.orderId) {\n      // 按照订单中商品结算\n      repurchaseOrder(route.query.orderId).then(data => {\n        order.value = data.result\n        reqParams.goods = data.result.goods.map(({ skuId, count }) => ({ skuId, count }))\n      })\n    } else {\n      // 按照购物车商品结算\n      createOrder().then(data => {\n        order.value = data.result\n        reqParams.goods = data.result.goods.map(({ skuId, count }) => ({ skuId, count }))\n      })\n    }\n\n    // 接收收货地址ID\n    const changeAddress = (id) => {\n      reqParams.addressId = id\n    }\n\n    // 结算功能-提交订单-提交信息\n    const reqParams = reactive({\n      deliveryTimeType: 1,\n      payType: 1,\n      payChannel: 1,\n      buyerMessage: '',\n      // 商品信息，获取订单信息后设置\n      goods: [],\n      // 收货地址，切换收货地址或者组件默认的时候设置\n      addressId: null\n    })\n\n    // 提交订单\n    const router = useRouter()\n    const submitOrderFn = () => {\n      // 检查收货地址是否选好\n      if (!reqParams.addressId) {\n        return Message({ text: '亲，请选择收货地址' })\n      }\n      submitOrder(reqParams).then(data => {\n        // 提交订单成功\n        Message({ type: 'success', text: '提交订单成功' })\n        // 跳转支付页面\n        router.push(`/member/pay?orderId=${data.result.id}`)\n      })\n    }\n\n    return { order, changeAddress, reqParams, submitOrderFn }\n  }\n}\n</script>\n<style scoped lang=\"less\">\n.xtx-pay-checkout-page {\n  .wrapper {\n    background: #fff;\n    padding: 0 20px;\n    .box-title {\n      font-size: 16px;\n      font-weight: normal;\n      padding-left: 10px;\n      line-height: 70px;\n      border-bottom: 1px solid #f5f5f5;\n    }\n    .box-body {\n      padding: 20px 0;\n    }\n  }\n}\n.goods {\n  width: 100%;\n  border-collapse: collapse;\n  border-spacing: 0;\n  .info {\n    display: flex;\n    text-align: left;\n    img {\n      width: 70px;\n      height: 70px;\n      margin-right: 20px;\n    }\n    .right {\n      line-height: 24px;\n      p {\n        &:last-child {\n          color: #999;\n        }\n      }\n    }\n  }\n  tr {\n    th {\n      background: #f5f5f5;\n      font-weight: normal;\n    }\n    td,th {\n      text-align: center;\n      padding: 20px;\n      border-bottom: 1px solid #f5f5f5;\n      &:first-child {\n        border-left: 1px solid #f5f5f5;\n      }\n      &:last-child {\n        border-right: 1px solid #f5f5f5;\n      }\n    }\n  }\n}\n.my-btn {\n  width: 228px;\n  height: 50px;\n  border: 1px solid #e4e4e4;\n  text-align: center;\n  line-height: 48px;\n  margin-right: 25px;\n  color: #666666;\n  display: inline-block;\n  &.active,&:hover {\n    border-color: @xtxColor;\n  }\n}\n.total {\n  dl {\n    display: flex;\n    justify-content: flex-end;\n    line-height: 50px;\n    dt {\n      i {\n        display: inline-block;\n        width: 2em;\n      }\n    }\n    dd {\n      width: 240px;\n      text-align: right;\n      padding-right: 70px;\n      &.price {\n        font-size: 20px;\n        color: @priceColor;\n      }\n    }\n  }\n}\n.submit {\n  text-align: right;\n  padding: 60px;\n  border-top: 1px solid #f5f5f5;\n}\n</style>\n"],"sourceRoot":""}]}