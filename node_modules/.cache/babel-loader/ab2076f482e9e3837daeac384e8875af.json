{"remainingRequest":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\thread-loader\\dist\\cjs.js!F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\babel-loader\\lib\\index.js!F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!F:\\代码\\Vue 代码\\erabbit-client-pc-124\\src\\views\\member\\order\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\src\\views\\member\\order\\index.vue","mtime":1621243079000},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656924649801},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1656924649783},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\babel-loader\\lib\\index.js","mtime":1656924651984},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656924649801},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1656924653036}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRjovXHU0RUUzXHU3ODAxL1Z1ZSBcdTRFRTNcdTc4MDEvZXJhYmJpdC1jbGllbnQtcGMtMTI0L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0IHsgcmVhY3RpdmUsIHJlZiwgd2F0Y2ggfSBmcm9tICd2dWUnOwppbXBvcnQgeyBvcmRlclN0YXR1cyB9IGZyb20gJ0AvYXBpL2NvbnN0YW50cyc7CmltcG9ydCBPcmRlckl0ZW0gZnJvbSAnLi9jb21wb25lbnRzL29yZGVyLWl0ZW0nOwppbXBvcnQgT3JkZXJDYW5jZWwgZnJvbSAnLi9jb21wb25lbnRzL29yZGVyLWNhbmNlbCc7CmltcG9ydCBPcmRlckxvZ2lzdGljcyBmcm9tICcuL2NvbXBvbmVudHMvb3JkZXItbG9naXN0aWNzJzsKaW1wb3J0IHsgY29uZmlybU9yZGVyLCBkZWxldGVPcmRlciwgZmluZE9yZGVyTGlzdCB9IGZyb20gJ0AvYXBpL29yZGVyJzsKaW1wb3J0IENvbmZpcm0gZnJvbSAnQC9jb21wb25lbnRzL2xpYnJhcnkvQ29uZmlybSc7CmltcG9ydCBNZXNzYWdlIGZyb20gJ0AvY29tcG9uZW50cy9saWJyYXJ5L01lc3NhZ2UnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ01lbWJlck9yZGVyJywKICBjb21wb25lbnRzOiB7CiAgICBPcmRlckl0ZW06IE9yZGVySXRlbSwKICAgIE9yZGVyQ2FuY2VsOiBPcmRlckNhbmNlbCwKICAgIE9yZGVyTG9naXN0aWNzOiBPcmRlckxvZ2lzdGljcwogIH0sCiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKCkgewogICAgdmFyIGFjdGl2ZU5hbWUgPSByZWYoJ2FsbCcpOyAvLyDnrZvpgInmnaHku7YKCiAgICB2YXIgcmVxUGFyYW1zID0gcmVhY3RpdmUoewogICAgICBwYWdlOiAxLAogICAgICBwYWdlU2l6ZTogNSwKICAgICAgb3JkZXJTdGF0ZTogMAogICAgfSk7CiAgICB2YXIgb3JkZXJMaXN0ID0gcmVmKFtdKTsKICAgIHZhciBsb2FkaW5nID0gcmVmKGZhbHNlKTsKICAgIHZhciB0b3RhbCA9IHJlZigwKTsKCiAgICB2YXIgZ2V0T3JkZXJMaXN0ID0gZnVuY3Rpb24gZ2V0T3JkZXJMaXN0KCkgewogICAgICBsb2FkaW5nLnZhbHVlID0gdHJ1ZTsKICAgICAgZmluZE9yZGVyTGlzdChyZXFQYXJhbXMpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICBvcmRlckxpc3QudmFsdWUgPSBkYXRhLnJlc3VsdC5pdGVtczsKICAgICAgICB0b3RhbC52YWx1ZSA9IGRhdGEucmVzdWx0LmNvdW50czsKICAgICAgICBsb2FkaW5nLnZhbHVlID0gZmFsc2U7CiAgICAgIH0pOwogICAgfTsgLy8g562b6YCJ5p2h5Lu25Y+Y5YyW6YeN5paw5Yqg6L29CgoKICAgIHdhdGNoKHJlcVBhcmFtcywgZnVuY3Rpb24gKCkgewogICAgICBnZXRPcmRlckxpc3QoKTsKICAgIH0sIHsKICAgICAgaW1tZWRpYXRlOiB0cnVlCiAgICB9KTsgLy8g54K55Ye76YCJ6aG55Y2hCgogICAgdmFyIHRhYkNsaWNrID0gZnVuY3Rpb24gdGFiQ2xpY2soX3JlZikgewogICAgICB2YXIgaW5kZXggPSBfcmVmLmluZGV4OwogICAgICByZXFQYXJhbXMucGFnZSA9IDE7CiAgICAgIHJlcVBhcmFtcy5vcmRlclN0YXRlID0gaW5kZXg7CiAgICB9OyAvLyDliKDpmaTorqLljZUKCgogICAgdmFyIGhhbmRsZXJEZWxldGUgPSBmdW5jdGlvbiBoYW5kbGVyRGVsZXRlKG9yZGVyKSB7CiAgICAgIENvbmZpcm0oewogICAgICAgIHRleHQ6ICfkurLvvIzmgqjnoa7orqTliKDpmaTor6XorqLljZXlkJfvvJ8nCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIGRlbGV0ZU9yZGVyKG9yZGVyLmlkKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIE1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgIHRleHQ6ICfliKDpmaTmiJDlip8nCiAgICAgICAgICB9KTsKICAgICAgICAgIGdldE9yZGVyTGlzdCgpOwogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7fSk7CiAgICB9OwoKICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7CiAgICAgIGFjdGl2ZU5hbWU6IGFjdGl2ZU5hbWUsCiAgICAgIG9yZGVyU3RhdHVzOiBvcmRlclN0YXR1cywKICAgICAgb3JkZXJMaXN0OiBvcmRlckxpc3QsCiAgICAgIHRhYkNsaWNrOiB0YWJDbGljaywKICAgICAgbG9hZGluZzogbG9hZGluZywKICAgICAgdG90YWw6IHRvdGFsLAogICAgICByZXFQYXJhbXM6IHJlcVBhcmFtcywKICAgICAgaGFuZGxlckRlbGV0ZTogaGFuZGxlckRlbGV0ZQogICAgfSwgdXNlQ2FuY2VsKCkpLCB1c2VDb25maXJtKCkpLCB1c2VMb2dpc3RpY3MoKSk7CiAgfQp9OyAvLyDlj5bmtojorqLljZXpgLvovpEKCmV4cG9ydCB2YXIgdXNlQ2FuY2VsID0gZnVuY3Rpb24gdXNlQ2FuY2VsKCkgewogIC8vIOe7hOS7tuWunuS+iwogIHZhciBvcmRlckNhbmNlbENvbSA9IHJlZihudWxsKTsgLy8g54K55Ye75Y+W5raICgogIHZhciBoYW5kbGVyQ2FuY2VsID0gZnVuY3Rpb24gaGFuZGxlckNhbmNlbChvcmRlcikgewogICAgb3JkZXJDYW5jZWxDb20udmFsdWUub3BlbihvcmRlcik7CiAgfTsKCiAgcmV0dXJuIHsKICAgIGhhbmRsZXJDYW5jZWw6IGhhbmRsZXJDYW5jZWwsCiAgICBvcmRlckNhbmNlbENvbTogb3JkZXJDYW5jZWxDb20KICB9Owp9OyAvLyDnoa7orqTmlLbotKfpgLvovpEKCmV4cG9ydCB2YXIgdXNlQ29uZmlybSA9IGZ1bmN0aW9uIHVzZUNvbmZpcm0oKSB7CiAgdmFyIGhhbmRsZXJDb25maXJtID0gZnVuY3Rpb24gaGFuZGxlckNvbmZpcm0ob3JkZXIpIHsKICAgIENvbmZpcm0oewogICAgICB0ZXh0OiAn5Lqy77yM5oKo56Gu6K6k5pS26LSn5ZCX77yf56Gu6K6k5ZCO6LSn5qy+5bCG5omT57uZ5Y2W5a6244CCJwogICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgIGNvbmZpcm1PcmRlcihvcmRlci5pZCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgTWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICB0ZXh0OiAn56Gu6K6k5pS26LSn5oiQ5YqfJwogICAgICAgIH0pOyAvLyDlvoXmlLbotKctLS0+5b6F6K+E5Lu3CgogICAgICAgIG9yZGVyLm9yZGVyU3RhdGUgPSA0OwogICAgICB9KTsKICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHt9KTsKICB9OwoKICByZXR1cm4gewogICAgaGFuZGxlckNvbmZpcm06IGhhbmRsZXJDb25maXJtCiAgfTsKfTsgLy8g5p+l55yL54mp5rWB6YC76L6RCgpleHBvcnQgdmFyIHVzZUxvZ2lzdGljcyA9IGZ1bmN0aW9uIHVzZUxvZ2lzdGljcygpIHsKICB2YXIgb3JkZXJMb2dpc3RpY3NDb20gPSByZWYobnVsbCk7CgogIHZhciBoYW5kbGVyTG9naXN0aWNzID0gZnVuY3Rpb24gaGFuZGxlckxvZ2lzdGljcyhvcmRlcikgewogICAgb3JkZXJMb2dpc3RpY3NDb20udmFsdWUub3BlbihvcmRlcik7CiAgfTsKCiAgcmV0dXJuIHsKICAgIGhhbmRsZXJMb2dpc3RpY3M6IGhhbmRsZXJMb2dpc3RpY3MsCiAgICBvcmRlckxvZ2lzdGljc0NvbTogb3JkZXJMb2dpc3RpY3NDb20KICB9Owp9Ow=="},{"version":3,"sources":["F:\\代码\\Vue 代码\\erabbit-client-pc-124\\src\\views\\member\\order\\index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"member-order\">\n    <!-- tab组件 -->\n    <XtxTabs v-model=\"activeName\" @tab-click=\"tabClick\">\n      <XtxTabsPanel\n        v-for=\"item in orderStatus\"\n        :key=\"item.name\"\n        :label=\"item.label\"\n        :name=\"item.name\"\n      >\n      </XtxTabsPanel>\n    </XtxTabs>\n    <!-- 订单列表 -->\n    <div class=\"order-list\">\n      <div v-if=\"loading\" class=\"loading\"></div>\n      <div class=\"none\" v-if=\"!loading && orderList.length === 0\">暂无数据</div>\n      <OrderItem\n        @on-cancel=\"handlerCancel\"\n        @on-delete=\"handlerDelete\"\n        @on-confirm=\"handlerConfirm\"\n        @on-logistics=\"handlerLogistics\"\n        v-for=\"item in orderList\"\n        :key=\"item.id\"\n        :order=\"item\"\n      />\n    </div>\n    <!-- 分页组件 -->\n    <XtxPagination\n      v-if=\"total>0\"\n      :current-page=\"reqParams.page\"\n      :page-size=\"reqParams.pageSize\"\n      :total=\"total\"\n      @current-change=\"reqParams.page=$event\"\n    />\n    <!-- 取消原因组件 -->\n    <OrderCancel ref=\"orderCancelCom\" />\n    <!-- 查看物流组件 -->\n    <OrderLogistics ref=\"orderLogisticsCom\" />\n  </div>\n</template>\n<script>\nimport { reactive, ref, watch } from 'vue'\nimport { orderStatus } from '@/api/constants'\nimport OrderItem from './components/order-item'\nimport OrderCancel from './components/order-cancel'\nimport OrderLogistics from './components/order-logistics'\nimport { confirmOrder, deleteOrder, findOrderList } from '@/api/order'\nimport Confirm from '@/components/library/Confirm'\nimport Message from '@/components/library/Message'\nexport default {\n  name: 'MemberOrder',\n  components: {\n    OrderItem,\n    OrderCancel,\n    OrderLogistics\n  },\n  setup () {\n    const activeName = ref('all')\n\n    // 筛选条件\n    const reqParams = reactive({\n      page: 1,\n      pageSize: 5,\n      orderState: 0\n    })\n    const orderList = ref([])\n    const loading = ref(false)\n    const total = ref(0)\n\n    const getOrderList = () => {\n      loading.value = true\n      findOrderList(reqParams).then(data => {\n        orderList.value = data.result.items\n        total.value = data.result.counts\n        loading.value = false\n      })\n    }\n    // 筛选条件变化重新加载\n    watch(reqParams, () => {\n      getOrderList()\n    }, { immediate: true })\n\n    // 点击选项卡\n    const tabClick = ({ index }) => {\n      reqParams.page = 1\n      reqParams.orderState = index\n    }\n\n    // 删除订单\n    const handlerDelete = (order) => {\n      Confirm({ text: '亲，您确认删除该订单吗？' }).then(() => {\n        deleteOrder(order.id).then(() => {\n          Message({ type: 'success', text: '删除成功' })\n          getOrderList()\n        })\n      }).catch(() => {})\n    }\n\n    return {\n      activeName,\n      orderStatus,\n      orderList,\n      tabClick,\n      loading,\n      total,\n      reqParams,\n      handlerDelete,\n      ...useCancel(),\n      ...useConfirm(),\n      ...useLogistics()\n    }\n  }\n}\n// 取消订单逻辑\nexport const useCancel = () => {\n  // 组件实例\n  const orderCancelCom = ref(null)\n  // 点击取消\n  const handlerCancel = (order) => {\n    orderCancelCom.value.open(order)\n  }\n  return { handlerCancel, orderCancelCom }\n}\n// 确认收货逻辑\nexport const useConfirm = () => {\n  const handlerConfirm = (order) => {\n    Confirm({ text: '亲，您确认收货吗？确认后货款将打给卖家。' }).then(() => {\n      confirmOrder(order.id).then(() => {\n        Message({ type: 'success', text: '确认收货成功' })\n        // 待收货--->待评价\n        order.orderState = 4\n      })\n    }).catch(() => {})\n  }\n  return { handlerConfirm }\n}\n// 查看物流逻辑\nexport const useLogistics = () => {\n  const orderLogisticsCom = ref(null)\n  const handlerLogistics = (order) => {\n    orderLogisticsCom.value.open(order)\n  }\n  return { handlerLogistics, orderLogisticsCom }\n}\n\n</script>\n<style scoped lang=\"less\">\n.member-order {\n  height: 100%;\n  background: #fff;\n}\n.order-list {\n  background: #fff;\n  padding: 20px;\n  position: relative;\n  min-height: 400px;\n}\n.loading {\n  height: 100%;\n  width: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  background: rgba(255,255,255,.9) url(../../../assets/images/loading.gif) no-repeat center;\n}\n.none {\n  height: 400px;\n  text-align: center;\n  line-height: 400px;\n  color: #999;\n}\n</style>\n"],"sourceRoot":""}]}