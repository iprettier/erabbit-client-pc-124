{"remainingRequest":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\babel-loader\\lib\\index.js!E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\src\\views\\member\\pay\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\src\\views\\member\\pay\\index.vue","mtime":1621243079000},{"path":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656924649801},{"path":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\babel-loader\\lib\\index.js","mtime":1656924651984},{"path":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656924649801},{"path":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1656924653036}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0IHsgdXNlUm91dGUgfSBmcm9tICd2dWUtcm91dGVyJzsKaW1wb3J0IHsgZmluZE9yZGVyRGV0YWlsIH0gZnJvbSAnQC9hcGkvb3JkZXInOwppbXBvcnQgeyByZWYgfSBmcm9tICd2dWUnOwppbXBvcnQgeyB1c2VQYXlUaW1lIH0gZnJvbSAnQC9ob29rcyc7CmltcG9ydCB7IGJhc2VVUkwgfSBmcm9tICdAL3V0aWxzL3JlcXVlc3QnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1h0eFBheVBhZ2UnLAogIHNldHVwOiBmdW5jdGlvbiBzZXR1cCgpIHsKICAgIC8vIOagueaNruWcsOWdgOagj0lE5Y+R6K+35rGC6I635Y+W6K6i5Y2V5pWw5o2uCiAgICB2YXIgcm91dGUgPSB1c2VSb3V0ZSgpOwogICAgdmFyIG9yZGVyID0gcmVmKG51bGwpOwogICAgZmluZE9yZGVyRGV0YWlsKHJvdXRlLnF1ZXJ5Lm9yZGVySWQpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgb3JkZXIudmFsdWUgPSBkYXRhLnJlc3VsdDsgLy8g5ZCO56uv5o+Q5L6bIGNvdW50ZG93biDlgJLorqHml7bnp5LmlbAKCiAgICAgIGlmIChkYXRhLnJlc3VsdC5jb3VudGRvd24gPiAtMSkgewogICAgICAgIHN0YXJ0KGRhdGEucmVzdWx0LmNvdW50ZG93bik7CiAgICAgIH0KICAgIH0pOyAvLyDlgJLorqHml7blt6Xlhbflh73mlbAKCiAgICB2YXIgX3VzZVBheVRpbWUgPSB1c2VQYXlUaW1lKCksCiAgICAgICAgc3RhcnQgPSBfdXNlUGF5VGltZS5zdGFydCwKICAgICAgICB0aW1lVGV4dCA9IF91c2VQYXlUaW1lLnRpbWVUZXh0OyAvLyDmlK/ku5jlnLDlnYAKICAgIC8vIGNvbnN0IHBheVVybCA9ICflkI7lj7DmnI3liqHln7rlh4blnLDlnYAr5pSv5LuY6aG16Z2i5Zyw5Z2AK+iuouWNlUlEK+Wbnui3s+WcsOWdgCcKCgogICAgdmFyIHJlZGlyZWN0ID0gZW5jb2RlVVJJQ29tcG9uZW50KCdodHRwOi8vd3d3LmNvcmhvLmNvbTo4MDgwLyMvcGF5L2NhbGxiYWNrJyk7CiAgICB2YXIgcGF5VXJsID0gIiIuY29uY2F0KGJhc2VVUkwsICJwYXkvYWxpUGF5P29yZGVySWQ9IikuY29uY2F0KHJvdXRlLnF1ZXJ5Lm9yZGVySWQsICImcmVkaXJlY3Q9IikuY29uY2F0KHJlZGlyZWN0KTsKICAgIHZhciB2aXNpYmxlRGlhbG9nID0gcmVmKGZhbHNlKTsKICAgIHJldHVybiB7CiAgICAgIG9yZGVyOiBvcmRlciwKICAgICAgdGltZVRleHQ6IHRpbWVUZXh0LAogICAgICBwYXlVcmw6IHBheVVybCwKICAgICAgdmlzaWJsZURpYWxvZzogdmlzaWJsZURpYWxvZwogICAgfTsKICB9Cn07"},{"version":3,"sources":["E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\src\\views\\member\\pay\\index.vue"],"names":[],"mappings":";AAsDA,SAAS,QAAT,QAAyB,YAAzB;AACA,SAAS,eAAT,QAAgC,aAAhC;AACA,SAAS,GAAT,QAAoB,KAApB;AACA,SAAS,UAAT,QAA2B,SAA3B;AACA,SAAS,OAAT,QAAwB,iBAAxB;AAEA,eAAe;AACb,EAAA,IAAI,EAAE,YADO;AAEb,EAAA,KAFa,mBAEJ;AACP;AACA,QAAM,KAAI,GAAI,QAAQ,EAAtB;AACA,QAAM,KAAI,GAAI,GAAG,CAAC,IAAD,CAAjB;AACA,IAAA,eAAe,CAAC,KAAK,CAAC,KAAN,CAAY,OAAb,CAAf,CAAqC,IAArC,CAA0C,UAAA,IAAG,EAAK;AAChD,MAAA,KAAK,CAAC,KAAN,GAAc,IAAI,CAAC,MAAnB,CADgD,CAEhD;;AACA,UAAI,IAAI,CAAC,MAAL,CAAY,SAAZ,GAAwB,CAAC,CAA7B,EAAgC;AAC9B,QAAA,KAAK,CAAC,IAAI,CAAC,MAAL,CAAY,SAAb,CAAL;AACF;AACD,KAND,EAJO,CAYP;;AACA,sBAA4B,UAAU,EAAtC;AAAA,QAAQ,KAAR,eAAQ,KAAR;AAAA,QAAe,QAAf,eAAe,QAAf,CAbO,CAeP;AACA;;;AACA,QAAM,QAAO,GAAI,kBAAkB,CAAC,0CAAD,CAAnC;AACA,QAAM,MAAK,aAAO,OAAP,gCAAoC,KAAK,CAAC,KAAN,CAAY,OAAhD,uBAAoE,QAApE,CAAX;AAEA,QAAM,aAAY,GAAI,GAAG,CAAC,KAAD,CAAzB;AAEA,WAAO;AACL,MAAA,KAAK,EAAL,KADK;AAEL,MAAA,QAAQ,EAAR,QAFK;AAGL,MAAA,MAAM,EAAN,MAHK;AAIL,MAAA,aAAY,EAAZ;AAJK,KAAP;AAMF;AA9Ba,CAAf","sourcesContent":["<template>\n  <div class=\"xtx-pay-page\">\n    <div class=\"container\">\n      <XtxBread>\n        <XtxBreadItem to=\"/\">首页</XtxBreadItem>\n        <XtxBreadItem to=\"/cart\">购物车</XtxBreadItem>\n        <XtxBreadItem>支付订单</XtxBreadItem>\n      </XtxBread>\n      <!-- 付款信息 -->\n      <div class=\"pay-info\" v-if=\"order\">\n        <span class=\"icon iconfont icon-queren2\"></span>\n        <div class=\"tip\">\n          <p>订单提交成功！请尽快完成支付。</p>\n          <p v-if=\"order.countdown > -1\">支付还剩 <span>{{timeText}}</span>, 超时后将取消订单</p>\n          <p v-else>订单已经超时</p>\n        </div>\n        <div class=\"amount\">\n          <span>应付总额：</span>\n          <span>¥{{order.payMoney}}</span>\n        </div>\n      </div>\n      <!-- 付款方式 -->\n      <div class=\"pay-type\">\n        <p class=\"head\">选择以下支付方式付款</p>\n        <div class=\"item\">\n          <p>支付平台</p>\n          <a class=\"btn wx\" href=\"javascript:;\"></a>\n          <a class=\"btn alipay\" @click=\"visibleDialog=true\" :href=\"payUrl\" target=\"_blank\"></a>\n        </div>\n        <div class=\"item\">\n          <p>支付方式</p>\n          <a class=\"btn\" href=\"javascript:;\">招商银行</a>\n          <a class=\"btn\" href=\"javascript:;\">工商银行</a>\n          <a class=\"btn\" href=\"javascript:;\">建设银行</a>\n          <a class=\"btn\" href=\"javascript:;\">农业银行</a>\n          <a class=\"btn\" href=\"javascript:;\">交通银行</a>\n        </div>\n      </div>\n    </div>\n    <!-- 支付提示对话框 -->\n    <XtxDialog title=\"正在支付...\" v-model:visible=\"visibleDialog\">\n      <div class=\"pay-wait\">\n        <img src=\"@/assets/images/load.gif\" alt=\"\">\n        <div v-if=\"order\">\n            <p>如果支付成功：</p>\n            <RouterLink :to=\"`/member/order/${$route.query.orderId}`\">查看订单详情></RouterLink>\n            <p>如果支付失败：</p>\n            <RouterLink to=\"/\">查看相关疑问></RouterLink>\n        </div>\n      </div>\n    </XtxDialog>\n  </div>\n</template>\n<script>\nimport { useRoute } from 'vue-router'\nimport { findOrderDetail } from '@/api/order'\nimport { ref } from 'vue'\nimport { usePayTime } from '@/hooks'\nimport { baseURL } from '@/utils/request'\n\nexport default {\n  name: 'XtxPayPage',\n  setup () {\n    // 根据地址栏ID发请求获取订单数据\n    const route = useRoute()\n    const order = ref(null)\n    findOrderDetail(route.query.orderId).then(data => {\n      order.value = data.result\n      // 后端提供 countdown 倒计时秒数\n      if (data.result.countdown > -1) {\n        start(data.result.countdown)\n      }\n    })\n\n    // 倒计时工具函数\n    const { start, timeText } = usePayTime()\n\n    // 支付地址\n    // const payUrl = '后台服务基准地址+支付页面地址+订单ID+回跳地址'\n    const redirect = encodeURIComponent('http://www.corho.com:8080/#/pay/callback')\n    const payUrl = `${baseURL}pay/aliPay?orderId=${route.query.orderId}&redirect=${redirect}`\n\n    const visibleDialog = ref(false)\n\n    return {\n      order,\n      timeText,\n      payUrl,\n      visibleDialog\n    }\n  }\n}\n</script>\n<style scoped lang=\"less\">\n.pay-wait {\n  display: flex;\n  justify-content: space-around;\n  p {\n    margin-top: 30px;\n    font-size: 14px;\n  }\n  a {\n    color: @xtxColor;\n  }\n}\n.pay-info {\n  background: #fff;\n  display: flex;\n  align-items: center;\n  height: 240px;\n  padding: 0 80px;\n  .icon {\n    font-size: 80px;\n    color: #1dc779;\n  }\n  .tip {\n    padding-left: 10px;\n    flex: 1;\n    p {\n      &:first-child {\n        font-size: 20px;\n        margin-bottom: 5px;\n      }\n      &:last-child {\n        color: #999;\n        font-size: 16px;\n      }\n    }\n  }\n  .amount {\n    span {\n      &:first-child {\n        font-size: 16px;\n        color: #999;\n      }\n      &:last-child {\n        color: @priceColor;\n        font-size: 20px;\n      }\n    }\n  }\n}\n.pay-type {\n  margin-top: 20px;\n  background-color: #fff;\n  padding-bottom: 70px;\n  p {\n    line-height: 70px;\n    height: 70px;\n    padding-left: 30px;\n    font-size: 16px;\n    &.head {\n      border-bottom: 1px solid #f5f5f5;\n    }\n  }\n  .btn {\n    width: 150px;\n    height: 50px;\n    border: 1px solid #e4e4e4;\n    text-align: center;\n    line-height: 48px;\n    margin-left: 30px;\n    color: #666666;\n    display: inline-block;\n    &.active,\n    &:hover {\n      border-color: @xtxColor;\n    }\n    &.alipay {\n      background: url(https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/7b6b02396368c9314528c0bbd85a2e06.png) no-repeat center / contain;\n    }\n    &.wx {\n      background: url(https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/c66f98cff8649bd5ba722c2e8067c6ca.jpg) no-repeat center / contain;\n    }\n  }\n}\n</style>\n"],"sourceRoot":""}]}