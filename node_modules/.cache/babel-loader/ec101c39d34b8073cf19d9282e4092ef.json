{"remainingRequest":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\thread-loader\\dist\\cjs.js!F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\babel-loader\\lib\\index.js!F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!F:\\代码\\Vue 代码\\erabbit-client-pc-124\\src\\views\\goods\\components\\goods-image.vue?vue&type=script&lang=js","dependencies":[{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\src\\views\\goods\\components\\goods-image.vue","mtime":1621243079000},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656924649801},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1656924649783},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\babel-loader\\lib\\index.js","mtime":1656924651984},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656924649801},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1656924653036}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgcmVhY3RpdmUsIHJlZiwgd2F0Y2ggfSBmcm9tICd2dWUnOwppbXBvcnQgeyB1c2VNb3VzZUluRWxlbWVudCB9IGZyb20gJ0B2dWV1c2UvY29yZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnR29vZHNJbWFnZScsCiAgcHJvcHM6IHsKICAgIGltYWdlczogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICB9CiAgfSwKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAocHJvcHMpIHsKICAgIC8vIOW9k+WJjemihOiniOWbvueahOe0ouW8lQogICAgdmFyIGN1cnJJbmRleCA9IHJlZigwKTsgLy8gMS4g5piv5ZCm5pi+56S66YGu572p5ZKM5aSn5Zu+CgogICAgdmFyIHNob3cgPSByZWYoZmFsc2UpOyAvLyAyLiDpga7nvannmoTlnZDmoIco5qC35byPKQoKICAgIHZhciBsYXllclBvc2l0aW9uID0gcmVhY3RpdmUoewogICAgICBsZWZ0OiAwLAogICAgICB0b3A6IDAKICAgIH0pOyAvLyAzLiDlpKflm77og4zmma/lrprkvY0o5qC35byPKQoKICAgIHZhciBsYXJnZVBvc2l0aW9uID0gcmVhY3RpdmUoewogICAgICBiYWNrZ3JvdW5kUG9zaXRpb25YOiAwLAogICAgICBiYWNrZ3JvdW5kUG9zaXRpb25ZOiAwCiAgICB9KTsgLy8gNC4g5L2/55SodXNlTW91c2VJbkVsZW1lbnTlvpfliLDln7rkuo7lhYPntKDlt6bkuIrop5LnmoTlnZDmoIflkozmmK/lkKbnprvlvIDlhYPntKDmlbDmja4KCiAgICB2YXIgdGFyZ2V0ID0gcmVmKG51bGwpOwoKICAgIHZhciBfdXNlTW91c2VJbkVsZW1lbnQgPSB1c2VNb3VzZUluRWxlbWVudCh0YXJnZXQpLAogICAgICAgIGVsZW1lbnRYID0gX3VzZU1vdXNlSW5FbGVtZW50LmVsZW1lbnRYLAogICAgICAgIGVsZW1lbnRZID0gX3VzZU1vdXNlSW5FbGVtZW50LmVsZW1lbnRZLAogICAgICAgIGlzT3V0c2lkZSA9IF91c2VNb3VzZUluRWxlbWVudC5pc091dHNpZGU7CgogICAgd2F0Y2goW2VsZW1lbnRYLCBlbGVtZW50WSwgaXNPdXRzaWRlXSwgZnVuY3Rpb24gKCkgewogICAgICAvLyA1LiDmoLnmja7lvpfliLDmlbDmja7orr7nva7moLflvI/mlbDmja7lkozmmK/lkKbmmL7npLrmlbDmja4KICAgICAgc2hvdy52YWx1ZSA9ICFpc091dHNpZGUudmFsdWU7IC8vIOiuoeeul+WdkOaghwoKICAgICAgdmFyIHBvc2l0aW9uID0gewogICAgICAgIHg6IDAsCiAgICAgICAgeTogMAogICAgICB9OwogICAgICBpZiAoZWxlbWVudFgudmFsdWUgPCAxMDApIHBvc2l0aW9uLnggPSAwO2Vsc2UgaWYgKGVsZW1lbnRYLnZhbHVlID4gMzAwKSBwb3NpdGlvbi54ID0gMjAwO2Vsc2UgcG9zaXRpb24ueCA9IGVsZW1lbnRYLnZhbHVlIC0gMTAwOwogICAgICBpZiAoZWxlbWVudFkudmFsdWUgPCAxMDApIHBvc2l0aW9uLnkgPSAwO2Vsc2UgaWYgKGVsZW1lbnRZLnZhbHVlID4gMzAwKSBwb3NpdGlvbi55ID0gMjAwO2Vsc2UgcG9zaXRpb24ueSA9IGVsZW1lbnRZLnZhbHVlIC0gMTAwOyAvLyDnu5nmoLflvI/otYvlgLwKCiAgICAgIGxheWVyUG9zaXRpb24ubGVmdCA9IHBvc2l0aW9uLnggKyAncHgnOwogICAgICBsYXllclBvc2l0aW9uLnRvcCA9IHBvc2l0aW9uLnkgKyAncHgnOwogICAgICBsYXJnZVBvc2l0aW9uLmJhY2tncm91bmRQb3NpdGlvblggPSAtMiAqIHBvc2l0aW9uLnggKyAncHgnOwogICAgICBsYXJnZVBvc2l0aW9uLmJhY2tncm91bmRQb3NpdGlvblkgPSAtMiAqIHBvc2l0aW9uLnkgKyAncHgnOwogICAgfSk7CiAgICByZXR1cm4gewogICAgICBjdXJySW5kZXg6IGN1cnJJbmRleCwKICAgICAgc2hvdzogc2hvdywKICAgICAgbGF5ZXJQb3NpdGlvbjogbGF5ZXJQb3NpdGlvbiwKICAgICAgbGFyZ2VQb3NpdGlvbjogbGFyZ2VQb3NpdGlvbiwKICAgICAgdGFyZ2V0OiB0YXJnZXQKICAgIH07CiAgfQp9Ow=="},{"version":3,"sources":["F:\\代码\\Vue 代码\\erabbit-client-pc-124\\src\\views\\goods\\components\\goods-image.vue"],"names":[],"mappings":"AAmBA,SAAS,QAAT,EAAmB,GAAnB,EAAwB,KAAxB,QAAqC,KAArC;AACA,SAAS,iBAAT,QAAkC,cAAlC;AACA,eAAe;AACb,EAAA,IAAI,EAAE,YADO;AAEb,EAAA,KAAK,EAAE;AACL,IAAA,MAAM,EAAE;AACN,MAAA,IAAI,EAAE,KADA;AAEN,MAAA,OAAO,EAAE;AAAA,eAAM,EAAN;AAAA;AAFH;AADH,GAFM;AAQb,EAAA,KARa,iBAQN,KARM,EAQC;AACZ;AACA,QAAM,SAAQ,GAAI,GAAG,CAAC,CAAD,CAArB,CAFY,CAIZ;;AACA,QAAM,IAAG,GAAI,GAAG,CAAC,KAAD,CAAhB,CALY,CAMZ;;AACA,QAAM,aAAY,GAAI,QAAQ,CAAC;AAC7B,MAAA,IAAI,EAAE,CADuB;AAE7B,MAAA,GAAG,EAAE;AAFwB,KAAD,CAA9B,CAPY,CAWZ;;AACA,QAAM,aAAY,GAAI,QAAQ,CAAC;AAC7B,MAAA,mBAAmB,EAAE,CADQ;AAE7B,MAAA,mBAAmB,EAAE;AAFQ,KAAD,CAA9B,CAZY,CAgBZ;;AACA,QAAM,MAAK,GAAI,GAAG,CAAC,IAAD,CAAlB;;AACA,6BAA0C,iBAAiB,CAAC,MAAD,CAA3D;AAAA,QAAQ,QAAR,sBAAQ,QAAR;AAAA,QAAkB,QAAlB,sBAAkB,QAAlB;AAAA,QAA4B,SAA5B,sBAA4B,SAA5B;;AACA,IAAA,KAAK,CAAC,CAAC,QAAD,EAAW,QAAX,EAAqB,SAArB,CAAD,EAAkC,YAAM;AAC3C;AACA,MAAA,IAAI,CAAC,KAAL,GAAa,CAAC,SAAS,CAAC,KAAxB,CAF2C,CAG3C;;AACA,UAAM,QAAO,GAAI;AAAE,QAAA,CAAC,EAAE,CAAL;AAAQ,QAAA,CAAC,EAAE;AAAX,OAAjB;AAEA,UAAI,QAAQ,CAAC,KAAT,GAAiB,GAArB,EAA0B,QAAQ,CAAC,CAAT,GAAa,CAAb,CAA1B,KACK,IAAI,QAAQ,CAAC,KAAT,GAAiB,GAArB,EAA0B,QAAQ,CAAC,CAAT,GAAa,GAAb,CAA1B,KACA,QAAQ,CAAC,CAAT,GAAa,QAAQ,CAAC,KAAT,GAAiB,GAA9B;AAEL,UAAI,QAAQ,CAAC,KAAT,GAAiB,GAArB,EAA0B,QAAQ,CAAC,CAAT,GAAa,CAAb,CAA1B,KACK,IAAI,QAAQ,CAAC,KAAT,GAAiB,GAArB,EAA0B,QAAQ,CAAC,CAAT,GAAa,GAAb,CAA1B,KACA,QAAQ,CAAC,CAAT,GAAa,QAAQ,CAAC,KAAT,GAAiB,GAA9B,CAZsC,CAa3C;;AACA,MAAA,aAAa,CAAC,IAAd,GAAqB,QAAQ,CAAC,CAAT,GAAa,IAAlC;AACA,MAAA,aAAa,CAAC,GAAd,GAAoB,QAAQ,CAAC,CAAT,GAAa,IAAjC;AACA,MAAA,aAAa,CAAC,mBAAd,GAAoC,CAAC,CAAD,GAAK,QAAQ,CAAC,CAAd,GAAkB,IAAtD;AACA,MAAA,aAAa,CAAC,mBAAd,GAAoC,CAAC,CAAD,GAAK,QAAQ,CAAC,CAAd,GAAkB,IAAtD;AACD,KAlBI,CAAL;AAoBA,WAAO;AAAE,MAAA,SAAS,EAAT,SAAF;AAAa,MAAA,IAAI,EAAJ,IAAb;AAAmB,MAAA,aAAa,EAAb,aAAnB;AAAkC,MAAA,aAAa,EAAb,aAAlC;AAAiD,MAAA,MAAK,EAAL;AAAjD,KAAP;AACF;AAhDa,CAAf","sourcesContent":["<template>\n  <div class=\"goods-image\">\n    <!-- 大图 -->\n    <div v-show=\"show\" class=\"large\" :style=\"[{backgroundImage:`url(${images[currIndex]})`},largePosition]\"></div>\n    <!-- 中图 -->\n    <div class=\"middle\" ref=\"target\">\n      <img :src=\"images[currIndex]\" alt=\"\">\n      <!-- 遮罩色块 -->\n      <div v-show=\"show\" class=\"layer\" :style=\"layerPosition\"></div>\n    </div>\n    <!-- 小图 -->\n    <ul class=\"small\">\n      <li v-for=\"(img,i) in images\" :key=\"img\" :class=\"{active:i===currIndex}\">\n        <img @mouseenter=\"currIndex=i\" :src=\"img\" alt=\"\">\n      </li>\n    </ul>\n  </div>\n</template>\n<script>\nimport { reactive, ref, watch } from 'vue'\nimport { useMouseInElement } from '@vueuse/core'\nexport default {\n  name: 'GoodsImage',\n  props: {\n    images: {\n      type: Array,\n      default: () => []\n    }\n  },\n  setup (props) {\n    // 当前预览图的索引\n    const currIndex = ref(0)\n\n    // 1. 是否显示遮罩和大图\n    const show = ref(false)\n    // 2. 遮罩的坐标(样式)\n    const layerPosition = reactive({\n      left: 0,\n      top: 0\n    })\n    // 3. 大图背景定位(样式)\n    const largePosition = reactive({\n      backgroundPositionX: 0,\n      backgroundPositionY: 0\n    })\n    // 4. 使用useMouseInElement得到基于元素左上角的坐标和是否离开元素数据\n    const target = ref(null)\n    const { elementX, elementY, isOutside } = useMouseInElement(target)\n    watch([elementX, elementY, isOutside], () => {\n      // 5. 根据得到数据设置样式数据和是否显示数据\n      show.value = !isOutside.value\n      // 计算坐标\n      const position = { x: 0, y: 0 }\n\n      if (elementX.value < 100) position.x = 0\n      else if (elementX.value > 300) position.x = 200\n      else position.x = elementX.value - 100\n\n      if (elementY.value < 100) position.y = 0\n      else if (elementY.value > 300) position.y = 200\n      else position.y = elementY.value - 100\n      // 给样式赋值\n      layerPosition.left = position.x + 'px'\n      layerPosition.top = position.y + 'px'\n      largePosition.backgroundPositionX = -2 * position.x + 'px'\n      largePosition.backgroundPositionY = -2 * position.y + 'px'\n    })\n\n    return { currIndex, show, layerPosition, largePosition, target }\n  }\n}\n</script>\n<style scoped lang=\"less\">\n.goods-image {\n  width: 480px;\n  height: 400px;\n  position: relative;\n  display: flex;\n  z-index: 500;\n  .large {\n    position: absolute;\n    top: 0;\n    left: 412px;\n    width: 400px;\n    height: 400px;\n    box-shadow: 0 0 10px rgba(0,0,0,0.1);\n    background-repeat: no-repeat;\n    background-size: 800px 800px;\n    background-color: #f8f8f8;\n  }\n  .middle {\n    width: 400px;\n    height: 400px;\n    background: #f5f5f5;\n    position: relative;\n    cursor: move;\n    .layer {\n      width: 200px;\n      height: 200px;\n      background: rgba(0,0,0,.2);\n      left: 0;\n      top: 0;\n      position: absolute;\n    }\n  }\n  .small {\n    width: 80px;\n    li {\n      width: 68px;\n      height: 68px;\n      margin-left: 12px;\n      margin-bottom: 15px;\n      cursor: pointer;\n      &:hover,&.active {\n        border: 2px solid @xtxColor;\n      }\n    }\n  }\n}\n</style>\n"],"sourceRoot":""}]}