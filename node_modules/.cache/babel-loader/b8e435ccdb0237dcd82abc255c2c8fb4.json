{"remainingRequest":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\babel-loader\\lib\\index.js!E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\src\\utils\\request.js","dependencies":[{"path":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\src\\utils\\request.js","mtime":1621243079000},{"path":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656924649801},{"path":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\babel-loader\\lib\\index.js","mtime":1656924651984},{"path":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\eslint-loader\\index.js","mtime":1656924650183}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJFOi9cdTc2N0VcdTVFQTZcdTdGNTFcdTc2RDhcdTRFMEJcdThGN0QvXHU5RUQxXHU5QTZDdnVlL1Z1ZTMuMFx1NUMwRlx1NTE1NFx1OUM5Q1x1NTEzRlx1OTg3OVx1NzZFRVx1OEQ0NFx1NjU5OS9cdTRFRTNcdTc4MDEvZXJhYmJpdC1jbGllbnQtcGMtMTI0L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwovLyAxLiDliJvlu7rkuIDkuKrmlrDnmoRheGlvc+WunuS+iwovLyAyLiDor7fmsYLmi6bmiKrlmajvvIzlpoLmnpzmnIl0b2tlbui/m+ihjOWktOmDqOaQuuW4pgovLyAzLiDlk43lupTmi6bmiKrlmajvvJoxLiDliaXnprvml6DmlYjmlbDmja4gIDIuIOWkhOeQhnRva2Vu5aSx5pWICi8vIDQuIOWvvOWHuuS4gOS4quWHveaVsO+8jOiwg+eUqOW9k+WJjeeahGF4c2lv5a6e5L6L5Y+R6K+35rGC77yM6L+U5Zue5YC8cHJvbWlzZQppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgc3RvcmUgZnJvbSAnQC9zdG9yZSc7CmltcG9ydCByb3V0ZXIgZnJvbSAnQC9yb3V0ZXInOyAvLyDlr7zlh7rln7rlh4blnLDlnYDvvIzljp/lm6DvvJrlhbbku5blnLDmlrnkuI3mmK/pgJrov4dheGlvc+WPkeivt+axgueahOWcsOaWueeUqOS4iuWfuuWHhuWcsOWdgAoKZXhwb3J0IHZhciBiYXNlVVJMID0gJ2h0dHA6Ly9wY2FwaS14aWFvdHV4aWFuLWZyb250LWRldnRlc3QuaXRoZWltYS5uZXQvJzsKdmFyIGluc3RhbmNlID0gYXhpb3MuY3JlYXRlKHsKICAvLyBheGlvcyDnmoTkuIDkupvphY3nva7vvIxiYXNlVVJMICB0aW1lb3V0CiAgYmFzZVVSTDogYmFzZVVSTCwKICB0aW1lb3V0OiA1MDAwCn0pOwppbnN0YW5jZS5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKGNvbmZpZykgewogIC8vIOaLpuaIquS4muWKoemAu+i+kQogIC8vIOi/m+ihjOivt+axgumFjee9rueahOS/ruaUuQogIC8vIOWmguaenOacrOWcsOWPiHRva2Vu5bCx5Zyo5aS06YOo5pC65bimCiAgLy8gMS4g6I635Y+W55So5oi35L+h5oGv5a+56LGhCiAgdmFyIHByb2ZpbGUgPSBzdG9yZS5zdGF0ZS51c2VyLnByb2ZpbGU7IC8vIDIuIOWIpOaWreaYr+WQpuaciXRva2VuCgogIGlmIChwcm9maWxlLnRva2VuKSB7CiAgICAvLyAzLiDorr7nva50b2tlbgogICAgY29uZmlnLmhlYWRlcnMuQXV0aG9yaXphdGlvbiA9ICJCZWFyZXIgIi5jb25jYXQocHJvZmlsZS50b2tlbik7CiAgfQoKICByZXR1cm4gY29uZmlnOwp9LCBmdW5jdGlvbiAoZXJyKSB7CiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7Cn0pOyAvLyByZXMgPT4gcmVzLmRhdGEgIOWPluWHumRhdGHmlbDmja7vvIzlsIbmnaXosIPnlKjmjqXlj6PnmoTml7blgJnnm7TmjqXmi7/liLDnmoTlsLHmmK/lkI7lj7DnmoTmlbDmja4KCmluc3RhbmNlLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlcykgewogIHJldHVybiByZXMuZGF0YTsKfSwgZnVuY3Rpb24gKGVycikgewogIC8vIDQwMSDnirbmgIHnoIHvvIzov5vlhaXor6Xlh73mlbAKICBpZiAoZXJyLnJlc3BvbnNlICYmIGVyci5yZXNwb25zZS5zdGF0dXMgPT09IDQwMSkgewogICAgLy8gMS4g5riF56m65peg5pWI55So5oi35L+h5oGvCiAgICAvLyAyLiDot7PovazliLDnmbvlvZXpobUKICAgIC8vIDMuIOi3s+i9rOmcgOimgeS8oOWPgu+8iOW9k+WJjei3r+eUseWcsOWdgO+8iee7meeZu+W9lemhteeggQogICAgc3RvcmUuY29tbWl0KCd1c2VyL3NldFVzZXInLCB7fSk7IC8vIOW9k+WJjei3r+eUseWcsOWdgAogICAgLy8g57uE5Lu26YeM5aS077yaYC91c2VyP2E9MTBgICRyb3V0ZS5wYXRoID09PSAvdXNlciAgJHJvdXRlLmZ1bGxQYXRoID09PSAvdXNlcj9hPTEwCiAgICAvLyBqc+aooeWdl+S4re+8mnJvdXRlci5jdXJyZW50Um91dGUudmFsdWUuZnVsbFBhdGgg5bCx5piv5b2T5YmN6Lev55Sx5Zyw5Z2A77yMcm91dGVyLmN1cnJlbnRSb3V0ZSDmmK9yZWblk43lupTlvI/mlbDmja4KCiAgICB2YXIgZnVsbFBhdGggPSBlbmNvZGVVUklDb21wb25lbnQocm91dGVyLmN1cnJlbnRSb3V0ZS52YWx1ZS5mdWxsUGF0aCk7IC8vIGVuY29kZVVSSUNvbXBvbmVudCDovazmjaJ1cmnnvJbnoIHvvIzpmLLmraLop6PmnpDlnLDlnYDlh7rpl67popgKCiAgICByb3V0ZXIucHVzaCgnL2xvZ2luP3JlZGlyZWN0VXJsPScgKyBmdWxsUGF0aCk7CiAgfQoKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyKTsKfSk7IC8vIOivt+axguW3peWFt+WHveaVsAoKZXhwb3J0IGRlZmF1bHQgKGZ1bmN0aW9uICh1cmwsIG1ldGhvZCwgc3VibWl0RGF0YSkgewogIC8vIOi0n+i0o+WPkeivt+axgu+8muivt+axguWcsOWdgO+8jOivt+axguaWueW8j++8jOaPkOS6pOeahOaVsOaNrgogIHJldHVybiBpbnN0YW5jZShfZGVmaW5lUHJvcGVydHkoewogICAgdXJsOiB1cmwsCiAgICBtZXRob2Q6IG1ldGhvZAogIH0sIG1ldGhvZC50b0xvd2VyQ2FzZSgpID09PSAnZ2V0JyA/ICdwYXJhbXMnIDogJ2RhdGEnLCBzdWJtaXREYXRhKSk7Cn0pOw=="},{"version":3,"sources":["E:/百度网盘下载/黑马vue/Vue3.0小兔鲜儿项目资料/代码/erabbit-client-pc-124/src/utils/request.js"],"names":["axios","store","router","baseURL","instance","create","timeout","interceptors","request","use","config","profile","state","user","token","headers","Authorization","err","Promise","reject","response","res","data","status","commit","fullPath","encodeURIComponent","currentRoute","value","push","url","method","submitData","toLowerCase"],"mappings":";;AAAA;AACA;AACA;AACA;AAEA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,MAAP,MAAmB,UAAnB,C,CAEA;;AACA,OAAO,IAAMC,OAAO,GAAG,oDAAhB;AACP,IAAMC,QAAQ,GAAGJ,KAAK,CAACK,MAAN,CAAa;AAC5B;AACAF,EAAAA,OAAO,EAAPA,OAF4B;AAG5BG,EAAAA,OAAO,EAAE;AAHmB,CAAb,CAAjB;AAMAF,QAAQ,CAACG,YAAT,CAAsBC,OAAtB,CAA8BC,GAA9B,CAAkC,UAAAC,MAAM,EAAI;AAC1C;AACA;AACA;AACA;AACA,MAAQC,OAAR,GAAoBV,KAAK,CAACW,KAAN,CAAYC,IAAhC,CAAQF,OAAR,CAL0C,CAM1C;;AACA,MAAIA,OAAO,CAACG,KAAZ,EAAmB;AACjB;AACAJ,IAAAA,MAAM,CAACK,OAAP,CAAeC,aAAf,oBAAyCL,OAAO,CAACG,KAAjD;AACD;;AACD,SAAOJ,MAAP;AACD,CAZD,EAYG,UAAAO,GAAG,EAAI;AACR,SAAOC,OAAO,CAACC,MAAR,CAAeF,GAAf,CAAP;AACD,CAdD,E,CAgBA;;AACAb,QAAQ,CAACG,YAAT,CAAsBa,QAAtB,CAA+BX,GAA/B,CAAmC,UAAAY,GAAG;AAAA,SAAIA,GAAG,CAACC,IAAR;AAAA,CAAtC,EAAoD,UAAAL,GAAG,EAAI;AACzD;AACA,MAAIA,GAAG,CAACG,QAAJ,IAAgBH,GAAG,CAACG,QAAJ,CAAaG,MAAb,KAAwB,GAA5C,EAAiD;AAC/C;AACA;AACA;AACAtB,IAAAA,KAAK,CAACuB,MAAN,CAAa,cAAb,EAA6B,EAA7B,EAJ+C,CAK/C;AACA;AACA;;AACA,QAAMC,QAAQ,GAAGC,kBAAkB,CAACxB,MAAM,CAACyB,YAAP,CAAoBC,KAApB,CAA0BH,QAA3B,CAAnC,CAR+C,CAS/C;;AACAvB,IAAAA,MAAM,CAAC2B,IAAP,CAAY,wBAAwBJ,QAApC;AACD;;AACD,SAAOP,OAAO,CAACC,MAAR,CAAeF,GAAf,CAAP;AACD,CAfD,E,CAiBA;;AACA,gBAAe,UAACa,GAAD,EAAMC,MAAN,EAAcC,UAAd,EAA6B;AAC1C;AACA,SAAO5B,QAAQ;AACb0B,IAAAA,GAAG,EAAHA,GADa;AAEbC,IAAAA,MAAM,EAANA;AAFa,KAQZA,MAAM,CAACE,WAAP,OAAyB,KAAzB,GAAiC,QAAjC,GAA4C,MARhC,EAQyCD,UARzC,EAAf;AAUD,CAZD","sourcesContent":["// 1. 创建一个新的axios实例\n// 2. 请求拦截器，如果有token进行头部携带\n// 3. 响应拦截器：1. 剥离无效数据  2. 处理token失效\n// 4. 导出一个函数，调用当前的axsio实例发请求，返回值promise\n\nimport axios from 'axios'\nimport store from '@/store'\nimport router from '@/router'\n\n// 导出基准地址，原因：其他地方不是通过axios发请求的地方用上基准地址\nexport const baseURL = 'http://pcapi-xiaotuxian-front-devtest.itheima.net/'\nconst instance = axios.create({\n  // axios 的一些配置，baseURL  timeout\n  baseURL,\n  timeout: 5000\n})\n\ninstance.interceptors.request.use(config => {\n  // 拦截业务逻辑\n  // 进行请求配置的修改\n  // 如果本地又token就在头部携带\n  // 1. 获取用户信息对象\n  const { profile } = store.state.user\n  // 2. 判断是否有token\n  if (profile.token) {\n    // 3. 设置token\n    config.headers.Authorization = `Bearer ${profile.token}`\n  }\n  return config\n}, err => {\n  return Promise.reject(err)\n})\n\n// res => res.data  取出data数据，将来调用接口的时候直接拿到的就是后台的数据\ninstance.interceptors.response.use(res => res.data, err => {\n  // 401 状态码，进入该函数\n  if (err.response && err.response.status === 401) {\n    // 1. 清空无效用户信息\n    // 2. 跳转到登录页\n    // 3. 跳转需要传参（当前路由地址）给登录页码\n    store.commit('user/setUser', {})\n    // 当前路由地址\n    // 组件里头：`/user?a=10` $route.path === /user  $route.fullPath === /user?a=10\n    // js模块中：router.currentRoute.value.fullPath 就是当前路由地址，router.currentRoute 是ref响应式数据\n    const fullPath = encodeURIComponent(router.currentRoute.value.fullPath)\n    // encodeURIComponent 转换uri编码，防止解析地址出问题\n    router.push('/login?redirectUrl=' + fullPath)\n  }\n  return Promise.reject(err)\n})\n\n// 请求工具函数\nexport default (url, method, submitData) => {\n  // 负责发请求：请求地址，请求方式，提交的数据\n  return instance({\n    url,\n    method,\n    // 1. 如果是get请求  需要使用params来传递submitData   ?a=10&c=10\n    // 2. 如果不是get请求  需要使用data来传递submitData   请求体传参\n    // [] 设置一个动态的key, 写js表达式，js表达式的执行结果当作KEY\n    // method参数：get,Get,GET  转换成小写再来判断\n    // 在对象，['params']:submitData ===== params:submitData 这样理解\n    [method.toLowerCase() === 'get' ? 'params' : 'data']: submitData\n  })\n}\n"]}]}