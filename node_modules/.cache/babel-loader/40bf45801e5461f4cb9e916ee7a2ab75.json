{"remainingRequest":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\thread-loader\\dist\\cjs.js!F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\babel-loader\\lib\\index.js!F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!F:\\代码\\Vue 代码\\erabbit-client-pc-124\\src\\views\\goods\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\src\\views\\goods\\index.vue","mtime":1621243079000},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656924649801},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1656924649783},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\babel-loader\\lib\\index.js","mtime":1656924651984},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656924649801},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1656924653036}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCBHb29kc1JlbGV2YW50IGZyb20gJy4vY29tcG9uZW50cy9nb29kcy1yZWxldmFudCc7CmltcG9ydCBHb29kc0ltYWdlIGZyb20gJy4vY29tcG9uZW50cy9nb29kcy1pbWFnZSc7CmltcG9ydCBHb29kc1NhbGVzIGZyb20gJy4vY29tcG9uZW50cy9nb29kcy1zYWxlcyc7CmltcG9ydCBHb29kc05hbWUgZnJvbSAnLi9jb21wb25lbnRzL2dvb2RzLW5hbWUnOwppbXBvcnQgR29vZHNTa3UgZnJvbSAnLi9jb21wb25lbnRzL2dvb2RzLXNrdSc7CmltcG9ydCBHb29kc1RhYnMgZnJvbSAnLi9jb21wb25lbnRzL2dvb2RzLXRhYnMnOwppbXBvcnQgR29vZHNIb3QgZnJvbSAnLi9jb21wb25lbnRzL2dvb2RzLWhvdCc7CmltcG9ydCBHb29kc1dhcm4gZnJvbSAnLi9jb21wb25lbnRzL2dvb2RzLXdhcm4nOwppbXBvcnQgeyBuZXh0VGljaywgcHJvdmlkZSwgcmVmLCB3YXRjaCB9IGZyb20gJ3Z1ZSc7CmltcG9ydCB7IGZpbmRHb29kcyB9IGZyb20gJ0AvYXBpL3Byb2R1Y3QnOwppbXBvcnQgeyB1c2VSb3V0ZSB9IGZyb20gJ3Z1ZS1yb3V0ZXInOwppbXBvcnQgeyB1c2VTdG9yZSB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgTWVzc2FnZSBmcm9tICdAL2NvbXBvbmVudHMvbGlicmFyeS9NZXNzYWdlJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdYdHhHb29kc1BhZ2UnLAogIGNvbXBvbmVudHM6IHsKICAgIEdvb2RzUmVsZXZhbnQ6IEdvb2RzUmVsZXZhbnQsCiAgICBHb29kc0ltYWdlOiBHb29kc0ltYWdlLAogICAgR29vZHNTYWxlczogR29vZHNTYWxlcywKICAgIEdvb2RzTmFtZTogR29vZHNOYW1lLAogICAgR29vZHNTa3U6IEdvb2RzU2t1LAogICAgR29vZHNUYWJzOiBHb29kc1RhYnMsCiAgICBHb29kc0hvdDogR29vZHNIb3QsCiAgICBHb29kc1dhcm46IEdvb2RzV2FybgogIH0sCiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKCkgewogICAgdmFyIGdvb2RzID0gdXNlR29vZHMoKTsKCiAgICB2YXIgY2hhbmdlU2t1ID0gZnVuY3Rpb24gY2hhbmdlU2t1KHNrdSkgewogICAgICAvLyDkv67mlLnllYblk4HnmoTnjrDku7fljp/ku7flupPlrZjkv6Hmga8KICAgICAgaWYgKHNrdS5za3VJZCkgewogICAgICAgIGdvb2RzLnZhbHVlLnByaWNlID0gc2t1LnByaWNlOwogICAgICAgIGdvb2RzLnZhbHVlLm9sZFByaWNlID0gc2t1Lm9sZFByaWNlOwogICAgICAgIGdvb2RzLnZhbHVlLmludmVudG9yeSA9IHNrdS5pbnZlbnRvcnk7CiAgICAgIH0gLy8g6K6w5b2V6YCJ5oup5ZCO55qEc2t177yM5Y+v6IO95pyJ5pWw5o2u77yM5Y+v6IO95rKh5pyJ5pWw5o2ue30KCgogICAgICBjdXJyU2t1LnZhbHVlID0gc2t1OwogICAgfTsgLy8g5o+Q5L6bZ29vZHPmlbDmja7nu5nlkI7ku6Pnu4Tku7bkvb/nlKgKCgogICAgcHJvdmlkZSgnZ29vZHMnLCBnb29kcyk7IC8vIOmAieaLqeeahOaVsOmHjwoKICAgIHZhciBudW0gPSByZWYoMSk7IC8vIOWKoOWFpei0reeJqei9pgoKICAgIHZhciBzdG9yZSA9IHVzZVN0b3JlKCk7CiAgICB2YXIgY3VyclNrdSA9IHJlZihudWxsKTsKCiAgICB2YXIgaW5zZXJ0Q2FydCA9IGZ1bmN0aW9uIGluc2VydENhcnQoKSB7CiAgICAgIGlmIChjdXJyU2t1LnZhbHVlICYmIGN1cnJTa3UudmFsdWUuc2t1SWQpIHsKICAgICAgICAvLyBpZCBza3VJZCBuYW1lIGF0dHJzVGV4dCBwaWN0dXJlIHByaWNlIG5vd1ByaWNlIHNlbGVjdGVkIHN0b2NrIGNvdW50IGlzRWZmZWN0aXZlCiAgICAgICAgdmFyIF9jdXJyU2t1JHZhbHVlID0gY3VyclNrdS52YWx1ZSwKICAgICAgICAgICAgc2t1SWQgPSBfY3VyclNrdSR2YWx1ZS5za3VJZCwKICAgICAgICAgICAgYXR0cnNUZXh0ID0gX2N1cnJTa3UkdmFsdWUuc3BlY3NUZXh0LAogICAgICAgICAgICBzdG9jayA9IF9jdXJyU2t1JHZhbHVlLmludmVudG9yeTsKICAgICAgICB2YXIgX2dvb2RzJHZhbHVlID0gZ29vZHMudmFsdWUsCiAgICAgICAgICAgIGlkID0gX2dvb2RzJHZhbHVlLmlkLAogICAgICAgICAgICBuYW1lID0gX2dvb2RzJHZhbHVlLm5hbWUsCiAgICAgICAgICAgIHByaWNlID0gX2dvb2RzJHZhbHVlLnByaWNlLAogICAgICAgICAgICBtYWluUGljdHVyZXMgPSBfZ29vZHMkdmFsdWUubWFpblBpY3R1cmVzOwogICAgICAgIHN0b3JlLmRpc3BhdGNoKCdjYXJ0L2luc2VydENhcnQnLCB7CiAgICAgICAgICBza3VJZDogc2t1SWQsCiAgICAgICAgICBhdHRyc1RleHQ6IGF0dHJzVGV4dCwKICAgICAgICAgIHN0b2NrOiBzdG9jaywKICAgICAgICAgIGlkOiBpZCwKICAgICAgICAgIG5hbWU6IG5hbWUsCiAgICAgICAgICBwcmljZTogcHJpY2UsCiAgICAgICAgICBub3dQcmljZTogcHJpY2UsCiAgICAgICAgICBwaWN0dXJlOiBtYWluUGljdHVyZXNbMF0sCiAgICAgICAgICBzZWxlY3RlZDogdHJ1ZSwKICAgICAgICAgIGlzRWZmZWN0aXZlOiB0cnVlLAogICAgICAgICAgY291bnQ6IG51bS52YWx1ZQogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgTWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgdGV4dDogJ+WKoOWFpei0reeJqei9puaIkOWKnycKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIE1lc3NhZ2UoewogICAgICAgICAgdGV4dDogJ+ivt+mAieaLqeWujOaVtOinhOagvCcKICAgICAgICB9KTsKICAgICAgfQogICAgfTsKCiAgICByZXR1cm4gewogICAgICBnb29kczogZ29vZHMsCiAgICAgIGNoYW5nZVNrdTogY2hhbmdlU2t1LAogICAgICBudW06IG51bSwKICAgICAgaW5zZXJ0Q2FydDogaW5zZXJ0Q2FydAogICAgfTsKICB9Cn07IC8vIOiOt+WPluWVhuWTgeivpuaDhQoKdmFyIHVzZUdvb2RzID0gZnVuY3Rpb24gdXNlR29vZHMoKSB7CiAgLy8g5Ye6546w6Lev55Sx5Zyw5Z2A5ZWG5ZOBSUTlj5HnlJ/lj5jljJbvvIzkvYbmmK/kuI3kvJrph43mlrDliJ3lp4vljJbnu4Tku7YKICB2YXIgZ29vZHMgPSByZWYobnVsbCk7CiAgdmFyIHJvdXRlID0gdXNlUm91dGUoKTsKICB3YXRjaChmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gcm91dGUucGFyYW1zLmlkOwogIH0sIGZ1bmN0aW9uIChuZXdWYWwpIHsKICAgIGlmIChuZXdWYWwgJiYgIi9wcm9kdWN0LyIuY29uY2F0KG5ld1ZhbCkgPT09IHJvdXRlLnBhdGgpIHsKICAgICAgZmluZEdvb2RzKHJvdXRlLnBhcmFtcy5pZCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIC8vIOiuqeWVhuWTgeaVsOaNruS4um51bGznhLblkI7kvb/nlKh2LWlm55qE57uE5Lu25Y+v5Lul6YeN5paw6ZSA5q+B5ZKM5Yib5bu6CiAgICAgICAgZ29vZHMudmFsdWUgPSBudWxsOwogICAgICAgIG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGdvb2RzLnZhbHVlID0gZGF0YS5yZXN1bHQ7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGltbWVkaWF0ZTogdHJ1ZQogIH0pOwogIHJldHVybiBnb29kczsKfTs="},{"version":3,"sources":["F:\\代码\\Vue 代码\\erabbit-client-pc-124\\src\\views\\goods\\index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class='xtx-goods-page' v-if=\"goods\">\n    <div class=\"container\">\n      <!-- 面包屑 -->\n      <XtxBread>\n        <XtxBreadItem to=\"/\">首页</XtxBreadItem>\n        <XtxBreadItem :to=\"`/category/${goods.categories[1].id}`\">{{goods.categories[1].name}}</XtxBreadItem>\n        <XtxBreadItem :to=\"`/category/sub/${goods.categories[0].id}`\">{{goods.categories[0].name}}</XtxBreadItem>\n        <XtxBreadItem>{{goods.name}}</XtxBreadItem>\n      </XtxBread>\n      <!-- 商品信息 -->\n      <div class=\"goods-info\">\n        <div class=\"media\">\n          <GoodsImage :images=\"goods.mainPictures\" />\n          <GoodsSales />\n        </div>\n        <div class=\"spec\">\n          <GoodsName :goods=\"goods\" />\n          <!-- sku组件 skuId=\"1369155865461919746\" 测试选中 -->\n          <GoodsSku :goods=\"goods\" @change=\"changeSku\" />\n          <!-- 数量选择组件 -->\n          <XtxNumbox label=\"数量\" v-model=\"num\" :max=\"goods.inventory\" />\n          <!-- 按钮组件 -->\n          <XtxButton @click=\"insertCart()\" type=\"primary\" style=\"margin-top:20px\">加入购物车</XtxButton>\n        </div>\n      </div>\n      <!-- 商品推荐 -->\n      <GoodsRelevant :goodsId=\"goods.id\" />\n      <!-- 商品详情 -->\n      <div class=\"goods-footer\">\n        <div class=\"goods-article\">\n          <!-- 商品+评价 -->\n          <GoodsTabs />\n          <!-- 注意事项 -->\n          <GoodsWarn />\n        </div>\n        <!-- 24热榜+周热销榜 -->\n        <div class=\"goods-aside\">\n          <GoodsHot />\n          <GoodsHot :type=\"2\" />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport GoodsRelevant from './components/goods-relevant'\nimport GoodsImage from './components/goods-image'\nimport GoodsSales from './components/goods-sales'\nimport GoodsName from './components/goods-name'\nimport GoodsSku from './components/goods-sku'\nimport GoodsTabs from './components/goods-tabs'\nimport GoodsHot from './components/goods-hot'\nimport GoodsWarn from './components/goods-warn'\nimport { nextTick, provide, ref, watch } from 'vue'\nimport { findGoods } from '@/api/product'\nimport { useRoute } from 'vue-router'\nimport { useStore } from 'vuex'\nimport Message from '@/components/library/Message'\nexport default {\n  name: 'XtxGoodsPage',\n  components: { GoodsRelevant, GoodsImage, GoodsSales, GoodsName, GoodsSku, GoodsTabs, GoodsHot, GoodsWarn },\n  setup () {\n    const goods = useGoods()\n    const changeSku = (sku) => {\n      // 修改商品的现价原价库存信息\n      if (sku.skuId) {\n        goods.value.price = sku.price\n        goods.value.oldPrice = sku.oldPrice\n        goods.value.inventory = sku.inventory\n      }\n      // 记录选择后的sku，可能有数据，可能没有数据{}\n      currSku.value = sku\n    }\n\n    // 提供goods数据给后代组件使用\n    provide('goods', goods)\n\n    // 选择的数量\n    const num = ref(1)\n\n    // 加入购物车\n    const store = useStore()\n    const currSku = ref(null)\n    const insertCart = () => {\n      if (currSku.value && currSku.value.skuId) {\n        // id skuId name attrsText picture price nowPrice selected stock count isEffective\n        const { skuId, specsText: attrsText, inventory: stock } = currSku.value\n        const { id, name, price, mainPictures } = goods.value\n        store.dispatch('cart/insertCart', {\n          skuId,\n          attrsText,\n          stock,\n          id,\n          name,\n          price,\n          nowPrice: price,\n          picture: mainPictures[0],\n          selected: true,\n          isEffective: true,\n          count: num.value\n        }).then(() => {\n          Message({ type: 'success', text: '加入购物车成功' })\n        })\n      } else {\n        Message({ text: '请选择完整规格' })\n      }\n    }\n\n    return { goods, changeSku, num, insertCart }\n  }\n}\n// 获取商品详情\nconst useGoods = () => {\n  // 出现路由地址商品ID发生变化，但是不会重新初始化组件\n  const goods = ref(null)\n  const route = useRoute()\n  watch(() => route.params.id, (newVal) => {\n    if (newVal && `/product/${newVal}` === route.path) {\n      findGoods(route.params.id).then(data => {\n        // 让商品数据为null然后使用v-if的组件可以重新销毁和创建\n        goods.value = null\n        nextTick(() => {\n          goods.value = data.result\n        })\n      })\n    }\n  }, { immediate: true })\n  return goods\n}\n</script>\n\n<style scoped lang='less'>\n.goods-info {\n  min-height: 600px;\n  background: #fff;\n  display: flex;\n  .media {\n    width: 580px;\n    height: 600px;\n    padding: 30px 50px;\n  }\n  .spec {\n    flex: 1;\n    padding: 30px 30px 30px 0;\n  }\n}\n.goods-footer {\n  display: flex;\n  margin-top: 20px;\n  .goods-article {\n    width: 940px;\n    margin-right: 20px;\n  }\n  .goods-aside {\n    width: 280px;\n    min-height: 1000px;\n  }\n}\n// .goods-tabs {\n//   min-height: 600px;\n//   background: #fff;\n// }\n// .goods-warn {\n//   min-height: 600px;\n//   background: #fff;\n//   margin-top: 20px;\n// }\n</style>\n"],"sourceRoot":""}]}