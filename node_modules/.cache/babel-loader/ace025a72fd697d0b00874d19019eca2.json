{"remainingRequest":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\babel-loader\\lib\\index.js!E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\src\\views\\category\\sub.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\src\\views\\category\\sub.vue","mtime":1621243079000},{"path":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656924649801},{"path":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\babel-loader\\lib\\index.js","mtime":1656924651984},{"path":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656924649801},{"path":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1656924653036}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRTovXHU3NjdFXHU1RUE2XHU3RjUxXHU3NkQ4XHU0RTBCXHU4RjdEL1x1OUVEMVx1OUE2Q3Z1ZS9WdWUzLjBcdTVDMEZcdTUxNTRcdTlDOUNcdTUxM0ZcdTk4NzlcdTc2RUVcdThENDRcdTY1OTkvXHU0RUUzXHU3ODAxL2VyYWJiaXQtY2xpZW50LXBjLTEyNC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCBfdG9Db25zdW1hYmxlQXJyYXkgZnJvbSAiRTovXHU3NjdFXHU1RUE2XHU3RjUxXHU3NkQ4XHU0RTBCXHU4RjdEL1x1OUVEMVx1OUE2Q3Z1ZS9WdWUzLjBcdTVDMEZcdTUxNTRcdTlDOUNcdTUxM0ZcdTk4NzlcdTc2RUVcdThENDRcdTY1OTkvXHU0RUUzXHU3ODAxL2VyYWJiaXQtY2xpZW50LXBjLTEyNC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkiOwppbXBvcnQgU3ViQnJlYWQgZnJvbSAnLi9jb21wb25lbnRzL3N1Yi1icmVhZCc7CmltcG9ydCBTdWJGaWx0ZXIgZnJvbSAnLi9jb21wb25lbnRzL3N1Yi1maWx0ZXInOwppbXBvcnQgU3ViU29ydCBmcm9tICcuL2NvbXBvbmVudHMvc3ViLXNvcnQnOwppbXBvcnQgR29vZHNJdGVtIGZyb20gJy4vY29tcG9uZW50cy9nb29kcy1pdGVtJzsKaW1wb3J0IHsgcmVmLCB3YXRjaCB9IGZyb20gJ3Z1ZSc7CmltcG9ydCB7IGZpbmRTdWJDYXRlZ29yeUdvb2RzIH0gZnJvbSAnQC9hcGkvY2F0ZWdvcnknOwppbXBvcnQgeyB1c2VSb3V0ZSB9IGZyb20gJ3Z1ZS1yb3V0ZXInOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1N1YkNhdGVnb3J5JywKICBjb21wb25lbnRzOiB7CiAgICBTdWJCcmVhZDogU3ViQnJlYWQsCiAgICBTdWJGaWx0ZXI6IFN1YkZpbHRlciwKICAgIFN1YlNvcnQ6IFN1YlNvcnQsCiAgICBHb29kc0l0ZW06IEdvb2RzSXRlbQogIH0sCiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKCkgewogICAgdmFyIHJvdXRlID0gdXNlUm91dGUoKTsgLy8g5Yqg6L295LitCgogICAgdmFyIGxvYWRpbmcgPSByZWYoZmFsc2UpOyAvLyDmmK/lkKbliqDovb3lrozmr5UKCiAgICB2YXIgZmluaXNoZWQgPSByZWYoZmFsc2UpOyAvLyDllYblk4HliJfooajmlbDmja4KCiAgICB2YXIgZ29vZHNMaXN0ID0gcmVmKFtdKTsgLy8g6K+35rGC5Y+C5pWwCgogICAgdmFyIHJlcVBhcmFtcyA9IHsKICAgICAgcGFnZTogMSwKICAgICAgcGFnZVNpemU6IDIwCiAgICB9OwoKICAgIHZhciBnZXREYXRhID0gZnVuY3Rpb24gZ2V0RGF0YSgpIHsKICAgICAgbG9hZGluZy52YWx1ZSA9IHRydWU7IC8vIOiuvue9ruS6jOe6p+WIhuexu+eahElECgogICAgICByZXFQYXJhbXMuY2F0ZWdvcnlJZCA9IHJvdXRlLnBhcmFtcy5pZDsKICAgICAgZmluZFN1YkNhdGVnb3J5R29vZHMocmVxUGFyYW1zKS50aGVuKGZ1bmN0aW9uIChfcmVmKSB7CiAgICAgICAgdmFyIHJlc3VsdCA9IF9yZWYucmVzdWx0OwoKICAgICAgICAvLyDojrflj5bmlbDmja7miJDlip8KICAgICAgICBpZiAocmVzdWx0Lml0ZW1zLmxlbmd0aCkgewogICAgICAgICAgdmFyIF9nb29kc0xpc3QkdmFsdWU7CgogICAgICAgICAgLy8g5pyJ5pWw5o2u5bCx6L+95Yqg5pWw5o2uCiAgICAgICAgICAoX2dvb2RzTGlzdCR2YWx1ZSA9IGdvb2RzTGlzdC52YWx1ZSkucHVzaC5hcHBseShfZ29vZHNMaXN0JHZhbHVlLCBfdG9Db25zdW1hYmxlQXJyYXkocmVzdWx0Lml0ZW1zKSk7IC8vIOaKinBhZ2XmlLnmiJDkuIvkuIDpobXpobXnoIEKCgogICAgICAgICAgcmVxUGFyYW1zLnBhZ2UrKzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8g5rKh5pyJ5pWw5o2u77yM5Luj6KGo5Yqg6L295a6M5oiQCiAgICAgICAgICBmaW5pc2hlZC52YWx1ZSA9IHRydWU7CiAgICAgICAgfQoKICAgICAgICBsb2FkaW5nLnZhbHVlID0gZmFsc2U7CiAgICAgIH0pOwogICAgfTsgLy8g5Zyo5pu05pS55LqG5LqM57qn5YiG57G755qE5pe25YCZ6ZyA6KaB6YeN5paw5Yqg6L295pWw5o2uCgoKICAgIHdhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHJvdXRlLnBhcmFtcy5pZDsKICAgIH0sIGZ1bmN0aW9uIChuZXdWYWwpIHsKICAgICAgaWYgKG5ld1ZhbCAmJiAiL2NhdGVnb3J5L3N1Yi8iLmNvbmNhdChuZXdWYWwpID09PSByb3V0ZS5wYXRoKSB7CiAgICAgICAgZmluaXNoZWQudmFsdWUgPSBmYWxzZTsKICAgICAgICBnb29kc0xpc3QudmFsdWUgPSBbXTsgLy8g5a+86Ie05YiX6KGo56m655qE77yM5Yqg6L295pu05aSa57uE5Lu26aG25LiK5p2l77yM6L+b5YWl5Y+v6KeG5Yy677yM5Yy65Yqg6L295pWw5o2uCgogICAgICAgIHJlcVBhcmFtcyA9IHsKICAgICAgICAgIHBhZ2U6IDEsCiAgICAgICAgICBwYWdlU2l6ZTogMjAKICAgICAgICB9OwogICAgICB9CiAgICB9KTsgLy8gMS4g5pu05pS55o6S5bqP57uE5Lu255qE562b6YCJ5pWw5o2u77yM6YeN5paw6K+35rGCCgogICAgdmFyIHNvcnRDaGFuZ2UgPSBmdW5jdGlvbiBzb3J0Q2hhbmdlKHNvcnRQYXJhbXMpIHsKICAgICAgZmluaXNoZWQudmFsdWUgPSBmYWxzZTsgLy8g5ZCI5bm26K+35rGC5Y+C5pWw77yM5L+d55WZ5LmL5YmN5Y+C5pWwCgogICAgICByZXFQYXJhbXMgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHJlcVBhcmFtcyksIHNvcnRQYXJhbXMpOwogICAgICByZXFQYXJhbXMucGFnZSA9IDE7CiAgICAgIGdvb2RzTGlzdC52YWx1ZSA9IFtdOwogICAgfTsgLy8gMi4g5pu05pS5562b6YCJ57uE5Lu255qE562b6YCJ5pWw5o2u77yM6YeN5paw6K+35rGCCgoKICAgIHZhciBmaWx0ZXJDaGFuZ2UgPSBmdW5jdGlvbiBmaWx0ZXJDaGFuZ2UoZmlsdGVyUGFyYW1zKSB7CiAgICAgIGZpbmlzaGVkLnZhbHVlID0gZmFsc2U7IC8vIOWQiOW5tuivt+axguWPguaVsO+8jOS/neeVmeS5i+WJjeWPguaVsAoKICAgICAgcmVxUGFyYW1zID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCByZXFQYXJhbXMpLCBmaWx0ZXJQYXJhbXMpOwogICAgICByZXFQYXJhbXMucGFnZSA9IDE7CiAgICAgIGdvb2RzTGlzdC52YWx1ZSA9IFtdOwogICAgfTsKCiAgICByZXR1cm4gewogICAgICBsb2FkaW5nOiBsb2FkaW5nLAogICAgICBmaW5pc2hlZDogZmluaXNoZWQsCiAgICAgIGdldERhdGE6IGdldERhdGEsCiAgICAgIGdvb2RzTGlzdDogZ29vZHNMaXN0LAogICAgICBzb3J0Q2hhbmdlOiBzb3J0Q2hhbmdlLAogICAgICBmaWx0ZXJDaGFuZ2U6IGZpbHRlckNoYW5nZQogICAgfTsKICB9Cn07"},{"version":3,"sources":["E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\src\\views\\category\\sub.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"sub-categroy\">\n    <div class=\"container\">\n      <!-- 面包屑 -->\n      <SubBread />\n      <!-- 筛选区 -->\n      <SubFilter @filter-change=\"filterChange\" />\n      <!-- 商品面板（排序+列表） -->\n      <div class=\"goods-list\">\n        <SubSort @sort-change=\"sortChange\" />\n        <ul>\n          <li v-for=\"goods in goodsList\" :key=\"goods.id\" >\n            <GoodsItem :goods=\"goods\" />\n          </li>\n        </ul>\n        <!-- 无限加载组件 -->\n        <XtxInfiniteLoading :loading=\"loading\" :finished=\"finished\" @infinite=\"getData\" />\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport SubBread from './components/sub-bread'\nimport SubFilter from './components/sub-filter'\nimport SubSort from './components/sub-sort'\nimport GoodsItem from './components/goods-item'\nimport { ref, watch } from 'vue'\nimport { findSubCategoryGoods } from '@/api/category'\nimport { useRoute } from 'vue-router'\nexport default {\n  name: 'SubCategory',\n  components: { SubBread, SubFilter, SubSort, GoodsItem },\n  setup () {\n    const route = useRoute()\n    // 加载中\n    const loading = ref(false)\n    // 是否加载完毕\n    const finished = ref(false)\n    // 商品列表数据\n    const goodsList = ref([])\n    // 请求参数\n    let reqParams = {\n      page: 1,\n      pageSize: 20\n    }\n    const getData = () => {\n      loading.value = true\n      // 设置二级分类的ID\n      reqParams.categoryId = route.params.id\n      findSubCategoryGoods(reqParams).then(({ result }) => {\n        // 获取数据成功\n        if (result.items.length) {\n          // 有数据就追加数据\n          goodsList.value.push(...result.items)\n          // 把page改成下一页页码\n          reqParams.page++\n        } else {\n          // 没有数据，代表加载完成\n          finished.value = true\n        }\n        loading.value = false\n      })\n    }\n    // 在更改了二级分类的时候需要重新加载数据\n    watch(() => route.params.id, (newVal) => {\n      if (newVal && `/category/sub/${newVal}` === route.path) {\n        finished.value = false\n        goodsList.value = [] // 导致列表空的，加载更多组件顶上来，进入可视区，区加载数据\n        reqParams = {\n          page: 1,\n          pageSize: 20\n        }\n      }\n    })\n    // 1. 更改排序组件的筛选数据，重新请求\n    const sortChange = (sortParams) => {\n      finished.value = false\n      // 合并请求参数，保留之前参数\n      reqParams = { ...reqParams, ...sortParams }\n      reqParams.page = 1\n      goodsList.value = []\n    }\n    // 2. 更改筛选组件的筛选数据，重新请求\n    const filterChange = (filterParams) => {\n      finished.value = false\n      // 合并请求参数，保留之前参数\n      reqParams = { ...reqParams, ...filterParams }\n      reqParams.page = 1\n      goodsList.value = []\n    }\n\n    return { loading, finished, getData, goodsList, sortChange, filterChange }\n  }\n}\n</script>\n<style scoped lang=\"less\">\n.goods-list {\n  background: #fff;\n  padding: 0 25px;\n  margin-top: 25px;\n  ul {\n    display: flex;\n    flex-wrap: wrap;\n    padding: 0 5px;\n    li {\n      margin-right: 20px;\n      margin-bottom: 20px;\n      &:nth-child(5n) {\n        margin-right: 0;\n      }\n    }\n  }\n}\n</style>\n"],"sourceRoot":""}]}