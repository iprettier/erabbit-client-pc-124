{"remainingRequest":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\babel-loader\\lib\\index.js!E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\vue-loader-v16\\dist\\templateLoader.js??ref--6!E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\src\\views\\category\\sub.vue?vue&type=template&id=4513316e&scoped=true","dependencies":[{"path":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\src\\views\\category\\sub.vue","mtime":1621243079000},{"path":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656924649801},{"path":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\babel-loader\\lib\\index.js","mtime":1656924651984},{"path":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":1656924654079},{"path":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656924649801},{"path":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1656924653036}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgY3JlYXRlQ29tbWVudFZOb2RlIGFzIF9jcmVhdGVDb21tZW50Vk5vZGUsIHJlc29sdmVDb21wb25lbnQgYXMgX3Jlc29sdmVDb21wb25lbnQsIGNyZWF0ZVZOb2RlIGFzIF9jcmVhdGVWTm9kZSwgcmVuZGVyTGlzdCBhcyBfcmVuZGVyTGlzdCwgRnJhZ21lbnQgYXMgX0ZyYWdtZW50LCBvcGVuQmxvY2sgYXMgX29wZW5CbG9jaywgY3JlYXRlQmxvY2sgYXMgX2NyZWF0ZUJsb2NrLCB3aXRoU2NvcGVJZCBhcyBfd2l0aFNjb3BlSWQsIHB1c2hTY29wZUlkIGFzIF9wdXNoU2NvcGVJZCwgcG9wU2NvcGVJZCBhcyBfcG9wU2NvcGVJZCB9IGZyb20gInZ1ZSI7Cgp2YXIgX3dpdGhJZCA9IC8qI19fUFVSRV9fKi9fd2l0aFNjb3BlSWQoImRhdGEtdi00NTEzMzE2ZSIpOwoKX3B1c2hTY29wZUlkKCJkYXRhLXYtNDUxMzMxNmUiKTsKCnZhciBfaG9pc3RlZF8xID0gewogIGNsYXNzOiAic3ViLWNhdGVncm95Igp9Owp2YXIgX2hvaXN0ZWRfMiA9IHsKICBjbGFzczogImNvbnRhaW5lciIKfTsKdmFyIF9ob2lzdGVkXzMgPSB7CiAgY2xhc3M6ICJnb29kcy1saXN0Igp9OwoKX3BvcFNjb3BlSWQoKTsKCmV4cG9ydCB2YXIgcmVuZGVyID0gLyojX19QVVJFX18qL193aXRoSWQoZnVuY3Rpb24gKF9jdHgsIF9jYWNoZSwgJHByb3BzLCAkc2V0dXAsICRkYXRhLCAkb3B0aW9ucykgewogIHZhciBfY29tcG9uZW50X1N1YkJyZWFkID0gX3Jlc29sdmVDb21wb25lbnQoIlN1YkJyZWFkIik7CgogIHZhciBfY29tcG9uZW50X1N1YkZpbHRlciA9IF9yZXNvbHZlQ29tcG9uZW50KCJTdWJGaWx0ZXIiKTsKCiAgdmFyIF9jb21wb25lbnRfU3ViU29ydCA9IF9yZXNvbHZlQ29tcG9uZW50KCJTdWJTb3J0Iik7CgogIHZhciBfY29tcG9uZW50X0dvb2RzSXRlbSA9IF9yZXNvbHZlQ29tcG9uZW50KCJHb29kc0l0ZW0iKTsKCiAgdmFyIF9jb21wb25lbnRfWHR4SW5maW5pdGVMb2FkaW5nID0gX3Jlc29sdmVDb21wb25lbnQoIlh0eEluZmluaXRlTG9hZGluZyIpOwoKICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlQmxvY2soImRpdiIsIF9ob2lzdGVkXzEsIFtfY3JlYXRlVk5vZGUoImRpdiIsIF9ob2lzdGVkXzIsIFtfY3JlYXRlQ29tbWVudFZOb2RlKCIg6Z2i5YyF5bGRICIpLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9TdWJCcmVhZCksIF9jcmVhdGVDb21tZW50Vk5vZGUoIiDnrZvpgInljLogIiksIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X1N1YkZpbHRlciwgewogICAgb25GaWx0ZXJDaGFuZ2U6ICRzZXR1cC5maWx0ZXJDaGFuZ2UKICB9LCBudWxsLCA4CiAgLyogUFJPUFMgKi8KICAsIFsib25GaWx0ZXJDaGFuZ2UiXSksIF9jcmVhdGVDb21tZW50Vk5vZGUoIiDllYblk4HpnaLmnb/vvIjmjpLluo8r5YiX6KGo77yJICIpLCBfY3JlYXRlVk5vZGUoImRpdiIsIF9ob2lzdGVkXzMsIFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9TdWJTb3J0LCB7CiAgICBvblNvcnRDaGFuZ2U6ICRzZXR1cC5zb3J0Q2hhbmdlCiAgfSwgbnVsbCwgOAogIC8qIFBST1BTICovCiAgLCBbIm9uU29ydENoYW5nZSJdKSwgX2NyZWF0ZVZOb2RlKCJ1bCIsIG51bGwsIFsoX29wZW5CbG9jayh0cnVlKSwgX2NyZWF0ZUJsb2NrKF9GcmFnbWVudCwgbnVsbCwgX3JlbmRlckxpc3QoJHNldHVwLmdvb2RzTGlzdCwgZnVuY3Rpb24gKGdvb2RzKSB7CiAgICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlQmxvY2soImxpIiwgewogICAgICBrZXk6IGdvb2RzLmlkCiAgICB9LCBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfR29vZHNJdGVtLCB7CiAgICAgIGdvb2RzOiBnb29kcwogICAgfSwgbnVsbCwgOAogICAgLyogUFJPUFMgKi8KICAgICwgWyJnb29kcyJdKV0pOwogIH0pLCAxMjgKICAvKiBLRVlFRF9GUkFHTUVOVCAqLwogICkpXSksIF9jcmVhdGVDb21tZW50Vk5vZGUoIiDml6DpmZDliqDovb3nu4Tku7YgIiksIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X1h0eEluZmluaXRlTG9hZGluZywgewogICAgbG9hZGluZzogJHNldHVwLmxvYWRpbmcsCiAgICBmaW5pc2hlZDogJHNldHVwLmZpbmlzaGVkLAogICAgb25JbmZpbml0ZTogJHNldHVwLmdldERhdGEKICB9LCBudWxsLCA4CiAgLyogUFJPUFMgKi8KICAsIFsibG9hZGluZyIsICJmaW5pc2hlZCIsICJvbkluZmluaXRlIl0pXSldKV0pOwp9KTs="},{"version":3,"sources":["E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\src\\views\\category\\sub.vue"],"names":[],"mappings":";;;;;;;AACO,EAAA,KAAK,EAAC;;;AACJ,EAAA,KAAK,EAAC;;;AAMJ,EAAA,KAAK,EAAC;;;;;;;;;;;;;;;;uBAPf,YAAA,CAkBM,KAlBN,EAAA,UAAA,EAkBM,CAjBJ,YAAA,CAgBM,KAhBN,EAAA,UAAA,EAgBM,CAfJ,mBAAA,CAAA,OAAA,CAeI,EAdJ,YAAA,CAAY,mBAAZ,CAcI,EAbJ,mBAAA,CAAA,OAAA,CAaI,EAZJ,YAAA,CAA2C,oBAA3C,EAA2C;AAA/B,IAAA,cAAa,EAAE,MAAA,CAAA;AAAgB,GAA3C,EAAuC,IAAvC,EAAuC;AAAA;AAAvC,IAAuC,CAAA,gBAAA,CAAvC,CAYI,EAXJ,mBAAA,CAAA,eAAA,CAWI,EAVJ,YAAA,CASM,KATN,EAAA,UAAA,EASM,CARJ,YAAA,CAAqC,kBAArC,EAAqC;AAA3B,IAAA,YAAW,EAAE,MAAA,CAAA;AAAc,GAArC,EAAiC,IAAjC,EAAiC;AAAA;AAAjC,IAAiC,CAAA,cAAA,CAAjC,CAQI,EAPJ,YAAA,CAIK,IAJL,EAIK,IAJL,EAIK,E,kBAHH,YAAA,CAEK,SAFL,EAEK,IAFL,EAEK,WAAA,CAFe,MAAA,CAAA,SAEf,EAFwB,UAAlB,KAAkB,EAAb;yBAAhB,YAAA,CAEK,IAFL,EAEK;AAF2B,MAAA,GAAG,EAAE,KAAK,CAAC;AAEtC,KAFL,E,CACE,YAAA,CAA4B,oBAA5B,EAA4B;AAAhB,MAAA,KAAK,EAAE;AAAS,KAA5B,EAAwB,IAAxB,EAAwB;AAAA;AAAxB,MAAwB,CAAA,OAAA,CAAxB,C,CADF,C;GAEK,CAFL,E;;AAAA,GAGG,EAJL,CAOI,EAFJ,mBAAA,CAAA,UAAA,CAEI,EADJ,YAAA,CAAkF,6BAAlF,EAAkF;AAA7D,IAAA,OAAO,EAAE,MAAA,CAAA,OAAoD;AAA1C,IAAA,QAAQ,EAAE,MAAA,CAAA,QAAgC;AAArB,IAAA,UAAQ,EAAE,MAAA,CAAA;AAAW,GAAlF,E,IAAA,E;;AAAA,I,qCAAA,CACI,CATN,CAUI,CAhBN,CAiBI,CAlBN,C","sourcesContent":["<template>\n  <div class=\"sub-categroy\">\n    <div class=\"container\">\n      <!-- 面包屑 -->\n      <SubBread />\n      <!-- 筛选区 -->\n      <SubFilter @filter-change=\"filterChange\" />\n      <!-- 商品面板（排序+列表） -->\n      <div class=\"goods-list\">\n        <SubSort @sort-change=\"sortChange\" />\n        <ul>\n          <li v-for=\"goods in goodsList\" :key=\"goods.id\" >\n            <GoodsItem :goods=\"goods\" />\n          </li>\n        </ul>\n        <!-- 无限加载组件 -->\n        <XtxInfiniteLoading :loading=\"loading\" :finished=\"finished\" @infinite=\"getData\" />\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport SubBread from './components/sub-bread'\nimport SubFilter from './components/sub-filter'\nimport SubSort from './components/sub-sort'\nimport GoodsItem from './components/goods-item'\nimport { ref, watch } from 'vue'\nimport { findSubCategoryGoods } from '@/api/category'\nimport { useRoute } from 'vue-router'\nexport default {\n  name: 'SubCategory',\n  components: { SubBread, SubFilter, SubSort, GoodsItem },\n  setup () {\n    const route = useRoute()\n    // 加载中\n    const loading = ref(false)\n    // 是否加载完毕\n    const finished = ref(false)\n    // 商品列表数据\n    const goodsList = ref([])\n    // 请求参数\n    let reqParams = {\n      page: 1,\n      pageSize: 20\n    }\n    const getData = () => {\n      loading.value = true\n      // 设置二级分类的ID\n      reqParams.categoryId = route.params.id\n      findSubCategoryGoods(reqParams).then(({ result }) => {\n        // 获取数据成功\n        if (result.items.length) {\n          // 有数据就追加数据\n          goodsList.value.push(...result.items)\n          // 把page改成下一页页码\n          reqParams.page++\n        } else {\n          // 没有数据，代表加载完成\n          finished.value = true\n        }\n        loading.value = false\n      })\n    }\n    // 在更改了二级分类的时候需要重新加载数据\n    watch(() => route.params.id, (newVal) => {\n      if (newVal && `/category/sub/${newVal}` === route.path) {\n        finished.value = false\n        goodsList.value = [] // 导致列表空的，加载更多组件顶上来，进入可视区，区加载数据\n        reqParams = {\n          page: 1,\n          pageSize: 20\n        }\n      }\n    })\n    // 1. 更改排序组件的筛选数据，重新请求\n    const sortChange = (sortParams) => {\n      finished.value = false\n      // 合并请求参数，保留之前参数\n      reqParams = { ...reqParams, ...sortParams }\n      reqParams.page = 1\n      goodsList.value = []\n    }\n    // 2. 更改筛选组件的筛选数据，重新请求\n    const filterChange = (filterParams) => {\n      finished.value = false\n      // 合并请求参数，保留之前参数\n      reqParams = { ...reqParams, ...filterParams }\n      reqParams.page = 1\n      goodsList.value = []\n    }\n\n    return { loading, finished, getData, goodsList, sortChange, filterChange }\n  }\n}\n</script>\n<style scoped lang=\"less\">\n.goods-list {\n  background: #fff;\n  padding: 0 25px;\n  margin-top: 25px;\n  ul {\n    display: flex;\n    flex-wrap: wrap;\n    padding: 0 5px;\n    li {\n      margin-right: 20px;\n      margin-bottom: 20px;\n      &:nth-child(5n) {\n        margin-right: 0;\n      }\n    }\n  }\n}\n</style>\n"],"sourceRoot":""}]}