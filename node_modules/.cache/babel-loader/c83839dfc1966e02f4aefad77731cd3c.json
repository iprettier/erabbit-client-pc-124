{"remainingRequest":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\thread-loader\\dist\\cjs.js!F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\babel-loader\\lib\\index.js!F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\vue-loader-v16\\dist\\templateLoader.js??ref--6!F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!F:\\代码\\Vue 代码\\erabbit-client-pc-124\\src\\views\\cart\\components\\cart-sku.vue?vue&type=template&id=f7d5aa52&scoped=true","dependencies":[{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\src\\views\\cart\\components\\cart-sku.vue","mtime":1621243079000},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656924649801},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1656924649783},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\babel-loader\\lib\\index.js","mtime":1656924651984},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":1656924654079},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656924649801},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1656924653036}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgdG9EaXNwbGF5U3RyaW5nIGFzIF90b0Rpc3BsYXlTdHJpbmcsIGNyZWF0ZVZOb2RlIGFzIF9jcmVhdGVWTm9kZSwgb3BlbkJsb2NrIGFzIF9vcGVuQmxvY2ssIGNyZWF0ZUJsb2NrIGFzIF9jcmVhdGVCbG9jaywgY3JlYXRlQ29tbWVudFZOb2RlIGFzIF9jcmVhdGVDb21tZW50Vk5vZGUsIHJlc29sdmVDb21wb25lbnQgYXMgX3Jlc29sdmVDb21wb25lbnQsIGNyZWF0ZVRleHRWTm9kZSBhcyBfY3JlYXRlVGV4dFZOb2RlLCB3aXRoQ3R4IGFzIF93aXRoQ3R4LCB3aXRoU2NvcGVJZCBhcyBfd2l0aFNjb3BlSWQsIHB1c2hTY29wZUlkIGFzIF9wdXNoU2NvcGVJZCwgcG9wU2NvcGVJZCBhcyBfcG9wU2NvcGVJZCB9IGZyb20gInZ1ZSI7Cgp2YXIgX3dpdGhJZCA9IC8qI19fUFVSRV9fKi9fd2l0aFNjb3BlSWQoImRhdGEtdi1mN2Q1YWE1MiIpOwoKX3B1c2hTY29wZUlkKCJkYXRhLXYtZjdkNWFhNTIiKTsKCnZhciBfaG9pc3RlZF8xID0gewogIGNsYXNzOiAiY2FydC1za3UiLAogIHJlZjogInRhcmdldCIKfTsKdmFyIF9ob2lzdGVkXzIgPSB7CiAgY2xhc3M6ICJlbGxpcHNpcyIKfTsKCnZhciBfaG9pc3RlZF8zID0gLyojX19QVVJFX18qL19jcmVhdGVWTm9kZSgiaSIsIHsKICBjbGFzczogImljb25mb250IGljb24tYW5nbGUtZG93biIKfSwgbnVsbCwgLTEpOwoKdmFyIF9ob2lzdGVkXzQgPSB7CiAga2V5OiAwLAogIGNsYXNzOiAibGF5ZXIiCn07CnZhciBfaG9pc3RlZF81ID0gewogIGtleTogMCwKICBjbGFzczogImxvYWRpbmciCn07Cgp2YXIgX2hvaXN0ZWRfNiA9IC8qI19fUFVSRV9fKi9fY3JlYXRlVGV4dFZOb2RlKCLnoa7orqQiKTsKCl9wb3BTY29wZUlkKCk7CgpleHBvcnQgdmFyIHJlbmRlciA9IC8qI19fUFVSRV9fKi9fd2l0aElkKGZ1bmN0aW9uIChfY3R4LCBfY2FjaGUsICRwcm9wcywgJHNldHVwLCAkZGF0YSwgJG9wdGlvbnMpIHsKICB2YXIgX2NvbXBvbmVudF9Hb29kc1NrdSA9IF9yZXNvbHZlQ29tcG9uZW50KCJHb29kc1NrdSIpOwoKICB2YXIgX2NvbXBvbmVudF9YdHhCdXR0b24gPSBfcmVzb2x2ZUNvbXBvbmVudCgiWHR4QnV0dG9uIik7CgogIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jaygiZGl2IiwgX2hvaXN0ZWRfMSwgW19jcmVhdGVWTm9kZSgiZGl2IiwgewogICAgY2xhc3M6ICJhdHRycyIsCiAgICBvbkNsaWNrOiBfY2FjaGVbMV0gfHwgKF9jYWNoZVsxXSA9IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgcmV0dXJuICRzZXR1cC50b2dnbGUoKTsKICAgIH0pCiAgfSwgW19jcmVhdGVWTm9kZSgic3BhbiIsIF9ob2lzdGVkXzIsIF90b0Rpc3BsYXlTdHJpbmcoJHByb3BzLmF0dHJzVGV4dCksIDEpLCBfaG9pc3RlZF8zXSksICRzZXR1cC52aXNpYmxlID8gKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKCJkaXYiLCBfaG9pc3RlZF80LCBbJHNldHVwLmxvYWRpbmcgPyAoX29wZW5CbG9jaygpLCBfY3JlYXRlQmxvY2soImRpdiIsIF9ob2lzdGVkXzUpKSA6IChfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jayhfY29tcG9uZW50X0dvb2RzU2t1LCB7CiAgICBrZXk6IDEsCiAgICBvbkNoYW5nZTogJHNldHVwLmNoYW5nZVNrdSwKICAgIHNrdUlkOiAkcHJvcHMuc2t1SWQsCiAgICBnb29kczogJHNldHVwLmdvb2RzCiAgfSwgbnVsbCwgOCwgWyJvbkNoYW5nZSIsICJza3VJZCIsICJnb29kcyJdKSksICEkc2V0dXAubG9hZGluZyA/IChfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jayhfY29tcG9uZW50X1h0eEJ1dHRvbiwgewogICAga2V5OiAyLAogICAgb25DbGljazogJHNldHVwLnN1Ym1pdCwKICAgIHR5cGU6ICJwcmltYXJ5IiwKICAgIHNpemU6ICJtaW5pIiwKICAgIHN0eWxlOiB7CiAgICAgICJtYXJnaW4tbGVmdCI6ICI2MHB4IgogICAgfQogIH0sIHsKICAgIGRlZmF1bHQ6IF93aXRoSWQoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gW19ob2lzdGVkXzZdOwogICAgfSksCiAgICBfOiAxCiAgfSwgOCwgWyJvbkNsaWNrIl0pKSA6IF9jcmVhdGVDb21tZW50Vk5vZGUoIiIsIHRydWUpXSkpIDogX2NyZWF0ZUNvbW1lbnRWTm9kZSgiIiwgdHJ1ZSldLCA1MTIpOwp9KTs="},{"version":3,"sources":["F:\\代码\\Vue 代码\\erabbit-client-pc-124\\src\\views\\cart\\components\\cart-sku.vue"],"names":[],"mappings":";;;;;;;AACO,EAAA,KAAK,EAAC,U;AAAW,EAAA,GAAG,EAAC;;;AAEhB,EAAA,KAAK,EAAC;;;8BACZ,YAAA,CAAwC,GAAxC,EAAwC;AAArC,EAAA,KAAK,EAAC;AAA+B,CAAxC,EAAmC,IAAnC,EAAmC,CAAA,CAAnC,C;;;;AAEG,EAAA,KAAK,EAAC;;;;AACW,EAAA,KAAK,EAAC;;;+CAEqE,I;;;;;;;;;uBARnG,YAAA,CAUM,KAVN,EAAA,UAAA,EAUM,CATJ,YAAA,CAGM,KAHN,EAGM;AAHD,IAAA,KAAK,EAAC,OAGL;AAHc,IAAA,OAAK,EAAA,MAAA,CAAA,CAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,GAAA,UAAA,MAAA;AAAA,aAAE,MAAA,CAAA,MAAA,EAAF;AAAA,KAAA;AAGnB,GAHN,E,CACE,YAAA,CAA2C,MAA3C,EAAA,UAAA,EAA2C,gBAAA,CAAlB,MAAA,CAAA,SAAkB,CAA3C,EAAkC,CAAlC,C,EACA,U,CAFF,CASI,EALqB,MAAA,CAAA,O,kBAAzB,YAAA,CAIM,KAJN,EAAA,UAAA,EAIM,CAHO,MAAA,CAAA,O,kBAAX,YAAA,CAA0C,KAA1C,EAAA,UAAA,C,mBACA,YAAA,CAAqE,mBAArE,EAAqE;UAAA;AAA1D,IAAA,QAAM,EAAE,MAAA,CAAA,SAAkD;AAAtC,IAAA,KAAK,EAAE,MAAA,CAAA,KAA+B;AAAhB,IAAA,KAAK,EAAE,MAAA,CAAA;AAAS,GAArE,E,IAAA,E,CAAA,E,8BAAA,C,CAEI,E,CAD8B,MAAA,CAAA,O,kBAAlC,YAAA,CAA6G,oBAA7G,EAA6G;UAAA;AAAjG,IAAA,OAAK,EAAE,MAAA,CAAA,MAA0F;AAAlE,IAAA,IAAI,EAAC,SAA6D;AAAnD,IAAA,IAAI,EAAC,MAA8C;AAAvC,IAAA,KAAwB,EAAxB;AAAA,qBAAA;AAAA;AAAuC,GAA7G,E;qBAA+F;AAAA,aAAE,C,UAAA,CAAF;AAAA,K;;GAA/F,E,CAAA,E,WAAA,C,iCACI,CAJN,C,iCAKI,CAVN,E,GAAA,C","sourcesContent":["<template>\n  <div class=\"cart-sku\" ref=\"target\">\n    <div class=\"attrs\" @click=\"toggle()\">\n      <span class=\"ellipsis\">{{attrsText}}</span>\n      <i class=\"iconfont icon-angle-down\"></i>\n    </div>\n    <div class=\"layer\" v-if=\"visible\">\n      <div v-if=\"loading\" class=\"loading\"></div>\n      <GoodsSku @change=\"changeSku\" :skuId=\"skuId\" v-else :goods=\"goods\" />\n      <XtxButton @click=\"submit\" v-if=\"!loading\" type=\"primary\" size=\"mini\" style=\"margin-left:60px\">确认</XtxButton>\n    </div>\n  </div>\n</template>\n<script>\nimport { ref } from 'vue'\nimport { onClickOutside } from '@vueuse/core'\nimport { getGoodsSku } from '@/api/cart'\nimport GoodsSku from '@/views/goods/components/goods-sku'\nexport default {\n  name: 'CartSku',\n  components: { GoodsSku },\n  props: {\n    attrsText: {\n      type: String,\n      default: ''\n    },\n    skuId: {\n      type: String,\n      default: ''\n    }\n  },\n  setup (props, { emit }) {\n    const visible = ref(false)\n    const goods = ref(null)\n    const loading = ref(false)\n    // 打开\n    const open = () => {\n      visible.value = true\n      // 获取商品数据（specs,skus）\n      loading.value = true\n      getGoodsSku(props.skuId).then(data => {\n        goods.value = data.result\n        loading.value = false\n      })\n    }\n    // 关闭\n    const close = () => {\n      visible.value = false\n    }\n    // 切换\n    const toggle = () => {\n      visible.value ? close() : open()\n    }\n    // 点击其他地方关闭\n    const target = ref(null)\n    onClickOutside(target, () => {\n      close()\n    })\n\n    // 监听sku改变的函数，记录sku信息\n    const currSku = ref(null)\n    const changeSku = (sku) => {\n      currSku.value = sku\n    }\n\n    // 点击确认的时候，更改后的sku信息提交给父组件（购物车组件）\n    const submit = () => {\n      // 当你currSku有值，且skuId和默认的skuId不同\n      if (currSku.value && currSku.value.skuId && currSku.value.skuId !== props.skuId) {\n        emit('change', currSku.value)\n        close()\n      }\n    }\n\n    return { visible, toggle, target, goods, loading, changeSku, submit }\n  }\n}\n</script>\n<style scoped lang=\"less\">\n.cart-sku {\n  height: 28px;\n  border: 1px solid #f5f5f5;\n  padding: 0 6px;\n  position: relative;\n  margin-top: 10px;\n  display:inline-block;\n  .attrs {\n    line-height: 24px;\n    display: flex;\n    span {\n      max-width: 230px;\n      font-size: 14px;\n      color: #999;\n    }\n    i {\n      margin-left: 5px;\n      font-size: 14px;\n    }\n  }\n  .layer {\n    position: absolute;\n    left: -1px;\n    top: 40px;\n    z-index: 10;\n    width: 400px;\n    border: 1px solid @xtxColor;\n    box-shadow: 2px 2px 4px lighten(@xtxColor,50%);\n    background: #fff;\n    border-radius: 4px;\n    font-size: 14px;\n    padding: 20px;\n    &::before {\n      content: \"\";\n      width: 12px;\n      height: 12px;\n      border-left: 1px solid @xtxColor;\n      border-top: 1px solid @xtxColor;\n      position: absolute;\n      left: 12px;\n      top: -8px;\n      background: #fff;\n      transform: scale(.8,1) rotate(45deg);\n    }\n    .loading {\n      height: 224px;\n      background: url(../../../assets/images/loading.gif) no-repeat center;\n    }\n  }\n}\n</style>\n"],"sourceRoot":""}]}