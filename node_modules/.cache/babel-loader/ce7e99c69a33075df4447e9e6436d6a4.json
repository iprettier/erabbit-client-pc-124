{"remainingRequest":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\babel-loader\\lib\\index.js!E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\src\\views\\cart\\components\\cart-sku.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\src\\views\\cart\\components\\cart-sku.vue","mtime":1621243079000},{"path":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656924649801},{"path":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\babel-loader\\lib\\index.js","mtime":1656924651984},{"path":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656924649801},{"path":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1656924653036}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgcmVmIH0gZnJvbSAndnVlJzsKaW1wb3J0IHsgb25DbGlja091dHNpZGUgfSBmcm9tICdAdnVldXNlL2NvcmUnOwppbXBvcnQgeyBnZXRHb29kc1NrdSB9IGZyb20gJ0AvYXBpL2NhcnQnOwppbXBvcnQgR29vZHNTa3UgZnJvbSAnQC92aWV3cy9nb29kcy9jb21wb25lbnRzL2dvb2RzLXNrdSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQ2FydFNrdScsCiAgY29tcG9uZW50czogewogICAgR29vZHNTa3U6IEdvb2RzU2t1CiAgfSwKICBwcm9wczogewogICAgYXR0cnNUZXh0OiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJycKICAgIH0sCiAgICBza3VJZDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICcnCiAgICB9CiAgfSwKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAocHJvcHMsIF9yZWYpIHsKICAgIHZhciBlbWl0ID0gX3JlZi5lbWl0OwogICAgdmFyIHZpc2libGUgPSByZWYoZmFsc2UpOwogICAgdmFyIGdvb2RzID0gcmVmKG51bGwpOwogICAgdmFyIGxvYWRpbmcgPSByZWYoZmFsc2UpOyAvLyDmiZPlvIAKCiAgICB2YXIgb3BlbiA9IGZ1bmN0aW9uIG9wZW4oKSB7CiAgICAgIHZpc2libGUudmFsdWUgPSB0cnVlOyAvLyDojrflj5bllYblk4HmlbDmja7vvIhzcGVjcyxza3Vz77yJCgogICAgICBsb2FkaW5nLnZhbHVlID0gdHJ1ZTsKICAgICAgZ2V0R29vZHNTa3UocHJvcHMuc2t1SWQpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICBnb29kcy52YWx1ZSA9IGRhdGEucmVzdWx0OwogICAgICAgIGxvYWRpbmcudmFsdWUgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9OyAvLyDlhbPpl60KCgogICAgdmFyIGNsb3NlID0gZnVuY3Rpb24gY2xvc2UoKSB7CiAgICAgIHZpc2libGUudmFsdWUgPSBmYWxzZTsKICAgIH07IC8vIOWIh+aNogoKCiAgICB2YXIgdG9nZ2xlID0gZnVuY3Rpb24gdG9nZ2xlKCkgewogICAgICB2aXNpYmxlLnZhbHVlID8gY2xvc2UoKSA6IG9wZW4oKTsKICAgIH07IC8vIOeCueWHu+WFtuS7luWcsOaWueWFs+mXrQoKCiAgICB2YXIgdGFyZ2V0ID0gcmVmKG51bGwpOwogICAgb25DbGlja091dHNpZGUodGFyZ2V0LCBmdW5jdGlvbiAoKSB7CiAgICAgIGNsb3NlKCk7CiAgICB9KTsgLy8g55uR5ZCsc2t15pS55Y+Y55qE5Ye95pWw77yM6K6w5b2Vc2t15L+h5oGvCgogICAgdmFyIGN1cnJTa3UgPSByZWYobnVsbCk7CgogICAgdmFyIGNoYW5nZVNrdSA9IGZ1bmN0aW9uIGNoYW5nZVNrdShza3UpIHsKICAgICAgY3VyclNrdS52YWx1ZSA9IHNrdTsKICAgIH07IC8vIOeCueWHu+ehruiupOeahOaXtuWAme+8jOabtOaUueWQjueahHNrdeS/oeaBr+aPkOS6pOe7meeItue7hOS7tu+8iOi0reeJqei9pue7hOS7tu+8iQoKCiAgICB2YXIgc3VibWl0ID0gZnVuY3Rpb24gc3VibWl0KCkgewogICAgICAvLyDlvZPkvaBjdXJyU2t15pyJ5YC877yM5LiUc2t1SWTlkozpu5jorqTnmoRza3VJZOS4jeWQjAogICAgICBpZiAoY3VyclNrdS52YWx1ZSAmJiBjdXJyU2t1LnZhbHVlLnNrdUlkICYmIGN1cnJTa3UudmFsdWUuc2t1SWQgIT09IHByb3BzLnNrdUlkKSB7CiAgICAgICAgZW1pdCgnY2hhbmdlJywgY3VyclNrdS52YWx1ZSk7CiAgICAgICAgY2xvc2UoKTsKICAgICAgfQogICAgfTsKCiAgICByZXR1cm4gewogICAgICB2aXNpYmxlOiB2aXNpYmxlLAogICAgICB0b2dnbGU6IHRvZ2dsZSwKICAgICAgdGFyZ2V0OiB0YXJnZXQsCiAgICAgIGdvb2RzOiBnb29kcywKICAgICAgbG9hZGluZzogbG9hZGluZywKICAgICAgY2hhbmdlU2t1OiBjaGFuZ2VTa3UsCiAgICAgIHN1Ym1pdDogc3VibWl0CiAgICB9OwogIH0KfTs="},{"version":3,"sources":["E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\src\\views\\cart\\components\\cart-sku.vue"],"names":[],"mappings":"AAcA,SAAS,GAAT,QAAoB,KAApB;AACA,SAAS,cAAT,QAA+B,cAA/B;AACA,SAAS,WAAT,QAA4B,YAA5B;AACA,OAAO,QAAP,MAAqB,oCAArB;AACA,eAAe;AACb,EAAA,IAAI,EAAE,SADO;AAEb,EAAA,UAAU,EAAE;AAAE,IAAA,QAAO,EAAP;AAAF,GAFC;AAGb,EAAA,KAAK,EAAE;AACL,IAAA,SAAS,EAAE;AACT,MAAA,IAAI,EAAE,MADG;AAET,MAAA,OAAO,EAAE;AAFA,KADN;AAKL,IAAA,KAAK,EAAE;AACL,MAAA,IAAI,EAAE,MADD;AAEL,MAAA,OAAO,EAAE;AAFJ;AALF,GAHM;AAab,EAAA,KAba,iBAaN,KAbM,QAaW;AAAA,QAAR,IAAQ,QAAR,IAAQ;AACtB,QAAM,OAAM,GAAI,GAAG,CAAC,KAAD,CAAnB;AACA,QAAM,KAAI,GAAI,GAAG,CAAC,IAAD,CAAjB;AACA,QAAM,OAAM,GAAI,GAAG,CAAC,KAAD,CAAnB,CAHsB,CAItB;;AACA,QAAM,IAAG,GAAI,SAAP,IAAO,GAAM;AACjB,MAAA,OAAO,CAAC,KAAR,GAAgB,IAAhB,CADiB,CAEjB;;AACA,MAAA,OAAO,CAAC,KAAR,GAAgB,IAAhB;AACA,MAAA,WAAW,CAAC,KAAK,CAAC,KAAP,CAAX,CAAyB,IAAzB,CAA8B,UAAA,IAAG,EAAK;AACpC,QAAA,KAAK,CAAC,KAAN,GAAc,IAAI,CAAC,MAAnB;AACA,QAAA,OAAO,CAAC,KAAR,GAAgB,KAAhB;AACD,OAHD;AAIF,KARA,CALsB,CActB;;;AACA,QAAM,KAAI,GAAI,SAAR,KAAQ,GAAM;AAClB,MAAA,OAAO,CAAC,KAAR,GAAgB,KAAhB;AACF,KAFA,CAfsB,CAkBtB;;;AACA,QAAM,MAAK,GAAI,SAAT,MAAS,GAAM;AACnB,MAAA,OAAO,CAAC,KAAR,GAAgB,KAAK,EAArB,GAA0B,IAAI,EAA9B;AACF,KAFA,CAnBsB,CAsBtB;;;AACA,QAAM,MAAK,GAAI,GAAG,CAAC,IAAD,CAAlB;AACA,IAAA,cAAc,CAAC,MAAD,EAAS,YAAM;AAC3B,MAAA,KAAK;AACN,KAFa,CAAd,CAxBsB,CA4BtB;;AACA,QAAM,OAAM,GAAI,GAAG,CAAC,IAAD,CAAnB;;AACA,QAAM,SAAQ,GAAI,SAAZ,SAAY,CAAC,GAAD,EAAS;AACzB,MAAA,OAAO,CAAC,KAAR,GAAgB,GAAhB;AACF,KAFA,CA9BsB,CAkCtB;;;AACA,QAAM,MAAK,GAAI,SAAT,MAAS,GAAM;AACnB;AACA,UAAI,OAAO,CAAC,KAAR,IAAiB,OAAO,CAAC,KAAR,CAAc,KAA/B,IAAwC,OAAO,CAAC,KAAR,CAAc,KAAd,KAAwB,KAAK,CAAC,KAA1E,EAAiF;AAC/E,QAAA,IAAI,CAAC,QAAD,EAAW,OAAO,CAAC,KAAnB,CAAJ;AACA,QAAA,KAAK;AACP;AACF,KANA;;AAQA,WAAO;AAAE,MAAA,OAAO,EAAP,OAAF;AAAW,MAAA,MAAM,EAAN,MAAX;AAAmB,MAAA,MAAM,EAAN,MAAnB;AAA2B,MAAA,KAAK,EAAL,KAA3B;AAAkC,MAAA,OAAO,EAAP,OAAlC;AAA2C,MAAA,SAAS,EAAT,SAA3C;AAAsD,MAAA,MAAK,EAAL;AAAtD,KAAP;AACF;AAzDa,CAAf","sourcesContent":["<template>\n  <div class=\"cart-sku\" ref=\"target\">\n    <div class=\"attrs\" @click=\"toggle()\">\n      <span class=\"ellipsis\">{{attrsText}}</span>\n      <i class=\"iconfont icon-angle-down\"></i>\n    </div>\n    <div class=\"layer\" v-if=\"visible\">\n      <div v-if=\"loading\" class=\"loading\"></div>\n      <GoodsSku @change=\"changeSku\" :skuId=\"skuId\" v-else :goods=\"goods\" />\n      <XtxButton @click=\"submit\" v-if=\"!loading\" type=\"primary\" size=\"mini\" style=\"margin-left:60px\">确认</XtxButton>\n    </div>\n  </div>\n</template>\n<script>\nimport { ref } from 'vue'\nimport { onClickOutside } from '@vueuse/core'\nimport { getGoodsSku } from '@/api/cart'\nimport GoodsSku from '@/views/goods/components/goods-sku'\nexport default {\n  name: 'CartSku',\n  components: { GoodsSku },\n  props: {\n    attrsText: {\n      type: String,\n      default: ''\n    },\n    skuId: {\n      type: String,\n      default: ''\n    }\n  },\n  setup (props, { emit }) {\n    const visible = ref(false)\n    const goods = ref(null)\n    const loading = ref(false)\n    // 打开\n    const open = () => {\n      visible.value = true\n      // 获取商品数据（specs,skus）\n      loading.value = true\n      getGoodsSku(props.skuId).then(data => {\n        goods.value = data.result\n        loading.value = false\n      })\n    }\n    // 关闭\n    const close = () => {\n      visible.value = false\n    }\n    // 切换\n    const toggle = () => {\n      visible.value ? close() : open()\n    }\n    // 点击其他地方关闭\n    const target = ref(null)\n    onClickOutside(target, () => {\n      close()\n    })\n\n    // 监听sku改变的函数，记录sku信息\n    const currSku = ref(null)\n    const changeSku = (sku) => {\n      currSku.value = sku\n    }\n\n    // 点击确认的时候，更改后的sku信息提交给父组件（购物车组件）\n    const submit = () => {\n      // 当你currSku有值，且skuId和默认的skuId不同\n      if (currSku.value && currSku.value.skuId && currSku.value.skuId !== props.skuId) {\n        emit('change', currSku.value)\n        close()\n      }\n    }\n\n    return { visible, toggle, target, goods, loading, changeSku, submit }\n  }\n}\n</script>\n<style scoped lang=\"less\">\n.cart-sku {\n  height: 28px;\n  border: 1px solid #f5f5f5;\n  padding: 0 6px;\n  position: relative;\n  margin-top: 10px;\n  display:inline-block;\n  .attrs {\n    line-height: 24px;\n    display: flex;\n    span {\n      max-width: 230px;\n      font-size: 14px;\n      color: #999;\n    }\n    i {\n      margin-left: 5px;\n      font-size: 14px;\n    }\n  }\n  .layer {\n    position: absolute;\n    left: -1px;\n    top: 40px;\n    z-index: 10;\n    width: 400px;\n    border: 1px solid @xtxColor;\n    box-shadow: 2px 2px 4px lighten(@xtxColor,50%);\n    background: #fff;\n    border-radius: 4px;\n    font-size: 14px;\n    padding: 20px;\n    &::before {\n      content: \"\";\n      width: 12px;\n      height: 12px;\n      border-left: 1px solid @xtxColor;\n      border-top: 1px solid @xtxColor;\n      position: absolute;\n      left: 12px;\n      top: -8px;\n      background: #fff;\n      transform: scale(.8,1) rotate(45deg);\n    }\n    .loading {\n      height: 224px;\n      background: url(../../../assets/images/loading.gif) no-repeat center;\n    }\n  }\n}\n</style>\n"],"sourceRoot":""}]}