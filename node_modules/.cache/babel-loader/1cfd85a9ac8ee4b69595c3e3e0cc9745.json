{"remainingRequest":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\babel-loader\\lib\\index.js!E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\src\\views\\home\\components\\home-category.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\src\\views\\home\\components\\home-category.vue","mtime":1621243079000},{"path":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656924649801},{"path":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\babel-loader\\lib\\index.js","mtime":1656924651984},{"path":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656924649801},{"path":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1656924653036}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCB7IGNvbXB1dGVkLCByZWFjdGl2ZSwgcmVmIH0gZnJvbSAndnVlJzsKaW1wb3J0IHsgdXNlU3RvcmUgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHsgZmluZEJyYW5kIH0gZnJvbSAnQC9hcGkvaG9tZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnSG9tZUNhdGVnb3J5JywKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAoKSB7CiAgICB2YXIgc3RvcmUgPSB1c2VTdG9yZSgpOyAvLyDmnIDnu4jkvb/nlKjnmoTmlbDmja4gPSA55Liq5YiG57G7KCkgKyAx5Liq5ZOB54mMCgogICAgdmFyIGJyYW5kID0gcmVhY3RpdmUoewogICAgICBpZDogJ2JyYW5kJywKICAgICAgbmFtZTogJ+WTgeeJjCcsCiAgICAgIGNoaWxkcmVuOiBbewogICAgICAgIGlkOiAnYnJhbmQtY2hpbGRyZW4nLAogICAgICAgIG5hbWU6ICflk4HniYzmjqjojZAnCiAgICAgIH1dLAogICAgICAvLyDlk4HniYzliJfooagKICAgICAgYnJhbmRzOiBbXQogICAgfSk7CiAgICB2YXIgbWVudUxpc3QgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIC8vIOW+l+WIsDnkuKrliIbnsbvliIfmr4/kuKrkuIDnuqfliIbnsbvkuIvnmoTlrZDliIbnsbvlj6rmnInkuKTkuKoKICAgICAgdmFyIGxpc3QgPSBzdG9yZS5zdGF0ZS5jYXRlZ29yeS5saXN0Lm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBpZDogaXRlbS5pZCwKICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZSwKICAgICAgICAgIGNoaWxkcmVuOiBpdGVtLmNoaWxkcmVuICYmIGl0ZW0uY2hpbGRyZW4uc2xpY2UoMCwgMiksCiAgICAgICAgICBnb29kczogaXRlbS5nb29kcwogICAgICAgIH07CiAgICAgIH0pOwogICAgICBsaXN0LnB1c2goYnJhbmQpOwogICAgICByZXR1cm4gbGlzdDsKICAgIH0pOyAvLyDlvpfliLDlvLnlh7rlsYLnmoTmjqjojZDllYblk4HmlbDmja4KCiAgICB2YXIgY2F0ZWdvcnlJZCA9IHJlZihudWxsKTsKICAgIHZhciBjdXJyQ2F0ZWdvcnkgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBtZW51TGlzdC52YWx1ZS5maW5kKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIGl0ZW0uaWQgPT09IGNhdGVnb3J5SWQudmFsdWU7CiAgICAgIH0pOwogICAgfSk7IC8vIOiOt+WPluWTgeeJjOaVsOaNru+8jOWwvemHj+S4jeeUqOS9v+eUqGFzeW5j5YaNc2V0dXDkuIoKCiAgICBmaW5kQnJhbmQoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIGJyYW5kLmJyYW5kcyA9IGRhdGEucmVzdWx0OwogICAgfSk7CiAgICByZXR1cm4gewogICAgICBtZW51TGlzdDogbWVudUxpc3QsCiAgICAgIGNhdGVnb3J5SWQ6IGNhdGVnb3J5SWQsCiAgICAgIGN1cnJDYXRlZ29yeTogY3VyckNhdGVnb3J5CiAgICB9OwogIH0KfTs="},{"version":3,"sources":["E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\src\\views\\home\\components\\home-category.vue"],"names":[],"mappings":";;;;AAsDA,SAAS,QAAT,EAAmB,QAAnB,EAA6B,GAA7B,QAAwC,KAAxC;AACA,SAAS,QAAT,QAAyB,MAAzB;AACA,SAAS,SAAT,QAA0B,YAA1B;AACA,eAAe;AACb,EAAA,IAAI,EAAE,cADO;AAEb,EAAA,KAFa,mBAEJ;AACP,QAAM,KAAI,GAAI,QAAQ,EAAtB,CADO,CAEP;;AACA,QAAM,KAAI,GAAI,QAAQ,CAAC;AACrB,MAAA,EAAE,EAAE,OADiB;AAErB,MAAA,IAAI,EAAE,IAFe;AAGrB,MAAA,QAAQ,EAAE,CAAC;AAAE,QAAA,EAAE,EAAE,gBAAN;AAAwB,QAAA,IAAI,EAAE;AAA9B,OAAD,CAHW;AAIrB;AACA,MAAA,MAAM,EAAE;AALa,KAAD,CAAtB;AAOA,QAAM,QAAO,GAAI,QAAQ,CAAC,YAAM;AAC9B;AACA,UAAM,IAAG,GAAI,KAAK,CAAC,KAAN,CAAY,QAAZ,CAAqB,IAArB,CAA0B,GAA1B,CAA8B,UAAC,IAAD,EAAU;AACnD,eAAO;AACL,UAAA,EAAE,EAAE,IAAI,CAAC,EADJ;AAEL,UAAA,IAAI,EAAE,IAAI,CAAC,IAFN;AAGL,UAAA,QAAQ,EAAE,IAAI,CAAC,QAAL,IAAiB,IAAI,CAAC,QAAL,CAAc,KAAd,CAAoB,CAApB,EAAuB,CAAvB,CAHtB;AAIL,UAAA,KAAK,EAAE,IAAI,CAAC;AAJP,SAAP;AAMD,OAPY,CAAb;AAQA,MAAA,IAAI,CAAC,IAAL,CAAU,KAAV;AACA,aAAO,IAAP;AACD,KAZwB,CAAzB,CAVO,CAwBP;;AACA,QAAM,UAAS,GAAI,GAAG,CAAC,IAAD,CAAtB;AACA,QAAM,YAAW,GAAI,QAAQ,CAAC,YAAM;AAClC,aAAO,QAAQ,CAAC,KAAT,CAAe,IAAf,CAAoB,UAAA,IAAG;AAAA,eAAK,IAAI,CAAC,EAAL,KAAY,UAAU,CAAC,KAA5B;AAAA,OAAvB,CAAP;AACD,KAF4B,CAA7B,CA1BO,CA8BP;;AACA,IAAA,SAAS,GAAG,IAAZ,CAAiB,UAAA,IAAG,EAAK;AACvB,MAAA,KAAK,CAAC,MAAN,GAAe,IAAI,CAAC,MAApB;AACD,KAFD;AAIA,WAAO;AAAE,MAAA,QAAQ,EAAR,QAAF;AAAY,MAAA,UAAU,EAAV,UAAZ;AAAwB,MAAA,YAAW,EAAX;AAAxB,KAAP;AACF;AAtCa,CAAf","sourcesContent":["<template>\n  <div class=\"home-category\" @mouseleave=\"categoryId=null\">\n    <ul class=\"menu\">\n      <li :class=\"{active:categoryId&&categoryId===item.id}\" v-for=\"item in menuList\" :key=\"item.id\" @mouseenter=\"categoryId=item.id\">\n        <RouterLink :to=\"`/category/${item.id}`\">{{ item.name }}</RouterLink>\n        <template v-if=\"item.children\">\n          <RouterLink\n            v-for=\"sub in item.children\"\n            :key=\"sub.id\"\n            :to=\"`/category/sub/${sub.id}`\"\n            >{{ sub.name }}</RouterLink\n          >\n        </template>\n        <!-- 骨架 -->\n        <template v-else>\n          <XtxSkeleton height=\"18px\" width=\"60px\" bg=\"rgba(255,255,255,0.2)\" style=\"margin-right:5px\" />\n          <XtxSkeleton height=\"18px\" width=\"50px\" bg=\"rgba(255,255,255,0.2)\"/>\n        </template>\n      </li>\n    </ul>\n    <!-- 弹层 -->\n    <div class=\"layer\">\n      <h4>{{currCategory&&currCategory.id==='brand'?'品牌':'分类'}}推荐 <small>根据您的购买或浏览记录推荐</small></h4>\n      <!-- 商品 -->\n      <ul v-if=\"currCategory && currCategory.goods\">\n        <li v-for=\"item in currCategory.goods\" :key=\"item.id\">\n          <RouterLink to=\"/\">\n            <img :src=\"item.picture\" alt=\"\">\n            <div class=\"info\">\n              <p class=\"name ellipsis-2\">{{item.name}}</p>\n              <p class=\"desc ellipsis\">{{item.desc}}</p>\n              <p class=\"price\"><i>¥</i>{{item.price}}</p>\n            </div>\n          </RouterLink>\n        </li>\n      </ul>\n      <!-- 品牌 -->\n      <ul v-if=\"currCategory && currCategory.brands\">\n        <li class=\"brand\" v-for=\"brand in currCategory.brands\" :key=\"brand.id\">\n          <RouterLink to=\"/\">\n            <img :src=\"brand.picture\" alt=\"\">\n            <div class=\"info\">\n              <p class=\"place\"><i class=\"iconfont icon-dingwei\"></i>{{brand.place}}</p>\n              <p class=\"name ellipsis\">{{brand.name}}</p>\n              <p class=\"desc ellipsis-2\">{{brand.desc}}</p>\n            </div>\n          </RouterLink>\n        </li>\n      </ul>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { computed, reactive, ref } from 'vue'\nimport { useStore } from 'vuex'\nimport { findBrand } from '@/api/home'\nexport default {\n  name: 'HomeCategory',\n  setup () {\n    const store = useStore()\n    // 最终使用的数据 = 9个分类() + 1个品牌\n    const brand = reactive({\n      id: 'brand',\n      name: '品牌',\n      children: [{ id: 'brand-children', name: '品牌推荐' }],\n      // 品牌列表\n      brands: []\n    })\n    const menuList = computed(() => {\n      // 得到9个分类切每个一级分类下的子分类只有两个\n      const list = store.state.category.list.map((item) => {\n        return {\n          id: item.id,\n          name: item.name,\n          children: item.children && item.children.slice(0, 2),\n          goods: item.goods\n        }\n      })\n      list.push(brand)\n      return list\n    })\n\n    // 得到弹出层的推荐商品数据\n    const categoryId = ref(null)\n    const currCategory = computed(() => {\n      return menuList.value.find(item => item.id === categoryId.value)\n    })\n\n    // 获取品牌数据，尽量不用使用async再setup上\n    findBrand().then(data => {\n      brand.brands = data.result\n    })\n\n    return { menuList, categoryId, currCategory }\n  }\n}\n</script>\n\n<style scoped lang='less'>\n.home-category {\n  width: 250px;\n  height: 500px;\n  background: rgba(0, 0, 0, 0.8);\n  position: relative;\n  z-index: 99;\n  .menu {\n    li {\n      padding-left: 40px;\n      height: 50px;\n      line-height: 50px;\n      &:hover,&.active {\n        background: @xtxColor;\n      }\n      a {\n        margin-right: 4px;\n        color: #fff;\n        &:first-child {\n          font-size: 16px;\n        }\n      }\n    }\n  }\n  // 弹出层样式\n    .layer {\n    width: 990px;\n    height: 500px;\n    background: rgba(255,255,255,0.8);\n    position: absolute;\n    left: 250px;\n    top: 0;\n    display: none;\n    padding: 0 15px;\n    h4 {\n      font-size: 20px;\n      font-weight: normal;\n      line-height: 80px;\n      small {\n        font-size: 16px;\n        color: #666;\n      }\n    }\n    ul {\n      display: flex;\n      flex-wrap: wrap;\n      li {\n        width: 310px;\n        height: 120px;\n        margin-right: 15px;\n        margin-bottom: 15px;\n        border: 1px solid #eee;\n        border-radius: 4px;\n        background: #fff;\n        &:nth-child(3n) {\n          margin-right: 0;\n        }\n        a {\n          display: flex;\n          width: 100%;\n          height: 100%;\n          align-items: center;\n          padding: 10px;\n          &:hover {\n            background: #e3f9f4;\n          }\n          img {\n              width: 95px;\n              height: 95px;\n          }\n          .info {\n            padding-left: 10px;\n            line-height: 24px;\n            width: 190px;\n            .name {\n              font-size: 16px;\n              color: #666;\n            }\n            .desc {\n              color: #999;\n            }\n            .price {\n              font-size: 22px;\n              color: @priceColor;\n              i {\n                font-size: 16px;\n              }\n            }\n          }\n        }\n      }\n      // 品牌的样式\n      li.brand {\n        height: 180px;\n        a {\n          align-items: flex-start;\n          img {\n            width: 120px;\n            height: 160px;\n          }\n          .info {\n            p {\n              margin-top: 8px;\n            }\n            .place {\n              color: #999;\n            }\n          }\n        }\n      }\n    }\n  }\n  &:hover {\n    .layer {\n      display: block;\n    }\n  }\n}\n// 骨架动画\n.xtx-skeleton {\n  animation: fade 1s linear infinite alternate;\n}\n@keyframes fade {\n  from {\n    opacity: 0.2;\n  }\n  to {\n    opacity: 1;\n  }\n}\n</style>\n"],"sourceRoot":""}]}