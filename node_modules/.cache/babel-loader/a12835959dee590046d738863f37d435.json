{"remainingRequest":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\thread-loader\\dist\\cjs.js!F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\babel-loader\\lib\\index.js!F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\vue-loader-v16\\dist\\templateLoader.js??ref--6!F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!F:\\代码\\Vue 代码\\erabbit-client-pc-124\\src\\views\\goods\\components\\goods-image.vue?vue&type=template&id=4e17a18a&scoped=true","dependencies":[{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\src\\views\\goods\\components\\goods-image.vue","mtime":1621243079000},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656924649801},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1656924649783},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\babel-loader\\lib\\index.js","mtime":1656924651984},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":1656924654079},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656924649801},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1656924653036}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgdlNob3cgYXMgX3ZTaG93LCBjcmVhdGVWTm9kZSBhcyBfY3JlYXRlVk5vZGUsIHdpdGhEaXJlY3RpdmVzIGFzIF93aXRoRGlyZWN0aXZlcywgcmVuZGVyTGlzdCBhcyBfcmVuZGVyTGlzdCwgRnJhZ21lbnQgYXMgX0ZyYWdtZW50LCBvcGVuQmxvY2sgYXMgX29wZW5CbG9jaywgY3JlYXRlQmxvY2sgYXMgX2NyZWF0ZUJsb2NrLCB3aXRoU2NvcGVJZCBhcyBfd2l0aFNjb3BlSWQsIHB1c2hTY29wZUlkIGFzIF9wdXNoU2NvcGVJZCwgcG9wU2NvcGVJZCBhcyBfcG9wU2NvcGVJZCB9IGZyb20gInZ1ZSI7Cgp2YXIgX3dpdGhJZCA9IC8qI19fUFVSRV9fKi9fd2l0aFNjb3BlSWQoImRhdGEtdi00ZTE3YTE4YSIpOwoKX3B1c2hTY29wZUlkKCJkYXRhLXYtNGUxN2ExOGEiKTsKCnZhciBfaG9pc3RlZF8xID0gewogIGNsYXNzOiAiZ29vZHMtaW1hZ2UiCn07CnZhciBfaG9pc3RlZF8yID0gewogIGNsYXNzOiAibWlkZGxlIiwKICByZWY6ICJ0YXJnZXQiCn07CnZhciBfaG9pc3RlZF8zID0gewogIGNsYXNzOiAic21hbGwiCn07CgpfcG9wU2NvcGVJZCgpOwoKZXhwb3J0IHZhciByZW5kZXIgPSAvKiNfX1BVUkVfXyovX3dpdGhJZChmdW5jdGlvbiAoX2N0eCwgX2NhY2hlLCAkcHJvcHMsICRzZXR1cCwgJGRhdGEsICRvcHRpb25zKSB7CiAgcmV0dXJuIF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKCJkaXYiLCBfaG9pc3RlZF8xLCBbX3dpdGhEaXJlY3RpdmVzKF9jcmVhdGVWTm9kZSgiZGl2IiwgewogICAgY2xhc3M6ICJsYXJnZSIsCiAgICBzdHlsZTogW3sKICAgICAgYmFja2dyb3VuZEltYWdlOiAidXJsKCIuY29uY2F0KCRwcm9wcy5pbWFnZXNbJHNldHVwLmN1cnJJbmRleF0sICIpIikKICAgIH0sICRzZXR1cC5sYXJnZVBvc2l0aW9uXQogIH0sIG51bGwsIDQpLCBbW192U2hvdywgJHNldHVwLnNob3ddXSksIF9jcmVhdGVWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfMiwgW19jcmVhdGVWTm9kZSgiaW1nIiwgewogICAgc3JjOiAkcHJvcHMuaW1hZ2VzWyRzZXR1cC5jdXJySW5kZXhdLAogICAgYWx0OiAiIgogIH0sIG51bGwsIDgsIFsic3JjIl0pLCBfd2l0aERpcmVjdGl2ZXMoX2NyZWF0ZVZOb2RlKCJkaXYiLCB7CiAgICBjbGFzczogImxheWVyIiwKICAgIHN0eWxlOiAkc2V0dXAubGF5ZXJQb3NpdGlvbgogIH0sIG51bGwsIDQpLCBbW192U2hvdywgJHNldHVwLnNob3ddXSldLCA1MTIpLCBfY3JlYXRlVk5vZGUoInVsIiwgX2hvaXN0ZWRfMywgWyhfb3BlbkJsb2NrKHRydWUpLCBfY3JlYXRlQmxvY2soX0ZyYWdtZW50LCBudWxsLCBfcmVuZGVyTGlzdCgkcHJvcHMuaW1hZ2VzLCBmdW5jdGlvbiAoaW1nLCBpKSB7CiAgICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlQmxvY2soImxpIiwgewogICAgICBrZXk6IGltZywKICAgICAgY2xhc3M6IHsKICAgICAgICBhY3RpdmU6IGkgPT09ICRzZXR1cC5jdXJySW5kZXgKICAgICAgfQogICAgfSwgW19jcmVhdGVWTm9kZSgiaW1nIiwgewogICAgICBvbk1vdXNlZW50ZXI6IGZ1bmN0aW9uIG9uTW91c2VlbnRlcigkZXZlbnQpIHsKICAgICAgICByZXR1cm4gJHNldHVwLmN1cnJJbmRleCA9IGk7CiAgICAgIH0sCiAgICAgIHNyYzogaW1nLAogICAgICBhbHQ6ICIiCiAgICB9LCBudWxsLCA0MCwgWyJvbk1vdXNlZW50ZXIiLCAic3JjIl0pXSwgMik7CiAgfSksIDEyOCkpXSldKTsKfSk7"},{"version":3,"sources":["F:\\代码\\Vue 代码\\erabbit-client-pc-124\\src\\views\\goods\\components\\goods-image.vue"],"names":[],"mappings":";;;;;;;AACO,EAAA,KAAK,EAAC;;;AAIJ,EAAA,KAAK,EAAC,Q;AAAS,EAAA,GAAG,EAAC;;;AAMpB,EAAA,KAAK,EAAC;;;;;;uBAVZ,YAAA,CAeM,KAfN,EAAA,UAAA,EAeM,C,gBAbJ,YAAA,CAA8G,KAA9G,EAA8G;AAA3F,IAAA,KAAK,EAAC,OAAqF;AAA5E,IAAA,KAAK,EAAA,CAAA;AAAA,MAAA,eAAA,gBAA2B,MAAA,CAAA,MAAA,CAAO,MAAA,CAAA,SAAP,CAA3B;AAAA,KAAA,EAAiD,MAAA,CAAA,aAAjD;AAAuE,GAA9G,E,IAAA,E,CAAA,C,YAAa,MAAA,CAAA,I,GAaT,EAXJ,YAAA,CAIM,KAJN,EAAA,UAAA,EAIM,CAHJ,YAAA,CAAqC,KAArC,EAAqC;AAA/B,IAAA,GAAG,EAAE,MAAA,CAAA,MAAA,CAAO,MAAA,CAAA,SAAP,CAA0B;AAAP,IAAA,GAAG,EAAC;AAAG,GAArC,E,IAAA,E,CAAA,E,OAAA,CAGI,E,gBADJ,YAAA,CAA8D,KAA9D,EAA8D;AAA3C,IAAA,KAAK,EAAC,OAAqC;AAA5B,IAAA,KAAK,EAAE,MAAA,CAAA;AAAqB,GAA9D,E,IAAA,E,CAAA,C,YAAa,MAAA,CAAA,I,GACT,CAJN,E,GAAA,CAWI,EALJ,YAAA,CAIK,IAJL,EAAA,UAAA,EAIK,E,kBAHH,YAAA,CAEK,SAFL,EAEK,IAFL,EAEK,WAAA,CAFiB,MAAA,CAAA,MAEjB,EAFuB,UAAhB,GAAgB,EAAZ,CAAY,EAAX;yBAAjB,YAAA,CAEK,IAFL,EAEK;AAF0B,MAAA,GAAG,EAAE,GAE/B;AAFqC,MAAA,KAAK,EAAA;AAAA,QAAA,MAAA,EAAU,CAAC,KAAG,MAAA,CAAA;AAAd;AAE1C,KAFL,E,CACE,YAAA,CAAiD,KAAjD,EAAiD;AAA3C,MAAA,YAAU,EAAA,sBAAA,MAAA;AAAA,eAAE,MAAA,CAAA,SAAA,GAAU,CAAZ;AAAA,OAAiC;AAAjB,MAAA,GAAG,EAAE,GAAY;AAAP,MAAA,GAAG,EAAC;AAAG,KAAjD,E,IAAA,E,EAAA,E,uBAAA,C,CADF,E,CAAA,C;GAEK,CAFL,E,GAAA,CAGG,EAJL,CAKI,CAfN,C","sourcesContent":["<template>\n  <div class=\"goods-image\">\n    <!-- 大图 -->\n    <div v-show=\"show\" class=\"large\" :style=\"[{backgroundImage:`url(${images[currIndex]})`},largePosition]\"></div>\n    <!-- 中图 -->\n    <div class=\"middle\" ref=\"target\">\n      <img :src=\"images[currIndex]\" alt=\"\">\n      <!-- 遮罩色块 -->\n      <div v-show=\"show\" class=\"layer\" :style=\"layerPosition\"></div>\n    </div>\n    <!-- 小图 -->\n    <ul class=\"small\">\n      <li v-for=\"(img,i) in images\" :key=\"img\" :class=\"{active:i===currIndex}\">\n        <img @mouseenter=\"currIndex=i\" :src=\"img\" alt=\"\">\n      </li>\n    </ul>\n  </div>\n</template>\n<script>\nimport { reactive, ref, watch } from 'vue'\nimport { useMouseInElement } from '@vueuse/core'\nexport default {\n  name: 'GoodsImage',\n  props: {\n    images: {\n      type: Array,\n      default: () => []\n    }\n  },\n  setup (props) {\n    // 当前预览图的索引\n    const currIndex = ref(0)\n\n    // 1. 是否显示遮罩和大图\n    const show = ref(false)\n    // 2. 遮罩的坐标(样式)\n    const layerPosition = reactive({\n      left: 0,\n      top: 0\n    })\n    // 3. 大图背景定位(样式)\n    const largePosition = reactive({\n      backgroundPositionX: 0,\n      backgroundPositionY: 0\n    })\n    // 4. 使用useMouseInElement得到基于元素左上角的坐标和是否离开元素数据\n    const target = ref(null)\n    const { elementX, elementY, isOutside } = useMouseInElement(target)\n    watch([elementX, elementY, isOutside], () => {\n      // 5. 根据得到数据设置样式数据和是否显示数据\n      show.value = !isOutside.value\n      // 计算坐标\n      const position = { x: 0, y: 0 }\n\n      if (elementX.value < 100) position.x = 0\n      else if (elementX.value > 300) position.x = 200\n      else position.x = elementX.value - 100\n\n      if (elementY.value < 100) position.y = 0\n      else if (elementY.value > 300) position.y = 200\n      else position.y = elementY.value - 100\n      // 给样式赋值\n      layerPosition.left = position.x + 'px'\n      layerPosition.top = position.y + 'px'\n      largePosition.backgroundPositionX = -2 * position.x + 'px'\n      largePosition.backgroundPositionY = -2 * position.y + 'px'\n    })\n\n    return { currIndex, show, layerPosition, largePosition, target }\n  }\n}\n</script>\n<style scoped lang=\"less\">\n.goods-image {\n  width: 480px;\n  height: 400px;\n  position: relative;\n  display: flex;\n  z-index: 500;\n  .large {\n    position: absolute;\n    top: 0;\n    left: 412px;\n    width: 400px;\n    height: 400px;\n    box-shadow: 0 0 10px rgba(0,0,0,0.1);\n    background-repeat: no-repeat;\n    background-size: 800px 800px;\n    background-color: #f8f8f8;\n  }\n  .middle {\n    width: 400px;\n    height: 400px;\n    background: #f5f5f5;\n    position: relative;\n    cursor: move;\n    .layer {\n      width: 200px;\n      height: 200px;\n      background: rgba(0,0,0,.2);\n      left: 0;\n      top: 0;\n      position: absolute;\n    }\n  }\n  .small {\n    width: 80px;\n    li {\n      width: 68px;\n      height: 68px;\n      margin-left: 12px;\n      margin-bottom: 15px;\n      cursor: pointer;\n      &:hover,&.active {\n        border: 2px solid @xtxColor;\n      }\n    }\n  }\n}\n</style>\n"],"sourceRoot":""}]}