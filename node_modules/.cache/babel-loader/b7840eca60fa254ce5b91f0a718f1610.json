{"remainingRequest":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\babel-loader\\lib\\index.js!E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\src\\views\\login\\components\\callback-patch.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\src\\views\\login\\components\\callback-patch.vue","mtime":1621243079000},{"path":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656924649801},{"path":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\babel-loader\\lib\\index.js","mtime":1656924651984},{"path":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656924649801},{"path":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1656924653036}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRTovXHU3NjdFXHU1RUE2XHU3RjUxXHU3NkQ4XHU0RTBCXHU4RjdEL1x1OUVEMVx1OUE2Q3Z1ZS9WdWUzLjBcdTVDMEZcdTUxNTRcdTlDOUNcdTUxM0ZcdTk4NzlcdTc2RUVcdThENDRcdTY1OTkvXHU0RUUzXHU3ODAxL2VyYWJiaXQtY2xpZW50LXBjLTEyNC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJFOi9cdTc2N0VcdTVFQTZcdTdGNTFcdTc2RDhcdTRFMEJcdThGN0QvXHU5RUQxXHU5QTZDdnVlL1Z1ZTMuMFx1NUMwRlx1NTE1NFx1OUM5Q1x1NTEzRlx1OTg3OVx1NzZFRVx1OEQ0NFx1NjU5OS9cdTRFRTNcdTc4MDEvZXJhYmJpdC1jbGllbnQtcGMtMTI0L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgeyBGb3JtLCBGaWVsZCB9IGZyb20gJ3ZlZS12YWxpZGF0ZSc7CmltcG9ydCB7IHJlYWN0aXZlLCByZWYsIG9uVW5tb3VudGVkIH0gZnJvbSAndnVlJzsKaW1wb3J0IHNjaGVtYSBmcm9tICdAL3V0aWxzL3ZlZS12YWxpZGF0ZS1zY2hlbWEnOwppbXBvcnQgeyB1c2VyUVFQYXRjaENvZGUsIHVzZXJRUVBhdGNoTG9naW4gfSBmcm9tICdAL2FwaS91c2VyJzsKaW1wb3J0IHsgdXNlSW50ZXJ2YWxGbiB9IGZyb20gJ0B2dWV1c2UvY29yZSc7CmltcG9ydCBNZXNzYWdlIGZyb20gJ0AvY29tcG9uZW50cy9saWJyYXJ5L01lc3NhZ2UnOwppbXBvcnQgeyB1c2VTdG9yZSB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tICd2dWUtcm91dGVyJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdDYWxsYmFja1BhdGNoJywKICBjb21wb25lbnRzOiB7CiAgICBGb3JtOiBGb3JtLAogICAgRmllbGQ6IEZpZWxkCiAgfSwKICBwcm9wczogewogICAgdW5pb25JZDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICcnCiAgICB9CiAgfSwKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAocHJvcHMpIHsKICAgIC8vIDEuIOihqOWNleagoemqjCDlpJrkuKTkuKrmoKHpqozvvJrnlKjmiLflkI3mmK/lkKblrZjlnKjvvIzlho3mrKHovpPlhaXlr4bnoIHmmK/lkKbkuIDoh7QKICAgIC8vIDIuIOWPkemAgeefreS/oemqjOivgeegge+8muaOpeWPo0FQSeWumuS5iQogICAgLy8gMy4g5a6M5ZaE5L+h5oGvCiAgICAvLyDooajljZXmlbDmja7lr7nosaEKICAgIHZhciBmb3JtID0gcmVhY3RpdmUoewogICAgICBhY2NvdW50OiBudWxsLAogICAgICBtb2JpbGU6IG51bGwsCiAgICAgIGNvZGU6IG51bGwsCiAgICAgIHBhc3N3b3JkOiBudWxsLAogICAgICByZVBhc3N3b3JkOiBudWxsCiAgICB9KTsgLy8g6KGo5Y2V5qCh6aqM6KeE5YiZCgogICAgdmFyIG15U2NoZW1hID0gewogICAgICBhY2NvdW50OiBzY2hlbWEuYWNjb3VudEFwaSwKICAgICAgbW9iaWxlOiBzY2hlbWEubW9iaWxlLAogICAgICBjb2RlOiBzY2hlbWEuY29kZSwKICAgICAgcGFzc3dvcmQ6IHNjaGVtYS5wYXNzd29yZCwKICAgICAgcmVQYXNzd29yZDogc2NoZW1hLnJlUGFzc3dvcmQKICAgIH07IC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICB2YXIgZm9ybUNvbSA9IHJlZihudWxsKTsKICAgIHZhciB0aW1lID0gcmVmKDApOwoKICAgIHZhciBfdXNlSW50ZXJ2YWxGbiA9IHVzZUludGVydmFsRm4oZnVuY3Rpb24gKCkgewogICAgICB0aW1lLnZhbHVlLS07CgogICAgICBpZiAodGltZS52YWx1ZSA8PSAwKSB7CiAgICAgICAgcGF1c2UoKTsKICAgICAgfQogICAgfSwgMTAwMCwgZmFsc2UpLAogICAgICAgIHBhdXNlID0gX3VzZUludGVydmFsRm4ucGF1c2UsCiAgICAgICAgcmVzdW1lID0gX3VzZUludGVydmFsRm4ucmVzdW1lOwoKICAgIG9uVW5tb3VudGVkKGZ1bmN0aW9uICgpIHsKICAgICAgcGF1c2UoKTsKICAgIH0pOyAvLyAxLiDlj5HpgIHpqozor4HnoIEKICAgIC8vIDEuMSDnu5Hlrprlj5HpgIHpqozor4HnoIHmjInpkq7ngrnlh7vkuovku7YKICAgIC8vIDEuMiDmoKHpqozmiYvmnLrlj7fvvIzlpoLmnpzmiJDlip/miY3ljrvlj5HpgIHnn63kv6HvvIjlrprkuYlBUEnvvInvvIzor7fmsYLmiJDlip/lvIDlkK82MHPnmoTlgJLorqHml7bvvIzkuI3og73lho3mrKHngrnlh7vvvIzlgJLorqHml7bnu5PmnZ/mgaLlpI0KICAgIC8vIDEuMyDlpoLmnpzlpLHotKXvvIzlpLHotKXnmoTmoKHpqozmoLflvI/mmL7npLrlh7rmnaUKCiAgICB2YXIgc2VuZCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciB2YWxpZDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICB2YWxpZCA9IG15U2NoZW1hLm1vYmlsZShmb3JtLm1vYmlsZSk7CgogICAgICAgICAgICAgICAgaWYgKCEodmFsaWQgPT09IHRydWUpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKCEodGltZS52YWx1ZSA9PT0gMCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDg7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIHVzZXJRUVBhdGNoQ29kZShmb3JtLm1vYmlsZSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIE1lc3NhZ2UoewogICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgICAgIHRleHQ6ICflj5HpgIHmiJDlip8nCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHRpbWUudmFsdWUgPSA2MDsKICAgICAgICAgICAgICAgIHJlc3VtZSgpOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIC8vIOWksei0pe+8jOS9v+eUqHZlZeeahOmUmeivr+WHveaVsOaYvuekuumUmeivr+S/oeaBryBzZXRGaWVsZEVycm9yKOWtl+autSzplJnor6/kv6Hmga8pCiAgICAgICAgICAgICAgICBmb3JtQ29tLnZhbHVlLnNldEZpZWxkRXJyb3IoJ21vYmlsZScsIHZhbGlkKTsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSk7CgogICAgICByZXR1cm4gZnVuY3Rpb24gc2VuZCgpIHsKICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9OwogICAgfSgpOyAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAvLyDlrozlloTkv6Hmga8KCgogICAgdmFyIHN0b3JlID0gdXNlU3RvcmUoKTsKICAgIHZhciByb3V0ZXIgPSB1c2VSb3V0ZXIoKTsKCiAgICB2YXIgc3VibWl0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWYyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgdmFsaWQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHZhbGlkID0gZm9ybUNvbS52YWx1ZS52YWxpZGF0ZSgpOwoKICAgICAgICAgICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgICAgICAgICB1c2VyUVFQYXRjaExvZ2luKF9vYmplY3RTcHJlYWQoewogICAgICAgICAgICAgICAgICAgIHVuaW9uSWQ6IHByb3BzLnVuaW9uSWQKICAgICAgICAgICAgICAgICAgfSwgZm9ybSkpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgICAgICAgICAgICAvLyDlrp7njrDlkozkuYvliY3nmbvlvZXkuIDmoLfnmoTpgLvovpEKICAgICAgICAgICAgICAgICAgICAvLyAxLiDlrZjlgqjnlKjmiLfkv6Hmga8KICAgICAgICAgICAgICAgICAgICB2YXIgX2RhdGEkcmVzdWx0ID0gZGF0YS5yZXN1bHQsCiAgICAgICAgICAgICAgICAgICAgICAgIGlkID0gX2RhdGEkcmVzdWx0LmlkLAogICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50ID0gX2RhdGEkcmVzdWx0LmFjY291bnQsCiAgICAgICAgICAgICAgICAgICAgICAgIGF2YXRhciA9IF9kYXRhJHJlc3VsdC5hdmF0YXIsCiAgICAgICAgICAgICAgICAgICAgICAgIG1vYmlsZSA9IF9kYXRhJHJlc3VsdC5tb2JpbGUsCiAgICAgICAgICAgICAgICAgICAgICAgIG5pY2tuYW1lID0gX2RhdGEkcmVzdWx0Lm5pY2tuYW1lLAogICAgICAgICAgICAgICAgICAgICAgICB0b2tlbiA9IF9kYXRhJHJlc3VsdC50b2tlbjsKICAgICAgICAgICAgICAgICAgICBzdG9yZS5jb21taXQoJ3VzZXIvc2V0VXNlcicsIHsKICAgICAgICAgICAgICAgICAgICAgIGlkOiBpZCwKICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ6IGFjY291bnQsCiAgICAgICAgICAgICAgICAgICAgICBhdmF0YXI6IGF2YXRhciwKICAgICAgICAgICAgICAgICAgICAgIG1vYmlsZTogbW9iaWxlLAogICAgICAgICAgICAgICAgICAgICAgbmlja25hbWU6IG5pY2tuYW1lLAogICAgICAgICAgICAgICAgICAgICAgdG9rZW46IHRva2VuCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgc3RvcmUuZGlzcGF0Y2goJ2NhcnQvbWVyZ2VDYXJ0JykudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAvLyAyLiDot7PovazliLDmnaXmupDpobXmiJbogIXpppbpobUKICAgICAgICAgICAgICAgICAgICAgIHJvdXRlci5wdXNoKHN0b3JlLnN0YXRlLnVzZXIucmVkaXJlY3RVcmwpOyAvLyAzLiDmiJDlip/mj5DnpLoKCiAgICAgICAgICAgICAgICAgICAgICBNZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnUVHlrozlloTkv6Hmga/miJDlip8nCiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICBNZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsCiAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAn5a6M5ZaE5L+h5oGv5aSx6LSlJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpOwoKICAgICAgcmV0dXJuIGZ1bmN0aW9uIHN1Ym1pdCgpIHsKICAgICAgICByZXR1cm4gX3JlZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfTsKICAgIH0oKTsKCiAgICByZXR1cm4gewogICAgICBmb3JtOiBmb3JtLAogICAgICBteVNjaGVtYTogbXlTY2hlbWEsCiAgICAgIGZvcm1Db206IGZvcm1Db20sCiAgICAgIHRpbWU6IHRpbWUsCiAgICAgIHNlbmQ6IHNlbmQsCiAgICAgIHN1Ym1pdDogc3VibWl0CiAgICB9OwogIH0KfTs="},{"version":3,"sources":["E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\src\\views\\login\\components\\callback-patch.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <Form ref=\"formCom\" :validation-schema=\"mySchema\" v-slot=\"{errors}\" class=\"xtx-form\" autocomplete=\"off\">\n    <div class=\"xtx-form-item\">\n      <div class=\"field\">\n        <i class=\"icon iconfont icon-user\"></i>\n        <Field :class=\"{err:errors.account}\" v-model=\"form.account\" name=\"account\" class=\"input\" type=\"text\" placeholder=\"请输入用户名\" />\n      </div>\n      <div v-if=\"errors.account\" class=\"error\">{{errors.account}}</div>\n    </div>\n    <div class=\"xtx-form-item\">\n      <div class=\"field\">\n        <i class=\"icon iconfont icon-phone\"></i>\n        <Field :class=\"{err:errors.mobile}\" v-model=\"form.mobile\" name=\"mobile\" class=\"input\" type=\"text\" placeholder=\"请输入手机号\" />\n      </div>\n      <div v-if=\"errors.mobile\" class=\"error\">{{errors.mobile}}</div>\n    </div>\n    <div class=\"xtx-form-item\">\n      <div class=\"field\">\n        <i class=\"icon iconfont icon-code\"></i>\n        <Field :class=\"{err:errors.code}\" v-model=\"form.code\" name=\"code\" class=\"input\" type=\"text\" placeholder=\"请输入验证码\" />\n        <span @click=\"send()\" class=\"code\">\n          {{time===0?'发送验证码':`${time}秒后发送`}}\n        </span>\n      </div>\n      <div v-if=\"errors.code\" class=\"error\">{{errors.code}}</div>\n    </div>\n    <div class=\"xtx-form-item\">\n      <div class=\"field\">\n        <i class=\"icon iconfont icon-lock\"></i>\n        <Field :class=\"{err:errors.password}\" v-model=\"form.password\" name=\"password\" class=\"input\" type=\"password\" placeholder=\"请输入密码\" />\n      </div>\n      <div v-if=\"errors.password\" class=\"error\">{{errors.password}}</div>\n    </div>\n    <div class=\"xtx-form-item\">\n      <div class=\"field\">\n        <i class=\"icon iconfont icon-lock\"></i>\n        <Field :class=\"{err:errors.rePassword}\" v-model=\"form.rePassword\" name=\"rePassword\" class=\"input\" type=\"password\" placeholder=\"请确认密码\" />\n      </div>\n      <div v-if=\"errors.rePassword\" class=\"error\">{{errors.rePassword}}</div>\n    </div>\n    <a @click=\"submit()\" href=\"javascript:;\" class=\"submit\">立即提交</a>\n  </Form>\n</template>\n\n<script>\nimport { Form, Field } from 'vee-validate'\nimport { reactive, ref, onUnmounted } from 'vue'\nimport schema from '@/utils/vee-validate-schema'\nimport { userQQPatchCode, userQQPatchLogin } from '@/api/user'\nimport { useIntervalFn } from '@vueuse/core'\nimport Message from '@/components/library/Message'\nimport { useStore } from 'vuex'\nimport { useRouter } from 'vue-router'\nexport default {\n  name: 'CallbackPatch',\n  components: { Form, Field },\n  props: {\n    unionId: {\n      type: String,\n      default: ''\n    }\n  },\n  setup (props) {\n    // 1. 表单校验 多两个校验：用户名是否存在，再次输入密码是否一致\n    // 2. 发送短信验证码：接口API定义\n    // 3. 完善信息\n\n    // 表单数据对象\n    const form = reactive({\n      account: null,\n      mobile: null,\n      code: null,\n      password: null,\n      rePassword: null\n    })\n    // 表单校验规则\n    const mySchema = {\n      account: schema.accountApi,\n      mobile: schema.mobile,\n      code: schema.code,\n      password: schema.password,\n      rePassword: schema.rePassword\n    }\n\n    // -------------------------------------------------------\n    const formCom = ref(null)\n    const time = ref(0)\n    const { pause, resume } = useIntervalFn(() => {\n      time.value--\n      if (time.value <= 0) {\n        pause()\n      }\n    }, 1000, false)\n    onUnmounted(() => {\n      pause()\n    })\n\n    // 1. 发送验证码\n    // 1.1 绑定发送验证码按钮点击事件\n    // 1.2 校验手机号，如果成功才去发送短信（定义API），请求成功开启60s的倒计时，不能再次点击，倒计时结束恢复\n    // 1.3 如果失败，失败的校验样式显示出来\n    const send = async () => {\n      const valid = mySchema.mobile(form.mobile)\n      if (valid === true) {\n        // 通过\n        if (time.value === 0) {\n        // 没有倒计时才可以发送\n          await userQQPatchCode(form.mobile)\n          Message({ type: 'success', text: '发送成功' })\n          time.value = 60\n          resume()\n        }\n      } else {\n        // 失败，使用vee的错误函数显示错误信息 setFieldError(字段,错误信息)\n        formCom.value.setFieldError('mobile', valid)\n      }\n    }\n\n    // ----------------------------------------------------------\n    // 完善信息\n    const store = useStore()\n    const router = useRouter()\n    const submit = async () => {\n      const valid = formCom.value.validate()\n      if (valid) {\n        userQQPatchLogin({\n          unionId: props.unionId,\n          ...form\n        }).then(data => {\n          // 实现和之前登录一样的逻辑\n          // 1. 存储用户信息\n          const { id, account, avatar, mobile, nickname, token } = data.result\n          store.commit('user/setUser', { id, account, avatar, mobile, nickname, token })\n          store.dispatch('cart/mergeCart').then(() => {\n            // 2. 跳转到来源页或者首页\n            router.push(store.state.user.redirectUrl)\n            // 3. 成功提示\n            Message({ type: 'success', text: 'QQ完善信息成功' })\n          })\n        }).catch(e => {\n          Message({ type: 'error', text: '完善信息失败' })\n        })\n      }\n    }\n\n    return { form, mySchema, formCom, time, send, submit }\n  }\n}\n</script>\n\n<style scoped lang='less'>\n.code {\n  position: absolute;\n  right: 0;\n  top: 0;\n  line-height: 50px;\n  width: 80px;\n  color: #999;\n  &:hover {\n    cursor: pointer;\n  }\n}\n</style>\n"],"sourceRoot":""}]}