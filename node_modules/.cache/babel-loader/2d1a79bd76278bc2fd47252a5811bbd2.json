{"remainingRequest":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\thread-loader\\dist\\cjs.js!F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\babel-loader\\lib\\index.js!F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\eslint-loader\\index.js??ref--13-0!F:\\代码\\Vue 代码\\erabbit-client-pc-124\\src\\hooks\\index.js","dependencies":[{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\src\\hooks\\index.js","mtime":1621243079000},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656924649801},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1656924649783},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\babel-loader\\lib\\index.js","mtime":1656924651984},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\eslint-loader\\index.js","mtime":1656924650183}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIkY6L1x1NEVFM1x1NzgwMS9WdWUgXHU0RUUzXHU3ODAxL2VyYWJiaXQtY2xpZW50LXBjLTEyNC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheSI7Ci8vIOaPkOS+m+WkjeeUqOmAu+i+keeahOWHveaVsO+8iOmSqeWtkO+8iQppbXBvcnQgeyB1c2VJbnRlcnNlY3Rpb25PYnNlcnZlciwgdXNlSW50ZXJ2YWxGbiB9IGZyb20gJ0B2dWV1c2UvY29yZSc7CmltcG9ydCB7IHJlZiwgb25Vbm1vdW50ZWQgfSBmcm9tICd2dWUnOwppbXBvcnQgZGF5anMgZnJvbSAnZGF5anMnOwovKioKICog5pWw5o2u5oeS5Yqg6L295Ye95pWwCiAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0IC0gRG9t5a+56LGhCiAqIEBwYXJhbSB7RnVuY3Rpb259IGFwaUZuIC0gQVBJ5Ye95pWwCiAqLwoKZXhwb3J0IHZhciB1c2VMYXp5RGF0YSA9IGZ1bmN0aW9uIHVzZUxhenlEYXRhKGFwaUZuKSB7CiAgdmFyIHJlc3VsdCA9IHJlZihbXSk7CiAgdmFyIHRhcmdldCA9IHJlZihudWxsKTsgLy8gc3RvcCDlgZzmraLop4Llr58KCiAgdmFyIF91c2VJbnRlcnNlY3Rpb25PYnNlciA9IHVzZUludGVyc2VjdGlvbk9ic2VydmVyKCAvLyDnm5HlkKznmoTnm67moIflhYPntKAKICB0YXJnZXQsIGZ1bmN0aW9uIChfcmVmLCBvYnNlcnZlckVsZW1lbnQpIHsKICAgIHZhciBfcmVmMiA9IF9zbGljZWRUb0FycmF5KF9yZWYsIDEpLAogICAgICAgIGlzSW50ZXJzZWN0aW5nID0gX3JlZjJbMF0uaXNJbnRlcnNlY3Rpbmc7CgogICAgLy8gaXNJbnRlcnNlY3Rpbmcg5piv5ZCm6L+b5YWl5Y+v6KeG5Yy6CiAgICBpZiAoaXNJbnRlcnNlY3RpbmcpIHsKICAgICAgc3RvcCgpOyAvLyDosIPnlKhBUEnlh73mlbDojrflj5bmlbDmja4KCiAgICAgIC8vIOiwg+eUqEFQSeWHveaVsOiOt+WPluaVsOaNrgogICAgICBhcGlGbigpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICByZXN1bHQudmFsdWUgPSBkYXRhLnJlc3VsdDsKICAgICAgfSk7CiAgICB9CiAgfSwgLy8g6YWN572u6YCJ6aG577yM55u45Lqk55qE5q+U5L6L5aSn5LqOMOWwseinpuWPkQogIHsKICAgIHRocmVzaG9sZDogMAogIH0pLAogICAgICBzdG9wID0gX3VzZUludGVyc2VjdGlvbk9ic2VyLnN0b3A7CgogIHJldHVybiB7CiAgICByZXN1bHQ6IHJlc3VsdCwKICAgIHRhcmdldDogdGFyZ2V0CiAgfTsKfTsKLyoqCiAqIOaUr+S7mOWAkuiuoeaXtuWHveaVsAogKi8KCmV4cG9ydCB2YXIgdXNlUGF5VGltZSA9IGZ1bmN0aW9uIHVzZVBheVRpbWUoKSB7CiAgLy8g5YCS6K6h5pe26YC76L6RCiAgdmFyIHRpbWUgPSByZWYoMCk7CiAgdmFyIHRpbWVUZXh0ID0gcmVmKCcnKTsKCiAgdmFyIF91c2VJbnRlcnZhbEZuID0gdXNlSW50ZXJ2YWxGbihmdW5jdGlvbiAoKSB7CiAgICB0aW1lLnZhbHVlLS07CiAgICB0aW1lVGV4dC52YWx1ZSA9IGRheWpzLnVuaXgodGltZS52YWx1ZSkuZm9ybWF0KCdtbeWIhnNz56eSJyk7CgogICAgaWYgKHRpbWUudmFsdWUgPD0gMCkgewogICAgICBwYXVzZSgpOwogICAgfQogIH0sIDEwMDAsIGZhbHNlKSwKICAgICAgcGF1c2UgPSBfdXNlSW50ZXJ2YWxGbi5wYXVzZSwKICAgICAgcmVzdW1lID0gX3VzZUludGVydmFsRm4ucmVzdW1lOwoKICBvblVubW91bnRlZChmdW5jdGlvbiAoKSB7CiAgICBwYXVzZSgpOwogIH0pOyAvLyDlvIDlkK/lrprml7blmaggY291bnRkb3duIOWAkuiuoeaXtuaXtumXtAoKICB2YXIgc3RhcnQgPSBmdW5jdGlvbiBzdGFydChjb3VudGRvd24pIHsKICAgIHRpbWUudmFsdWUgPSBjb3VudGRvd247CiAgICB0aW1lVGV4dC52YWx1ZSA9IGRheWpzLnVuaXgodGltZS52YWx1ZSkuZm9ybWF0KCdtbeWIhnNz56eSJyk7CiAgICByZXN1bWUoKTsKICB9OwoKICByZXR1cm4gewogICAgc3RhcnQ6IHN0YXJ0LAogICAgdGltZVRleHQ6IHRpbWVUZXh0CiAgfTsKfTs="},{"version":3,"sources":["F:/代码/Vue 代码/erabbit-client-pc-124/src/hooks/index.js"],"names":["useIntersectionObserver","useIntervalFn","ref","onUnmounted","dayjs","useLazyData","apiFn","result","target","observerElement","isIntersecting","stop","then","data","value","threshold","usePayTime","time","timeText","unix","format","pause","resume","start","countdown"],"mappings":";AAAA;AACA,SAASA,uBAAT,EAAkCC,aAAlC,QAAuD,cAAvD;AACA,SAASC,GAAT,EAAcC,WAAd,QAAiC,KAAjC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA;AACA;AACA;AACA;AACA;;AACA,OAAO,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAACC,KAAD,EAAW;AACpC,MAAMC,MAAM,GAAGL,GAAG,CAAC,EAAD,CAAlB;AACA,MAAMM,MAAM,GAAGN,GAAG,CAAC,IAAD,CAAlB,CAFoC,CAGpC;;AACA,8BAAiBF,uBAAuB,EACtC;AACAQ,EAAAA,MAFsC,EAGtC,gBAAuBC,eAAvB,EAA2C;AAAA;AAAA,QAAvCC,cAAuC,YAAvCA,cAAuC;;AACzC;AACA,QAAIA,cAAJ,EAAoB;AAClBC,MAAAA,IAAI,GADc,CAElB;;AAAA;AACAL,MAAAA,KAAK,GAAGM,IAAR,CAAa,UAAAC,IAAI,EAAI;AACnBN,QAAAA,MAAM,CAACO,KAAP,GAAeD,IAAI,CAACN,MAApB;AACD,OAFD;AAGD;AACF,GAZqC,EAatC;AACA;AACEQ,IAAAA,SAAS,EAAE;AADb,GAdsC,CAAxC;AAAA,MAAQJ,IAAR,yBAAQA,IAAR;;AAkBA,SAAO;AAAEJ,IAAAA,MAAM,EAANA,MAAF;AAAUC,IAAAA,MAAM,EAANA;AAAV,GAAP;AACD,CAvBM;AAyBP;AACA;AACA;;AACA,OAAO,IAAMQ,UAAU,GAAG,SAAbA,UAAa,GAAM;AAC9B;AACA,MAAMC,IAAI,GAAGf,GAAG,CAAC,CAAD,CAAhB;AACA,MAAMgB,QAAQ,GAAGhB,GAAG,CAAC,EAAD,CAApB;;AACA,uBAA0BD,aAAa,CAAC,YAAM;AAC5CgB,IAAAA,IAAI,CAACH,KAAL;AACAI,IAAAA,QAAQ,CAACJ,KAAT,GAAiBV,KAAK,CAACe,IAAN,CAAWF,IAAI,CAACH,KAAhB,EAAuBM,MAAvB,CAA8B,QAA9B,CAAjB;;AACA,QAAIH,IAAI,CAACH,KAAL,IAAc,CAAlB,EAAqB;AACnBO,MAAAA,KAAK;AACN;AACF,GANsC,EAMpC,IANoC,EAM9B,KAN8B,CAAvC;AAAA,MAAQA,KAAR,kBAAQA,KAAR;AAAA,MAAeC,MAAf,kBAAeA,MAAf;;AAOAnB,EAAAA,WAAW,CAAC,YAAM;AAChBkB,IAAAA,KAAK;AACN,GAFU,CAAX,CAX8B,CAe9B;;AACA,MAAME,KAAK,GAAG,SAARA,KAAQ,CAACC,SAAD,EAAe;AAC3BP,IAAAA,IAAI,CAACH,KAAL,GAAaU,SAAb;AACAN,IAAAA,QAAQ,CAACJ,KAAT,GAAiBV,KAAK,CAACe,IAAN,CAAWF,IAAI,CAACH,KAAhB,EAAuBM,MAAvB,CAA8B,QAA9B,CAAjB;AACAE,IAAAA,MAAM;AACP,GAJD;;AAMA,SAAO;AACLC,IAAAA,KAAK,EAALA,KADK;AAELL,IAAAA,QAAQ,EAARA;AAFK,GAAP;AAID,CA1BM","sourcesContent":["// 提供复用逻辑的函数（钩子）\nimport { useIntersectionObserver, useIntervalFn } from '@vueuse/core'\nimport { ref, onUnmounted } from 'vue'\nimport dayjs from 'dayjs'\n\n/**\n * 数据懒加载函数\n * @param {Element} target - Dom对象\n * @param {Function} apiFn - API函数\n */\nexport const useLazyData = (apiFn) => {\n  const result = ref([])\n  const target = ref(null)\n  // stop 停止观察\n  const { stop } = useIntersectionObserver(\n    // 监听的目标元素\n    target,\n    ([{ isIntersecting }], observerElement) => {\n      // isIntersecting 是否进入可视区\n      if (isIntersecting) {\n        stop()\n        // 调用API函数获取数据\n        apiFn().then(data => {\n          result.value = data.result\n        })\n      }\n    },\n    // 配置选项，相交的比例大于0就触发\n    {\n      threshold: 0\n    }\n  )\n  return { result, target }\n}\n\n/**\n * 支付倒计时函数\n */\nexport const usePayTime = () => {\n  // 倒计时逻辑\n  const time = ref(0)\n  const timeText = ref('')\n  const { pause, resume } = useIntervalFn(() => {\n    time.value--\n    timeText.value = dayjs.unix(time.value).format('mm分ss秒')\n    if (time.value <= 0) {\n      pause()\n    }\n  }, 1000, false)\n  onUnmounted(() => {\n    pause()\n  })\n\n  // 开启定时器 countdown 倒计时时间\n  const start = (countdown) => {\n    time.value = countdown\n    timeText.value = dayjs.unix(time.value).format('mm分ss秒')\n    resume()\n  }\n\n  return {\n    start,\n    timeText\n  }\n}\n"]}]}