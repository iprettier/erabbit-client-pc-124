{"remainingRequest":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\babel-loader\\lib\\index.js!E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\vue-loader-v16\\dist\\templateLoader.js??ref--6!E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\src\\views\\login\\callback.vue?vue&type=template&id=5919df45&scoped=true","dependencies":[{"path":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\src\\views\\login\\callback.vue","mtime":1621243079000},{"path":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656924649801},{"path":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\babel-loader\\lib\\index.js","mtime":1656924651984},{"path":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":1656924654079},{"path":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656924649801},{"path":"E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1656924653036}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgY3JlYXRlVGV4dFZOb2RlIGFzIF9jcmVhdGVUZXh0Vk5vZGUsIHJlc29sdmVDb21wb25lbnQgYXMgX3Jlc29sdmVDb21wb25lbnQsIHdpdGhDdHggYXMgX3dpdGhDdHgsIGNyZWF0ZVZOb2RlIGFzIF9jcmVhdGVWTm9kZSwgb3BlbkJsb2NrIGFzIF9vcGVuQmxvY2ssIGNyZWF0ZUJsb2NrIGFzIF9jcmVhdGVCbG9jaywgY3JlYXRlQ29tbWVudFZOb2RlIGFzIF9jcmVhdGVDb21tZW50Vk5vZGUsIEZyYWdtZW50IGFzIF9GcmFnbWVudCwgd2l0aFNjb3BlSWQgYXMgX3dpdGhTY29wZUlkLCBwdXNoU2NvcGVJZCBhcyBfcHVzaFNjb3BlSWQsIHBvcFNjb3BlSWQgYXMgX3BvcFNjb3BlSWQgfSBmcm9tICJ2dWUiOwoKdmFyIF93aXRoSWQgPSAvKiNfX1BVUkVfXyovX3dpdGhTY29wZUlkKCJkYXRhLXYtNTkxOWRmNDUiKTsKCl9wdXNoU2NvcGVJZCgiZGF0YS12LTU5MTlkZjQ1Iik7Cgp2YXIgX2hvaXN0ZWRfMSA9IC8qI19fUFVSRV9fKi9fY3JlYXRlVGV4dFZOb2RlKCLogZTlkIjnmbvlvZUiKTsKCnZhciBfaG9pc3RlZF8yID0gewogIGtleTogMCwKICBjbGFzczogImNvbnRhaW5lciIKfTsKCnZhciBfaG9pc3RlZF8zID0gLyojX19QVVJFX18qL19jcmVhdGVWTm9kZSgiZGl2IiwgewogIGNsYXNzOiAidW5iaW5kIgp9LCBbLyojX19QVVJFX18qL19jcmVhdGVWTm9kZSgiZGl2IiwgewogIGNsYXNzOiAibG9hZGluZyIKfSldLCAtMQovKiBIT0lTVEVEICovCik7Cgp2YXIgX2hvaXN0ZWRfNCA9IHsKICBrZXk6IDEsCiAgY2xhc3M6ICJjb250YWluZXIiCn07CnZhciBfaG9pc3RlZF81ID0gewogIGNsYXNzOiAidGFiIgp9OwoKdmFyIF9ob2lzdGVkXzYgPSAvKiNfX1BVUkVfXyovX2NyZWF0ZVZOb2RlKCJpIiwgewogIGNsYXNzOiAiaWNvbmZvbnQgaWNvbi1iaW5kIgp9LCBudWxsLCAtMQovKiBIT0lTVEVEICovCik7Cgp2YXIgX2hvaXN0ZWRfNyA9IC8qI19fUFVSRV9fKi9fY3JlYXRlVk5vZGUoInNwYW4iLCBudWxsLCAi5bey5pyJ5bCP5YWU6bKc6LSm5Y+377yM6K+357uR5a6a5omL5py6IiwgLTEKLyogSE9JU1RFRCAqLwopOwoKdmFyIF9ob2lzdGVkXzggPSAvKiNfX1BVUkVfXyovX2NyZWF0ZVZOb2RlKCJpIiwgewogIGNsYXNzOiAiaWNvbmZvbnQgaWNvbi1lZGl0Igp9LCBudWxsLCAtMQovKiBIT0lTVEVEICovCik7Cgp2YXIgX2hvaXN0ZWRfOSA9IC8qI19fUFVSRV9fKi9fY3JlYXRlVk5vZGUoInNwYW4iLCBudWxsLCAi5rKh5pyJ5bCP5YWU6bKc6LSm5Y+377yM6K+35a6M5ZaE6LWE5paZIiwgLTEKLyogSE9JU1RFRCAqLwopOwoKdmFyIF9ob2lzdGVkXzEwID0gewogIGtleTogMCwKICBjbGFzczogInRhYi1jb250ZW50Igp9Owp2YXIgX2hvaXN0ZWRfMTEgPSB7CiAga2V5OiAxLAogIGNsYXNzOiAidGFiLWNvbnRlbnQiCn07CgpfcG9wU2NvcGVJZCgpOwoKZXhwb3J0IHZhciByZW5kZXIgPSAvKiNfX1BVUkVfXyovX3dpdGhJZChmdW5jdGlvbiAoX2N0eCwgX2NhY2hlLCAkcHJvcHMsICRzZXR1cCwgJGRhdGEsICRvcHRpb25zKSB7CiAgdmFyIF9jb21wb25lbnRfTG9naW5IZWFkZXIgPSBfcmVzb2x2ZUNvbXBvbmVudCgiTG9naW5IZWFkZXIiKTsKCiAgdmFyIF9jb21wb25lbnRfQ2FsbGJhY2tCaW5kID0gX3Jlc29sdmVDb21wb25lbnQoIkNhbGxiYWNrQmluZCIpOwoKICB2YXIgX2NvbXBvbmVudF9DYWxsYmFja1BhdGNoID0gX3Jlc29sdmVDb21wb25lbnQoIkNhbGxiYWNrUGF0Y2giKTsKCiAgdmFyIF9jb21wb25lbnRfTG9naW5Gb290ZXIgPSBfcmVzb2x2ZUNvbXBvbmVudCgiTG9naW5Gb290ZXIiKTsKCiAgcmV0dXJuIF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKF9GcmFnbWVudCwgbnVsbCwgW19jcmVhdGVWTm9kZShfY29tcG9uZW50X0xvZ2luSGVhZGVyLCBudWxsLCB7CiAgICBkZWZhdWx0OiBfd2l0aElkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIFtfaG9pc3RlZF8xXTsKICAgIH0pLAogICAgXzogMQogICAgLyogU1RBQkxFICovCgogIH0pLCAkc2V0dXAuaXNCaW5kID8gKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKCJzZWN0aW9uIiwgX2hvaXN0ZWRfMiwgW19ob2lzdGVkXzNdKSkgOiAoX29wZW5CbG9jaygpLCBfY3JlYXRlQmxvY2soInNlY3Rpb24iLCBfaG9pc3RlZF80LCBbX2NyZWF0ZVZOb2RlKCJuYXYiLCBfaG9pc3RlZF81LCBbX2NyZWF0ZVZOb2RlKCJhIiwgewogICAgb25DbGljazogX2NhY2hlWzFdIHx8IChfY2FjaGVbMV0gPSBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgIHJldHVybiAkc2V0dXAuaGFzQWNjb3VudCA9IHRydWU7CiAgICB9KSwKICAgIGNsYXNzOiB7CiAgICAgIGFjdGl2ZTogJHNldHVwLmhhc0FjY291bnQKICAgIH0sCiAgICBocmVmOiAiamF2YXNjcmlwdDo7IgogIH0sIFtfaG9pc3RlZF82LCBfaG9pc3RlZF83XSwgMgogIC8qIENMQVNTICovCiAgKSwgX2NyZWF0ZVZOb2RlKCJhIiwgewogICAgb25DbGljazogX2NhY2hlWzJdIHx8IChfY2FjaGVbMl0gPSBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgIHJldHVybiAkc2V0dXAuaGFzQWNjb3VudCA9IGZhbHNlOwogICAgfSksCiAgICBjbGFzczogewogICAgICBhY3RpdmU6ICEkc2V0dXAuaGFzQWNjb3VudAogICAgfSwKICAgIGhyZWY6ICJqYXZhc2NyaXB0OjsiCiAgfSwgW19ob2lzdGVkXzgsIF9ob2lzdGVkXzldLCAyCiAgLyogQ0xBU1MgKi8KICApXSksICRzZXR1cC5oYXNBY2NvdW50ID8gKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKCJkaXYiLCBfaG9pc3RlZF8xMCwgW19jcmVhdGVWTm9kZShfY29tcG9uZW50X0NhbGxiYWNrQmluZCwgewogICAgdW5pb25JZDogJHNldHVwLnVuaW9uSWQKICB9LCBudWxsLCA4CiAgLyogUFJPUFMgKi8KICAsIFsidW5pb25JZCJdKV0pKSA6IChfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jaygiZGl2IiwgX2hvaXN0ZWRfMTEsIFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9DYWxsYmFja1BhdGNoLCB7CiAgICB1bmlvbklkOiAkc2V0dXAudW5pb25JZAogIH0sIG51bGwsIDgKICAvKiBQUk9QUyAqLwogICwgWyJ1bmlvbklkIl0pXSkpXSkpLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9Mb2dpbkZvb3RlcildLCA2NAogIC8qIFNUQUJMRV9GUkFHTUVOVCAqLwogICk7Cn0pOw=="},{"version":3,"sources":["E:\\百度网盘下载\\黑马vue\\Vue3.0小兔鲜儿项目资料\\代码\\erabbit-client-pc-124\\src\\views\\login\\callback.vue"],"names":[],"mappings":";;;;;;+CACe,M;;;;AACJ,EAAA,KAAK,EAAC;;;8BACb,YAAA,CAEM,KAFN,EAEM;AAFD,EAAA,KAAK,EAAC;AAEL,CAFN,EAAmB,C,aACjB,YAAA,CAA2B,KAA3B,EAA2B;AAAtB,EAAA,KAAK,EAAC;AAAgB,CAA3B,CADiB,CAAnB,E;;AAAA,C;;;;AAIO,EAAA,KAAK,EAAC;;;AACR,EAAA,KAAK,EAAC;;;8BAEP,YAAA,CAAgC,GAAhC,EAAgC;AAA7B,EAAA,KAAK,EAAC;AAAuB,CAAhC,EAA6B,IAA7B,EAA6B,CAAA;AAAA;AAA7B,C;;8BACA,YAAA,CAA0B,MAA1B,EAA0B,IAA1B,EAAM,eAAN,EAAmB,CAAA;AAAA;AAAnB,C;;8BAGA,YAAA,CAAgC,GAAhC,EAAgC;AAA7B,EAAA,KAAK,EAAC;AAAuB,CAAhC,EAA6B,IAA7B,EAA6B,CAAA;AAAA;AAA7B,C;;8BACA,YAAA,CAA0B,MAA1B,EAA0B,IAA1B,EAAM,eAAN,EAAmB,CAAA;AAAA;AAAnB,C;;;;AAGC,EAAA,KAAK,EAAC;;;;AAGN,EAAA,KAAK,EAAC;;;;;;;;;;;;;;sDApBb,YAAA,CAA+B,sBAA/B,EAA+B,IAA/B,EAA+B;qBAAlB;AAAA,aAAI,C,UAAA,CAAJ;AAAA,K,CAAkB;;;;AAAA,GAA/B,C,EACiC,MAAA,CAAA,M,kBAAjC,YAAA,CAIU,SAJV,EAAA,UAAA,EAIU,CAHR,UAGQ,CAJV,C,mBAKA,YAAA,CAiBU,SAjBV,EAAA,UAAA,EAiBU,CAhBR,YAAA,CASM,KATN,EAAA,UAAA,EASM,CARJ,YAAA,CAGI,GAHJ,EAGI;AAHA,IAAA,OAAK,EAAA,MAAA,CAAA,CAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,GAAA,UAAA,MAAA;AAAA,aAAE,MAAA,CAAA,UAAA,GAAU,IAAZ;AAAA,KAAA,CAGL;AAHyB,IAAA,KAAK,EAAA;AAAA,MAAA,MAAA,EAAU,MAAA,CAAA;AAAV,KAG9B;AAHqD,IAAA,IAAI,EAAC;AAG1D,GAHJ,E,CACE,U,EACA,U,CAFF,E;;AAAA,GAQI,EAJJ,YAAA,CAGI,GAHJ,EAGI;AAHA,IAAA,OAAK,EAAA,MAAA,CAAA,CAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,GAAA,UAAA,MAAA;AAAA,aAAE,MAAA,CAAA,UAAA,GAAU,KAAZ;AAAA,KAAA,CAGL;AAH0B,IAAA,KAAK,EAAA;AAAA,MAAA,MAAA,EAAA,CAAW,MAAA,CAAA;AAAX,KAG/B;AAHuD,IAAA,IAAI,EAAC;AAG5D,GAHJ,E,CACE,U,EACA,U,CAFF,E;;AAAA,GAII,CATN,CAgBQ,EANuB,MAAA,CAAA,U,kBAA/B,YAAA,CAEM,KAFN,EAAA,WAAA,EAEM,CADJ,YAAA,CAAmC,uBAAnC,EAAmC;AAApB,IAAA,OAAO,EAAE,MAAA,CAAA;AAAW,GAAnC,EAA+B,IAA/B,EAA+B;AAAA;AAA/B,IAA+B,CAAA,SAAA,CAA/B,CACI,CAFN,C,mBAGA,YAAA,CAEM,KAFN,EAAA,WAAA,EAEM,CADJ,YAAA,CAAoC,wBAApC,EAAoC;AAApB,IAAA,OAAO,EAAE,MAAA,CAAA;AAAW,GAApC,EAAgC,IAAhC,EAAgC;AAAA;AAAhC,IAAgC,CAAA,SAAA,CAAhC,CACI,CAFN,C,CAGQ,CAjBV,C,GAkBA,YAAA,CAAe,sBAAf,C","sourcesContent":["<template>\n  <LoginHeader>联合登录</LoginHeader>\n  <section class=\"container\" v-if=\"isBind\">\n    <div class=\"unbind\">\n      <div class=\"loading\"></div>\n    </div>\n  </section>\n  <section class=\"container\" v-else>\n    <nav class=\"tab\">\n      <a @click=\"hasAccount=true\" :class=\"{active:hasAccount}\" href=\"javascript:;\">\n        <i class=\"iconfont icon-bind\" />\n        <span>已有小兔鲜账号，请绑定手机</span>\n      </a>\n      <a @click=\"hasAccount=false\" :class=\"{active:!hasAccount}\" href=\"javascript:;\">\n        <i class=\"iconfont icon-edit\" />\n        <span>没有小兔鲜账号，请完善资料</span>\n      </a>\n    </nav>\n    <div class=\"tab-content\" v-if=\"hasAccount\">\n      <CallbackBind :unionId=\"unionId\" />\n    </div>\n    <div class=\"tab-content\" v-else>\n      <CallbackPatch :unionId=\"unionId\" />\n    </div>\n  </section>\n  <LoginFooter />\n</template>\n<script>\nimport LoginHeader from './components/login-header'\nimport LoginFooter from './components/login-footer'\nimport CallbackBind from './components/callback-bind'\nimport CallbackPatch from './components/callback-patch'\nimport { ref } from 'vue'\nimport QC from 'qc'\nimport { userQQLogin } from '@/api/user'\nimport { useStore } from 'vuex'\nimport { useRouter } from 'vue-router'\nimport Message from '@/components/library/Message'\nexport default {\n  name: 'LoginCallback',\n  components: { LoginHeader, LoginFooter, CallbackBind, CallbackPatch },\n  setup () {\n    const hasAccount = ref(true)\n\n    // 首先：默认认为已经注册且已经绑定\n    // 通过QQ的API获取openId就是后台需要的unionId然后去进行登录\n    // 如果成功：登录成功\n    // 如果失败：改QQ未和小兔仙进行绑定（有帐号未绑定QQ，没有帐号未绑定QQ）\n    const isBind = ref(true)\n    const store = useStore()\n    const router = useRouter()\n    const unionId = ref(null)\n    // 确保QQ已经登录\n    if (QC.Login.check()) {\n      // 第三方唯一标识QQ唯一标识\n      QC.Login.getMe((openId) => {\n        unionId.value = openId\n        // 请求小兔鲜后台，做QQ登录\n        userQQLogin(openId).then(data => {\n          // 登录成功：data.result 用户信息\n          // 1. 存储用户信息\n          const { id, account, avatar, mobile, nickname, token } = data.result\n          store.commit('user/setUser', { id, account, avatar, mobile, nickname, token })\n          store.dispatch('cart/mergeCart').then(() => {\n          // 2. 跳转到来源页或者首页\n            router.push(store.state.user.redirectUrl)\n            // 3. 成功提示\n            Message({ type: 'success', text: 'QQ登录成功' })\n          })\n        }).catch(e => {\n          // 登录失败：没有和小兔鲜绑定\n          isBind.value = false\n        })\n      })\n    }\n\n    return { hasAccount, isBind, unionId }\n  }\n}\n</script>\n<style scoped lang=\"less\">\n.container {\n  padding: 25px 0;\n  position: relative;\n  height: 730px;\n  .unbind {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    padding: 25px 0;\n    z-index: 99;\n    .loading {\n      height: 100%;\n      background: #fff url(../../assets/images/load.gif) no-repeat center / 100px 100px;\n    }\n  }\n}\n.tab {\n  background: #fff;\n  height: 80px;\n  padding-top: 40px;\n  font-size: 18px;\n  text-align: center;\n  a {\n    color: #666;\n    display: inline-block;\n    width: 350px;\n    line-height: 40px;\n    border-bottom: 2px solid #e4e4e4;\n    i {\n      font-size: 22px;\n      vertical-align: middle;\n    }\n    span {\n      vertical-align: middle;\n      margin-left: 4px;\n    }\n    &.active {\n      color: @xtxColor;\n      border-color: @xtxColor;\n    }\n  }\n}\n.tab-content {\n  min-height: 600px;\n  background: #fff;\n}\n</style>\n"],"sourceRoot":""}]}