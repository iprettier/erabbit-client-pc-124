{"remainingRequest":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\thread-loader\\dist\\cjs.js!F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\babel-loader\\lib\\index.js!F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\vue-loader-v16\\dist\\templateLoader.js??ref--6!F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!F:\\代码\\Vue 代码\\erabbit-client-pc-124\\src\\views\\goods\\index.vue?vue&type=template&id=3874315c&scoped=true","dependencies":[{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\src\\views\\goods\\index.vue","mtime":1621243079000},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656924649801},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1656924649783},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\babel-loader\\lib\\index.js","mtime":1656924651984},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":1656924654079},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656924649801},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1656924653036}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCB7IGNyZWF0ZVRleHRWTm9kZSBhcyBfY3JlYXRlVGV4dFZOb2RlLCByZXNvbHZlQ29tcG9uZW50IGFzIF9yZXNvbHZlQ29tcG9uZW50LCB3aXRoQ3R4IGFzIF93aXRoQ3R4LCBjcmVhdGVWTm9kZSBhcyBfY3JlYXRlVk5vZGUsIHRvRGlzcGxheVN0cmluZyBhcyBfdG9EaXNwbGF5U3RyaW5nLCBvcGVuQmxvY2sgYXMgX29wZW5CbG9jaywgY3JlYXRlQmxvY2sgYXMgX2NyZWF0ZUJsb2NrLCBjcmVhdGVDb21tZW50Vk5vZGUgYXMgX2NyZWF0ZUNvbW1lbnRWTm9kZSwgd2l0aFNjb3BlSWQgYXMgX3dpdGhTY29wZUlkLCBwdXNoU2NvcGVJZCBhcyBfcHVzaFNjb3BlSWQsIHBvcFNjb3BlSWQgYXMgX3BvcFNjb3BlSWQgfSBmcm9tICJ2dWUiOwoKdmFyIF93aXRoSWQgPSAvKiNfX1BVUkVfXyovX3dpdGhTY29wZUlkKCJkYXRhLXYtMzg3NDMxNWMiKTsKCl9wdXNoU2NvcGVJZCgiZGF0YS12LTM4NzQzMTVjIik7Cgp2YXIgX2hvaXN0ZWRfMSA9IHsKICBrZXk6IDAsCiAgY2xhc3M6ICJ4dHgtZ29vZHMtcGFnZSIKfTsKdmFyIF9ob2lzdGVkXzIgPSB7CiAgY2xhc3M6ICJjb250YWluZXIiCn07Cgp2YXIgX2hvaXN0ZWRfMyA9IC8qI19fUFVSRV9fKi9fY3JlYXRlVGV4dFZOb2RlKCLpppbpobUiKTsKCnZhciBfaG9pc3RlZF80ID0gewogIGNsYXNzOiAiZ29vZHMtaW5mbyIKfTsKdmFyIF9ob2lzdGVkXzUgPSB7CiAgY2xhc3M6ICJtZWRpYSIKfTsKdmFyIF9ob2lzdGVkXzYgPSB7CiAgY2xhc3M6ICJzcGVjIgp9OwoKdmFyIF9ob2lzdGVkXzcgPSAvKiNfX1BVUkVfXyovX2NyZWF0ZVRleHRWTm9kZSgi5Yqg5YWl6LSt54mp6L2mIik7Cgp2YXIgX2hvaXN0ZWRfOCA9IHsKICBjbGFzczogImdvb2RzLWZvb3RlciIKfTsKdmFyIF9ob2lzdGVkXzkgPSB7CiAgY2xhc3M6ICJnb29kcy1hcnRpY2xlIgp9Owp2YXIgX2hvaXN0ZWRfMTAgPSB7CiAgY2xhc3M6ICJnb29kcy1hc2lkZSIKfTsKCl9wb3BTY29wZUlkKCk7CgpleHBvcnQgdmFyIHJlbmRlciA9IC8qI19fUFVSRV9fKi9fd2l0aElkKGZ1bmN0aW9uIChfY3R4LCBfY2FjaGUsICRwcm9wcywgJHNldHVwLCAkZGF0YSwgJG9wdGlvbnMpIHsKICB2YXIgX2NvbXBvbmVudF9YdHhCcmVhZEl0ZW0gPSBfcmVzb2x2ZUNvbXBvbmVudCgiWHR4QnJlYWRJdGVtIik7CgogIHZhciBfY29tcG9uZW50X1h0eEJyZWFkID0gX3Jlc29sdmVDb21wb25lbnQoIlh0eEJyZWFkIik7CgogIHZhciBfY29tcG9uZW50X0dvb2RzSW1hZ2UgPSBfcmVzb2x2ZUNvbXBvbmVudCgiR29vZHNJbWFnZSIpOwoKICB2YXIgX2NvbXBvbmVudF9Hb29kc1NhbGVzID0gX3Jlc29sdmVDb21wb25lbnQoIkdvb2RzU2FsZXMiKTsKCiAgdmFyIF9jb21wb25lbnRfR29vZHNOYW1lID0gX3Jlc29sdmVDb21wb25lbnQoIkdvb2RzTmFtZSIpOwoKICB2YXIgX2NvbXBvbmVudF9Hb29kc1NrdSA9IF9yZXNvbHZlQ29tcG9uZW50KCJHb29kc1NrdSIpOwoKICB2YXIgX2NvbXBvbmVudF9YdHhOdW1ib3ggPSBfcmVzb2x2ZUNvbXBvbmVudCgiWHR4TnVtYm94Iik7CgogIHZhciBfY29tcG9uZW50X1h0eEJ1dHRvbiA9IF9yZXNvbHZlQ29tcG9uZW50KCJYdHhCdXR0b24iKTsKCiAgdmFyIF9jb21wb25lbnRfR29vZHNSZWxldmFudCA9IF9yZXNvbHZlQ29tcG9uZW50KCJHb29kc1JlbGV2YW50Iik7CgogIHZhciBfY29tcG9uZW50X0dvb2RzVGFicyA9IF9yZXNvbHZlQ29tcG9uZW50KCJHb29kc1RhYnMiKTsKCiAgdmFyIF9jb21wb25lbnRfR29vZHNXYXJuID0gX3Jlc29sdmVDb21wb25lbnQoIkdvb2RzV2FybiIpOwoKICB2YXIgX2NvbXBvbmVudF9Hb29kc0hvdCA9IF9yZXNvbHZlQ29tcG9uZW50KCJHb29kc0hvdCIpOwoKICByZXR1cm4gJHNldHVwLmdvb2RzID8gKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKCJkaXYiLCBfaG9pc3RlZF8xLCBbX2NyZWF0ZVZOb2RlKCJkaXYiLCBfaG9pc3RlZF8yLCBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfWHR4QnJlYWQsIG51bGwsIHsKICAgIGRlZmF1bHQ6IF93aXRoSWQoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gW19jcmVhdGVWTm9kZShfY29tcG9uZW50X1h0eEJyZWFkSXRlbSwgewogICAgICAgIHRvOiAiLyIKICAgICAgfSwgewogICAgICAgIGRlZmF1bHQ6IF93aXRoSWQoZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIFtfaG9pc3RlZF8zXTsKICAgICAgICB9KSwKICAgICAgICBfOiAxCiAgICAgIH0pLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9YdHhCcmVhZEl0ZW0sIHsKICAgICAgICB0bzogIi9jYXRlZ29yeS8iLmNvbmNhdCgkc2V0dXAuZ29vZHMuY2F0ZWdvcmllc1sxXS5pZCkKICAgICAgfSwgewogICAgICAgIGRlZmF1bHQ6IF93aXRoSWQoZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIFtfY3JlYXRlVGV4dFZOb2RlKF90b0Rpc3BsYXlTdHJpbmcoJHNldHVwLmdvb2RzLmNhdGVnb3JpZXNbMV0ubmFtZSksIDEpXTsKICAgICAgICB9KSwKICAgICAgICBfOiAxCiAgICAgIH0sIDgsIFsidG8iXSksIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X1h0eEJyZWFkSXRlbSwgewogICAgICAgIHRvOiAiL2NhdGVnb3J5L3N1Yi8iLmNvbmNhdCgkc2V0dXAuZ29vZHMuY2F0ZWdvcmllc1swXS5pZCkKICAgICAgfSwgewogICAgICAgIGRlZmF1bHQ6IF93aXRoSWQoZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIFtfY3JlYXRlVGV4dFZOb2RlKF90b0Rpc3BsYXlTdHJpbmcoJHNldHVwLmdvb2RzLmNhdGVnb3JpZXNbMF0ubmFtZSksIDEpXTsKICAgICAgICB9KSwKICAgICAgICBfOiAxCiAgICAgIH0sIDgsIFsidG8iXSksIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X1h0eEJyZWFkSXRlbSwgbnVsbCwgewogICAgICAgIGRlZmF1bHQ6IF93aXRoSWQoZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIFtfY3JlYXRlVGV4dFZOb2RlKF90b0Rpc3BsYXlTdHJpbmcoJHNldHVwLmdvb2RzLm5hbWUpLCAxKV07CiAgICAgICAgfSksCiAgICAgICAgXzogMQogICAgICB9KV07CiAgICB9KSwKICAgIF86IDEKICB9KSwgX2NyZWF0ZVZOb2RlKCJkaXYiLCBfaG9pc3RlZF80LCBbX2NyZWF0ZVZOb2RlKCJkaXYiLCBfaG9pc3RlZF81LCBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfR29vZHNJbWFnZSwgewogICAgaW1hZ2VzOiAkc2V0dXAuZ29vZHMubWFpblBpY3R1cmVzCiAgfSwgbnVsbCwgOCwgWyJpbWFnZXMiXSksIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X0dvb2RzU2FsZXMpXSksIF9jcmVhdGVWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfNiwgW19jcmVhdGVWTm9kZShfY29tcG9uZW50X0dvb2RzTmFtZSwgewogICAgZ29vZHM6ICRzZXR1cC5nb29kcwogIH0sIG51bGwsIDgsIFsiZ29vZHMiXSksIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X0dvb2RzU2t1LCB7CiAgICBnb29kczogJHNldHVwLmdvb2RzLAogICAgb25DaGFuZ2U6ICRzZXR1cC5jaGFuZ2VTa3UKICB9LCBudWxsLCA4LCBbImdvb2RzIiwgIm9uQ2hhbmdlIl0pLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9YdHhOdW1ib3gsIHsKICAgIGxhYmVsOiAi5pWw6YePIiwKICAgIG1vZGVsVmFsdWU6ICRzZXR1cC5udW0sCiAgICAib25VcGRhdGU6bW9kZWxWYWx1ZSI6IF9jYWNoZVsxXSB8fCAoX2NhY2hlWzFdID0gZnVuY3Rpb24gKCRldmVudCkgewogICAgICByZXR1cm4gJHNldHVwLm51bSA9ICRldmVudDsKICAgIH0pLAogICAgbWF4OiAkc2V0dXAuZ29vZHMuaW52ZW50b3J5CiAgfSwgbnVsbCwgOCwgWyJtb2RlbFZhbHVlIiwgIm1heCJdKSwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfWHR4QnV0dG9uLCB7CiAgICBvbkNsaWNrOiBfY2FjaGVbMl0gfHwgKF9jYWNoZVsyXSA9IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgcmV0dXJuICRzZXR1cC5pbnNlcnRDYXJ0KCk7CiAgICB9KSwKICAgIHR5cGU6ICJwcmltYXJ5IiwKICAgIHN0eWxlOiB7CiAgICAgICJtYXJnaW4tdG9wIjogIjIwcHgiCiAgICB9CiAgfSwgewogICAgZGVmYXVsdDogX3dpdGhJZChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBbX2hvaXN0ZWRfN107CiAgICB9KSwKICAgIF86IDEKICB9KV0pXSksIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X0dvb2RzUmVsZXZhbnQsIHsKICAgIGdvb2RzSWQ6ICRzZXR1cC5nb29kcy5pZAogIH0sIG51bGwsIDgsIFsiZ29vZHNJZCJdKSwgX2NyZWF0ZVZOb2RlKCJkaXYiLCBfaG9pc3RlZF84LCBbX2NyZWF0ZVZOb2RlKCJkaXYiLCBfaG9pc3RlZF85LCBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfR29vZHNUYWJzKSwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfR29vZHNXYXJuKV0pLCBfY3JlYXRlVk5vZGUoImRpdiIsIF9ob2lzdGVkXzEwLCBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfR29vZHNIb3QpLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9Hb29kc0hvdCwgewogICAgdHlwZTogMgogIH0pXSldKV0pXSkpIDogX2NyZWF0ZUNvbW1lbnRWTm9kZSgiIiwgdHJ1ZSk7Cn0pOw=="},{"version":3,"sources":["F:\\代码\\Vue 代码\\erabbit-client-pc-124\\src\\views\\goods\\index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class='xtx-goods-page' v-if=\"goods\">\n    <div class=\"container\">\n      <!-- 面包屑 -->\n      <XtxBread>\n        <XtxBreadItem to=\"/\">首页</XtxBreadItem>\n        <XtxBreadItem :to=\"`/category/${goods.categories[1].id}`\">{{goods.categories[1].name}}</XtxBreadItem>\n        <XtxBreadItem :to=\"`/category/sub/${goods.categories[0].id}`\">{{goods.categories[0].name}}</XtxBreadItem>\n        <XtxBreadItem>{{goods.name}}</XtxBreadItem>\n      </XtxBread>\n      <!-- 商品信息 -->\n      <div class=\"goods-info\">\n        <div class=\"media\">\n          <GoodsImage :images=\"goods.mainPictures\" />\n          <GoodsSales />\n        </div>\n        <div class=\"spec\">\n          <GoodsName :goods=\"goods\" />\n          <!-- sku组件 skuId=\"1369155865461919746\" 测试选中 -->\n          <GoodsSku :goods=\"goods\" @change=\"changeSku\" />\n          <!-- 数量选择组件 -->\n          <XtxNumbox label=\"数量\" v-model=\"num\" :max=\"goods.inventory\" />\n          <!-- 按钮组件 -->\n          <XtxButton @click=\"insertCart()\" type=\"primary\" style=\"margin-top:20px\">加入购物车</XtxButton>\n        </div>\n      </div>\n      <!-- 商品推荐 -->\n      <GoodsRelevant :goodsId=\"goods.id\" />\n      <!-- 商品详情 -->\n      <div class=\"goods-footer\">\n        <div class=\"goods-article\">\n          <!-- 商品+评价 -->\n          <GoodsTabs />\n          <!-- 注意事项 -->\n          <GoodsWarn />\n        </div>\n        <!-- 24热榜+周热销榜 -->\n        <div class=\"goods-aside\">\n          <GoodsHot />\n          <GoodsHot :type=\"2\" />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport GoodsRelevant from './components/goods-relevant'\nimport GoodsImage from './components/goods-image'\nimport GoodsSales from './components/goods-sales'\nimport GoodsName from './components/goods-name'\nimport GoodsSku from './components/goods-sku'\nimport GoodsTabs from './components/goods-tabs'\nimport GoodsHot from './components/goods-hot'\nimport GoodsWarn from './components/goods-warn'\nimport { nextTick, provide, ref, watch } from 'vue'\nimport { findGoods } from '@/api/product'\nimport { useRoute } from 'vue-router'\nimport { useStore } from 'vuex'\nimport Message from '@/components/library/Message'\nexport default {\n  name: 'XtxGoodsPage',\n  components: { GoodsRelevant, GoodsImage, GoodsSales, GoodsName, GoodsSku, GoodsTabs, GoodsHot, GoodsWarn },\n  setup () {\n    const goods = useGoods()\n    const changeSku = (sku) => {\n      // 修改商品的现价原价库存信息\n      if (sku.skuId) {\n        goods.value.price = sku.price\n        goods.value.oldPrice = sku.oldPrice\n        goods.value.inventory = sku.inventory\n      }\n      // 记录选择后的sku，可能有数据，可能没有数据{}\n      currSku.value = sku\n    }\n\n    // 提供goods数据给后代组件使用\n    provide('goods', goods)\n\n    // 选择的数量\n    const num = ref(1)\n\n    // 加入购物车\n    const store = useStore()\n    const currSku = ref(null)\n    const insertCart = () => {\n      if (currSku.value && currSku.value.skuId) {\n        // id skuId name attrsText picture price nowPrice selected stock count isEffective\n        const { skuId, specsText: attrsText, inventory: stock } = currSku.value\n        const { id, name, price, mainPictures } = goods.value\n        store.dispatch('cart/insertCart', {\n          skuId,\n          attrsText,\n          stock,\n          id,\n          name,\n          price,\n          nowPrice: price,\n          picture: mainPictures[0],\n          selected: true,\n          isEffective: true,\n          count: num.value\n        }).then(() => {\n          Message({ type: 'success', text: '加入购物车成功' })\n        })\n      } else {\n        Message({ text: '请选择完整规格' })\n      }\n    }\n\n    return { goods, changeSku, num, insertCart }\n  }\n}\n// 获取商品详情\nconst useGoods = () => {\n  // 出现路由地址商品ID发生变化，但是不会重新初始化组件\n  const goods = ref(null)\n  const route = useRoute()\n  watch(() => route.params.id, (newVal) => {\n    if (newVal && `/product/${newVal}` === route.path) {\n      findGoods(route.params.id).then(data => {\n        // 让商品数据为null然后使用v-if的组件可以重新销毁和创建\n        goods.value = null\n        nextTick(() => {\n          goods.value = data.result\n        })\n      })\n    }\n  }, { immediate: true })\n  return goods\n}\n</script>\n\n<style scoped lang='less'>\n.goods-info {\n  min-height: 600px;\n  background: #fff;\n  display: flex;\n  .media {\n    width: 580px;\n    height: 600px;\n    padding: 30px 50px;\n  }\n  .spec {\n    flex: 1;\n    padding: 30px 30px 30px 0;\n  }\n}\n.goods-footer {\n  display: flex;\n  margin-top: 20px;\n  .goods-article {\n    width: 940px;\n    margin-right: 20px;\n  }\n  .goods-aside {\n    width: 280px;\n    min-height: 1000px;\n  }\n}\n// .goods-tabs {\n//   min-height: 600px;\n//   background: #fff;\n// }\n// .goods-warn {\n//   min-height: 600px;\n//   background: #fff;\n//   margin-top: 20px;\n// }\n</style>\n"],"sourceRoot":""}]}