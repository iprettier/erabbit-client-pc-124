{"remainingRequest":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\thread-loader\\dist\\cjs.js!F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\babel-loader\\lib\\index.js!F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!F:\\代码\\Vue 代码\\erabbit-client-pc-124\\src\\views\\login\\components\\callback-bind.vue?vue&type=script&lang=js","dependencies":[{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\src\\views\\login\\components\\callback-bind.vue","mtime":1621243079000},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656924649801},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1656924649783},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\babel-loader\\lib\\index.js","mtime":1656924651984},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656924649801},{"path":"F:\\代码\\Vue 代码\\erabbit-client-pc-124\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1656924653036}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRjovXHU0RUUzXHU3ODAxL1Z1ZSBcdTRFRTNcdTc4MDEvZXJhYmJpdC1jbGllbnQtcGMtMTI0L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkY6L1x1NEVFM1x1NzgwMS9WdWUgXHU0RUUzXHU3ODAxL2VyYWJiaXQtY2xpZW50LXBjLTEyNC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IFFDIGZyb20gJ3FjJzsKaW1wb3J0IHsgcmVhY3RpdmUsIHJlZiwgb25Vbm1vdW50ZWQgfSBmcm9tICd2dWUnOwppbXBvcnQgeyBGb3JtLCBGaWVsZCB9IGZyb20gJ3ZlZS12YWxpZGF0ZSc7CmltcG9ydCBzY2hlbWEgZnJvbSAnQC91dGlscy92ZWUtdmFsaWRhdGUtc2NoZW1hJzsKaW1wb3J0IHsgdXNlclFRQmluZENvZGUsIHVzZXJRUUJpbmRMb2dpbiB9IGZyb20gJ0AvYXBpL3VzZXInOwppbXBvcnQgeyB1c2VJbnRlcnZhbEZuIH0gZnJvbSAnQHZ1ZXVzZS9jb3JlJzsKaW1wb3J0IE1lc3NhZ2UgZnJvbSAnQC9jb21wb25lbnRzL2xpYnJhcnkvTWVzc2FnZSc7CmltcG9ydCB7IHVzZVN0b3JlIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ3Z1ZS1yb3V0ZXInOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0NhbGxiYWNrQmluZCcsCiAgY29tcG9uZW50czogewogICAgRm9ybTogRm9ybSwKICAgIEZpZWxkOiBGaWVsZAogIH0sCiAgcHJvcHM6IHsKICAgIHVuaW9uSWQ6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnJwogICAgfQogIH0sCiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKHByb3BzKSB7CiAgICAvLyAxLiDlh4blpIfkuIvkv6Hmga/vvJp1bmlvbklkKG9wZW5JZCkgcXHlpLTlg48g5pi156ewCiAgICAvLyAyLiDlrozmiJDooajljZXmoKHpqowKICAgIC8vIDMuIOWPkemAgemqjOivgeWQl++8iOagoemqjO+8jOWumuS5iWFwae+8jOiwg+eUqO+8jOWujOaIkOWAkuiuoeaXtu+8iQogICAgLy8gNC4g6L+b6KGM57uR5a6a77yI57uR5a6a5oiQ5Yqf5bCx5piv55m75b2V5oiQ5Yqf77yJCiAgICB2YXIgbmlja25hbWUgPSByZWYoJ251bGwnKTsKICAgIHZhciBhdmF0YXIgPSByZWYoJ251bGwnKTsKCiAgICBpZiAoUUMuTG9naW4uY2hlY2soKSkgewogICAgICBRQy5hcGkoJ2dldF91c2VyX2luZm8nKS5zdWNjZXNzKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBhdmF0YXIudmFsdWUgPSByZXMuZGF0YS5maWd1cmV1cmxfcXFfMTsKICAgICAgICBuaWNrbmFtZS52YWx1ZSA9IHJlcy5kYXRhLm5pY2tuYW1lOwogICAgICB9KTsKICAgIH0gLy8g6KGo5Y2V5pWw5o2u5a+56LGhCgoKICAgIHZhciBmb3JtID0gcmVhY3RpdmUoewogICAgICBtb2JpbGU6IG51bGwsCiAgICAgIGNvZGU6IG51bGwKICAgIH0pOyAvLyDmoKHpqozop4TliJnlr7nosaEKCiAgICB2YXIgbXlTY2hlbWEgPSB7CiAgICAgIG1vYmlsZTogc2NoZW1hLm1vYmlsZSwKICAgICAgY29kZTogc2NoZW1hLmNvZGUKICAgIH07IC8vIOWPkemAgeefreS/oemqjOivgeeggQogICAgLy8gcGF1c2Ug5pqC5YGcIHJlc3VtZSDlvIDlp4sKICAgIC8vIHVzZUludGVydmFsRm4o5Zue6LCD5Ye95pWwLOaJp+ihjOmXtOmalCzmmK/lkKbnq4vljbPlvIDlkK8pCgogICAgdmFyIGZvcm1Db20gPSByZWYobnVsbCk7CiAgICB2YXIgdGltZSA9IHJlZigwKTsKCiAgICB2YXIgX3VzZUludGVydmFsRm4gPSB1c2VJbnRlcnZhbEZuKGZ1bmN0aW9uICgpIHsKICAgICAgdGltZS52YWx1ZS0tOwoKICAgICAgaWYgKHRpbWUudmFsdWUgPD0gMCkgewogICAgICAgIHBhdXNlKCk7CiAgICAgIH0KICAgIH0sIDEwMDAsIGZhbHNlKSwKICAgICAgICBwYXVzZSA9IF91c2VJbnRlcnZhbEZuLnBhdXNlLAogICAgICAgIHJlc3VtZSA9IF91c2VJbnRlcnZhbEZuLnJlc3VtZTsKCiAgICBvblVubW91bnRlZChmdW5jdGlvbiAoKSB7CiAgICAgIHBhdXNlKCk7CiAgICB9KTsgLy8gMS4g5Y+R6YCB6aqM6K+B56CBCiAgICAvLyAxLjEg57uR5a6a5Y+R6YCB6aqM6K+B56CB5oyJ6ZKu54K55Ye75LqL5Lu2CiAgICAvLyAxLjIg5qCh6aqM5omL5py65Y+377yM5aaC5p6c5oiQ5Yqf5omN5Y675Y+R6YCB55+t5L+h77yI5a6a5LmJQVBJ77yJ77yM6K+35rGC5oiQ5Yqf5byA5ZCvNjBz55qE5YCS6K6h5pe277yM5LiN6IO95YaN5qyh54K55Ye777yM5YCS6K6h5pe257uT5p2f5oGi5aSNCiAgICAvLyAxLjMg5aaC5p6c5aSx6LSl77yM5aSx6LSl55qE5qCh6aqM5qC35byP5pi+56S65Ye65p2lCgogICAgdmFyIHNlbmQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgdmFsaWQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgdmFsaWQgPSBteVNjaGVtYS5tb2JpbGUoZm9ybS5tb2JpbGUpOwoKICAgICAgICAgICAgICAgIGlmICghKHZhbGlkID09PSB0cnVlKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICghKHRpbWUudmFsdWUgPT09IDApKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgIHJldHVybiB1c2VyUVFCaW5kQ29kZShmb3JtLm1vYmlsZSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIE1lc3NhZ2UoewogICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgICAgIHRleHQ6ICflj5HpgIHmiJDlip8nCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHRpbWUudmFsdWUgPSA2MDsKICAgICAgICAgICAgICAgIHJlc3VtZSgpOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIC8vIOWksei0pe+8jOS9v+eUqHZlZeeahOmUmeivr+WHveaVsOaYvuekuumUmeivr+S/oeaBryBzZXRGaWVsZEVycm9yKOWtl+autSzplJnor6/kv6Hmga8pCiAgICAgICAgICAgICAgICBmb3JtQ29tLnZhbHVlLnNldEZpZWxkRXJyb3IoJ21vYmlsZScsIHZhbGlkKTsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSk7CgogICAgICByZXR1cm4gZnVuY3Rpb24gc2VuZCgpIHsKICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9OwogICAgfSgpOyAvLyDnq4vljbPnu5HlrpoKCgogICAgdmFyIHN0b3JlID0gdXNlU3RvcmUoKTsKICAgIHZhciByb3V0ZXIgPSB1c2VSb3V0ZXIoKTsKCiAgICB2YXIgc3VibWl0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWYyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgdmFsaWQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHZhbGlkID0gZm9ybUNvbS52YWx1ZS52YWxpZGF0ZSgpOwoKICAgICAgICAgICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgICAgICAgICB1c2VyUVFCaW5kTG9naW4oX29iamVjdFNwcmVhZCh7CiAgICAgICAgICAgICAgICAgICAgdW5pb25JZDogcHJvcHMudW5pb25JZAogICAgICAgICAgICAgICAgICB9LCBmb3JtKSkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgICAgICAgICAgIC8vIOWunueOsOWSjOS5i+WJjeeZu+W9leS4gOagt+eahOmAu+i+kQogICAgICAgICAgICAgICAgICAgIC8vIDEuIOWtmOWCqOeUqOaIt+S/oeaBrwogICAgICAgICAgICAgICAgICAgIHZhciBfZGF0YSRyZXN1bHQgPSBkYXRhLnJlc3VsdCwKICAgICAgICAgICAgICAgICAgICAgICAgaWQgPSBfZGF0YSRyZXN1bHQuaWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQgPSBfZGF0YSRyZXN1bHQuYWNjb3VudCwKICAgICAgICAgICAgICAgICAgICAgICAgYXZhdGFyID0gX2RhdGEkcmVzdWx0LmF2YXRhciwKICAgICAgICAgICAgICAgICAgICAgICAgbW9iaWxlID0gX2RhdGEkcmVzdWx0Lm1vYmlsZSwKICAgICAgICAgICAgICAgICAgICAgICAgbmlja25hbWUgPSBfZGF0YSRyZXN1bHQubmlja25hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuID0gX2RhdGEkcmVzdWx0LnRva2VuOwogICAgICAgICAgICAgICAgICAgIHN0b3JlLmNvbW1pdCgndXNlci9zZXRVc2VyJywgewogICAgICAgICAgICAgICAgICAgICAgaWQ6IGlkLAogICAgICAgICAgICAgICAgICAgICAgYWNjb3VudDogYWNjb3VudCwKICAgICAgICAgICAgICAgICAgICAgIGF2YXRhcjogYXZhdGFyLAogICAgICAgICAgICAgICAgICAgICAgbW9iaWxlOiBtb2JpbGUsCiAgICAgICAgICAgICAgICAgICAgICBuaWNrbmFtZTogbmlja25hbWUsCiAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogdG9rZW4KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBzdG9yZS5kaXNwYXRjaCgnY2FydC9tZXJnZUNhcnQnKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgIC8vIDIuIOi3s+i9rOWIsOadpea6kOmhteaIluiAhemmlumhtQogICAgICAgICAgICAgICAgICAgICAgcm91dGVyLnB1c2goc3RvcmUuc3RhdGUudXNlci5yZWRpcmVjdFVybCk7IC8vIDMuIOaIkOWKn+aPkOekugoKICAgICAgICAgICAgICAgICAgICAgIE1lc3NhZ2UoewogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICdRUee7keWumuaIkOWKnycKICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgIE1lc3NhZ2UoewogICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICfnu5HlrprlpLHotKUnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSk7CgogICAgICByZXR1cm4gZnVuY3Rpb24gc3VibWl0KCkgewogICAgICAgIHJldHVybiBfcmVmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9OwogICAgfSgpOwoKICAgIHJldHVybiB7CiAgICAgIG5pY2tuYW1lOiBuaWNrbmFtZSwKICAgICAgYXZhdGFyOiBhdmF0YXIsCiAgICAgIGZvcm06IGZvcm0sCiAgICAgIG15U2NoZW1hOiBteVNjaGVtYSwKICAgICAgc2VuZDogc2VuZCwKICAgICAgdGltZTogdGltZSwKICAgICAgZm9ybUNvbTogZm9ybUNvbSwKICAgICAgc3VibWl0OiBzdWJtaXQKICAgIH07CiAgfQp9Ow=="},{"version":3,"sources":["F:\\代码\\Vue 代码\\erabbit-client-pc-124\\src\\views\\login\\components\\callback-bind.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <Form ref=\"formCom\" :validation-schema=\"mySchema\" v-slot=\"{errors}\" autocomplete=\"off\" class=\"xtx-form\">\n    <div class=\"user-info\">\n      <img :src=\"avatar\" alt=\"\" />\n      <p>Hi，{{nickname}} 欢迎来小兔鲜，完成绑定后可以QQ账号一键登录哦~</p>\n    </div>\n    <div class=\"xtx-form-item\">\n      <div class=\"field\">\n        <i class=\"icon iconfont icon-phone\"></i>\n        <Field :class=\"{err:errors.mobile}\" v-model=\"form.mobile\" name=\"mobile\" class=\"input\" type=\"text\" placeholder=\"绑定的手机号\" />\n      </div>\n      <div v-if=\"errors.mobile\" class=\"error\">{{errors.mobile}}</div>\n    </div>\n    <div class=\"xtx-form-item\">\n      <div class=\"field\">\n        <i class=\"icon iconfont icon-code\"></i>\n        <Field :class=\"{err:errors.code}\" v-model=\"form.code\" name=\"code\" class=\"input\" type=\"text\" placeholder=\"短信验证码\" />\n        <span @click=\"send()\" class=\"code\">\n          {{time===0?'发送验证码':`${time}秒后发送`}}\n        </span>\n      </div>\n      <div v-if=\"errors.code\" class=\"error\">{{errors.code}}</div>\n    </div>\n    <a @click=\"submit()\" href=\"javascript:;\" class=\"submit\">立即绑定</a>\n  </Form>\n</template>\n\n<script>\nimport QC from 'qc'\nimport { reactive, ref, onUnmounted } from 'vue'\nimport { Form, Field } from 'vee-validate'\nimport schema from '@/utils/vee-validate-schema'\nimport { userQQBindCode, userQQBindLogin } from '@/api/user'\nimport { useIntervalFn } from '@vueuse/core'\nimport Message from '@/components/library/Message'\nimport { useStore } from 'vuex'\nimport { useRouter } from 'vue-router'\nexport default {\n  name: 'CallbackBind',\n  components: { Form, Field },\n  props: {\n    unionId: {\n      type: String,\n      default: ''\n    }\n  },\n  setup (props) {\n    // 1. 准备下信息：unionId(openId) qq头像 昵称\n    // 2. 完成表单校验\n    // 3. 发送验证吗（校验，定义api，调用，完成倒计时）\n    // 4. 进行绑定（绑定成功就是登录成功）\n    const nickname = ref('null')\n    const avatar = ref('null')\n    if (QC.Login.check()) {\n      QC.api('get_user_info').success(res => {\n        avatar.value = res.data.figureurl_qq_1\n        nickname.value = res.data.nickname\n      })\n    }\n\n    // 表单数据对象\n    const form = reactive({\n      mobile: null,\n      code: null\n    })\n    // 校验规则对象\n    const mySchema = {\n      mobile: schema.mobile,\n      code: schema.code\n    }\n\n    // 发送短信验证码\n    // pause 暂停 resume 开始\n    // useIntervalFn(回调函数,执行间隔,是否立即开启)\n    const formCom = ref(null)\n    const time = ref(0)\n    const { pause, resume } = useIntervalFn(() => {\n      time.value--\n      if (time.value <= 0) {\n        pause()\n      }\n    }, 1000, false)\n    onUnmounted(() => {\n      pause()\n    })\n\n    // 1. 发送验证码\n    // 1.1 绑定发送验证码按钮点击事件\n    // 1.2 校验手机号，如果成功才去发送短信（定义API），请求成功开启60s的倒计时，不能再次点击，倒计时结束恢复\n    // 1.3 如果失败，失败的校验样式显示出来\n    const send = async () => {\n      const valid = mySchema.mobile(form.mobile)\n      if (valid === true) {\n        // 通过\n        if (time.value === 0) {\n        // 没有倒计时才可以发送\n          await userQQBindCode(form.mobile)\n          Message({ type: 'success', text: '发送成功' })\n          time.value = 60\n          resume()\n        }\n      } else {\n        // 失败，使用vee的错误函数显示错误信息 setFieldError(字段,错误信息)\n        formCom.value.setFieldError('mobile', valid)\n      }\n    }\n\n    // 立即绑定\n    const store = useStore()\n    const router = useRouter()\n    const submit = async () => {\n      const valid = formCom.value.validate()\n      if (valid) {\n        userQQBindLogin({\n          unionId: props.unionId,\n          ...form\n        }).then(data => {\n          // 实现和之前登录一样的逻辑\n          // 1. 存储用户信息\n          const { id, account, avatar, mobile, nickname, token } = data.result\n          store.commit('user/setUser', { id, account, avatar, mobile, nickname, token })\n          store.dispatch('cart/mergeCart').then(() => {\n          // 2. 跳转到来源页或者首页\n            router.push(store.state.user.redirectUrl)\n            // 3. 成功提示\n            Message({ type: 'success', text: 'QQ绑定成功' })\n          })\n        }).catch(e => {\n          Message({ type: 'error', text: '绑定失败' })\n        })\n      }\n    }\n\n    return { nickname, avatar, form, mySchema, send, time, formCom, submit }\n  }\n}\n</script>\n\n<style scoped lang='less'>\n.user-info {\n    width: 320px;\n    height: 70px;\n    margin: 0 auto;\n    display: flex;\n    background: #f2f2f2;\n    align-items: center;\n    padding: 0 10px;\n    margin-bottom: 25px;\n    img {\n      background: #f2f2f2;\n      width: 50px;\n      height: 50px;\n    }\n    p {\n      padding-left: 10px;\n    }\n  }\n  .code {\n    position: absolute;\n    right: 0;\n    top: 0;\n    line-height: 50px;\n    width: 80px;\n    color: #999;\n    &:hover {\n      cursor: pointer;\n    }\n  }\n</style>\n"],"sourceRoot":""}]}